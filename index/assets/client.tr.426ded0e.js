(()=>{"use strict";var e,t,n,i={930:(e,t,n)=>{var i=n(5925),r=n(9049),o=n(7811);function a(e,t,n,i,r,o,a){return{type:"s/LIST_TEMPLATE",imageId:e,title:t,canvasId:n,x:i,y:r,width:o,height:a}}function s(e){return{type:"s/REM_TEMPLATE",title:e}}function l(e,t){return{type:"s/CHG_TEMPLATE",title:e,props:t}}var c=n(1596),d=n(8582),u=n(2960),h=n(1265),f=n(9282);const p={showGrid:!1,showPixelNotify:!1,showMvmCtrls:!1,autoZoomIn:!1,isPotato:!1,isLightGrid:!1,compactPalette:!1,paletteOpen:!0,mute:!1,chatNotify:!0,menuOpen:!1,onlineCanvas:!1,style:"default",holdPaint:c.h7.OFF,easterEgg:!1,moveU:0,moveV:0,moveW:0,musicPlayer:null},m={lastFetch:0,totalPixels:0,dailyTotalPixels:0,ranking:1488,dailyRanking:1488,online:{total:0},totalRanking:[],totalDailyRanking:[],dailyCRanking:[],prevTop:[],onlineStats:[],cHistStats:[],histStats:{users:[],stats:[]},pDailyStats:[],pHourlyStats:[]},v=15e3,g={mute:[],readTs:{},unread:{}},y={id:null,name:null,wait:null,flag:null,createdAt:null,coolDown:null,lastCoolDownEnd:null,messages:[],mailreg:!1,blockDm:!1,priv:!1,isOnMobile:!1,notification:null,userlvl:0},w=class{length;rgb;colors;abgr;fl;constructor(e){this.length=e.length,this.rgb=new Uint8Array(3*this.length),this.colors=new Array(this.length),this.abgr=new Uint32Array(this.length),this.fl=new Array(this.length);let t=0;for(let n=0;n<e.length;n++){const i=e[n][0],r=e[n][1],o=e[n][2];this.rgb[t++]=i,this.rgb[t++]=r,this.rgb[t++]=o,this.colors[n]=`rgb(${i}, ${r}, ${o})`,this.abgr[n]=4278190080|o<<16|r<<8|i,this.fl[n]=[i/256,r/256,o/256]}}isDark(e){return e*=3,.2126*this.rgb[e++]+.7152*this.rgb[e++]+.0722*this.rgb[e]<128}getIndexOfColor(e,t,n){const{rgb:i}=this;let r=i.length/3;for(;r>0;){r-=1;const o=3*r;if(i[o]===e&&i[o+1]===t&&i[o+2]===n)return r}return null}getClosestIndexOfColor(e,t,n){const{rgb:i}=this;let r=i.length/3,o=0,a=null;for(;r>0;){r-=1;const s=3*r;let l=(i[s]-e)**2;l+=(i[s+1]-t)**2,l+=(i[s+2]-n)**2,(null===a||a>l)&&(o=r,a=l)}return o}};var b=n(3008);function k(e){const{canvasEndDate:t,isHistoricalView:n,is3D:i}=e;if(i&&n?e.isHistoricalView=!1:t&&!n&&(e.isHistoricalView=!0,e.historicalDate||(e.historicalDate=(0,b.$T)(t),e.historicalTime="0000")),e.isHistoricalView){const{historicalDate:t,canvasId:n,canvasSize:i,canvases:r}=e;e.historicalCanvasSize=(0,b.gQ)(t,i,r[n]?.historicalSizes)}return e}function S(e,t){const n=e.cli||0,{size:i,sd:r=null,ed:o=null,ident:a,colors:s}=e,l=!!e.v;let d=[0,0,c.$Y],u=n;return t&&(d=t.view,u=t.selectedColor),{clrIgnore:n,canvasSize:i,canvasStartDate:r,canvasEndDate:o,canvasIdent:a,is3D:l,view:d,selectedColor:u,palette:new w(s,0)}}function E(e){const{hash:t}=window.location,n=decodeURIComponent(t).substring(1).split(",");let i=n[0],r=(0,b.tw)(e,i);if(!r&&window.ssv.dc&&(r=window.ssv.dc),!r||!window.ssv?.backupurl&&e[r].ed){r=c.V8;const t=e[c.V8];if(!t)return null;i=t.ident}const o=!!e[r].v,a=parseInt(n[1],10)||0,s=parseInt(n[2],10)||0;let l=parseInt(n[3],10);return Number.isNaN(l)?l=o?0:c.$Y:o||(l=2**(l/10)),{canvasId:r,canvasIdent:i,view:[a,s,l]}}const C={canvasId:null,canvasIdent:"xx",canvases:{},canvasSize:65536,historicalCanvasSize:65536,is3D:null,canvasStartDate:null,canvasEndDate:null,canvasMaxTiledZoom:(0,b.YQ)(65536),palette:new w([[0,0,0]]),clrIgnore:0,selectedColor:0,view:[0,0,c.$Y],isHistoricalView:!1,historicalDate:null,historicalTime:null,hover:null,prevCanvasState:{}},T={ovEnabled:!1,mEnabled:!1,oOpacity:40,oSmallPxls:!0,oRightShift:!1,list:[]},x={channels:{},blocked:[],messages:{}};let N=0;const I={fetchingChunks:0,fetchingChat:!1,fetchingPixel:!1,fetchingApi:!1},A=(e,t)=>e&&e._persist&&e._persist.version===t?(console.log(`Store version: ${t}`),Promise.resolve(e)):(console.log("Newer version run, resetting store."),Promise.resolve({})),_={gui:(0,i.rL)({key:"gui",storage:f.A,version:17,migrate:A},(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"s/TGL_GRID":return{...e,showGrid:!e.showGrid};case"s/TGL_PXL_NOTIFY":return{...e,showPixelNotify:!e.showPixelNotify};case"s/TGL_MVM_CTRLS":return{...e,showMvmCtrls:!e.showMvmCtrls};case"s/TGL_AUTO_ZOOM_IN":return{...e,autoZoomIn:!e.autoZoomIn};case"s/TGL_ONLINE_CANVAS":return{...e,onlineCanvas:!e.onlineCanvas};case"s/TGL_POTATO_MODE":return{...e,isPotato:!e.isPotato};case"s/TGL_LIGHT_GRID":return{...e,isLightGrid:!e.isLightGrid};case"s/TGL_COMPACT_PALETTE":return{...e,compactPalette:!e.compactPalette};case"s/TGL_OPEN_PALETTE":return{...e,paletteOpen:!e.paletteOpen};case"s/TGL_OPEN_MENU":return{...e,menuOpen:!e.menuOpen};case"s/TGL_MUTE":return{...e,mute:!e.mute};case"s/TGL_CHAT_NOTIFY":return{...e,chatNotify:!e.chatNotify};case"s/TGL_EASTER_EGG":return{...e,easterEgg:!e.easterEgg};case"s/SELECT_HOLD_PAINT":return{...e,holdPaint:t.value};case"s/SELECT_STYLE":{const{style:n}=t;return{...e,style:n}}case"s/SELECT_MUSIC":return{...e,musicPlayer:t.value};case"SELECT_COLOR":{const{compactPalette:t}=e;let{paletteOpen:n}=e;return(t||window.innerWidth<300)&&(n=!1),{...e,paletteOpen:n}}case"s/SET_MOVE_U":{const{value:n}=t,i=n;return{...e,moveU:i}}case"s/SET_MOVE_V":{const{value:n}=t,i=n;return{...e,moveV:i}}case"s/SET_MOVE_W":{const{value:n}=t,i=n;return{...e,moveW:i}}case"s/CANCEL_MOVE":return{...e,moveU:0,moveV:0,moveW:0};case"persist/REHYDRATE":return{...e,easterEgg:!1,holdPaint:c.h7.OFF,moveU:0,moveV:0,moveW:0};default:return e}})),ranks:(0,i.rL)({key:"ranks",storage:f.A,version:17,migrate:A},(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REC_SET_PXLS":{const{rankedPxlCnt:n}=t;if(!n)return e;let{totalPixels:i,dailyTotalPixels:r}=e;return i+=n,r+=n,{...e,totalPixels:i,dailyTotalPixels:r}}case"REC_ONLINE":{const{online:n}=t;return{...e,online:n}}case"s/REC_ME":case"s/LOGIN":{if(!t.totalPixels)return e;const{totalPixels:n,dailyTotalPixels:i,ranking:r,dailyRanking:o}=t;return{...e,totalPixels:n,dailyTotalPixels:i,ranking:r,dailyRanking:o}}case"REC_STATS":{const{totalRanking:n,totalDailyRanking:i,dailyCRanking:r,prevTop:o,onlineStats:a,cHistStats:s,histStats:l,pDailyStats:c,pHourlyStats:d}=t,u={totalRanking:n,totalDailyRanking:i,dailyCRanking:r,prevTop:o,onlineStats:a,cHistStats:s,histStats:l,pDailyStats:c,pHourlyStats:d},h=Date.now();return{...e,lastFetch:h,...u}}default:return e}})),chatRead:(0,i.rL)({key:"cr",storage:f.A,version:17,migrate:A},(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"s/REC_ME":case"s/LOGIN":{const{channels:n}=t,i=Object.keys(n),r={},o={};for(let t=0;t<i.length;t+=1){const a=i[t];e.readTs[a]?r[a]=e.readTs[a]:r[a]=0,o[a]=n[a][2]>r[a]}return{...e,readTs:r,unread:o}}case"s/ADD_CHAT_CHANNEL":{const[n]=Object.keys(t.channel);return{...e,readTs:{...e.readTs,[n]:e.readTs[n]||0},unread:{...e.unread,[n]:!0}}}case"s/REMOVE_CHAT_CHANNEL":{const{cid:n}=t;if(!e.readTs[n])return e;const i={...e.readTs};delete i[n];const r={...e.unread};return delete r[n],{...e,readTs:i,unread:r}}case"s/REC_CHAT_MESSAGE":{const{channel:n,isRead:i}=t,r=i?{...e.readTs,[n]:Date.now()+v}:e.readTs,o=i?e.unread:{...e.unread,[n]:!0};return{...e,readTs:r,unread:o}}case"OPEN_WIN":{const{windowType:n}=t;if("CHAT"!==n)return e;const i=t.args&&t.args.chatChannel||1;return{...e,readTs:{...e.readTs,[i]:Date.now()+v},unread:{...e.unread,[i]:!1}}}case"MARK_CHANNEL_AS_READ":{const{cid:n}=t;return{...e,readTs:{...e.readTs,[n]:Date.now()+v},unread:{...e.unread,[n]:!1}}}case"s/MUTE_CHAT_CHANNEL":{const{cid:n}=t;return{...e,mute:[...e.mute,n]}}case"s/UNMUTE_CHAT_CHANNEL":{const{cid:n}=t,i=e.mute.filter((e=>e!==n));return{...e,mute:i}}default:return e}})),templates:(0,i.rL)({key:"tem",storage:f.A,version:17,migrate:A},(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"s/LIST_TEMPLATE":{const{imageId:n,title:i,canvasId:r,x:o,y:a,width:s,height:l}=t;return{...e,list:[...e.list,{enabled:!0,title:i,canvasId:r,x:o,y:a,imageId:n,width:s,height:l}]}}case"s/CHG_TEMPLATE":{const{title:n,props:i}=t,{list:r}=e,o=r.findIndex((e=>e.title===n));return-1===o?e:{...e,list:[...r.slice(0,o),{...r[o],...i},...r.slice(o+1)]}}case"s/REM_TEMPLATE":return{...e,list:e.list.filter((e=>e.title!==t.title))};case"s/UPD_TEMPLATE_IMG":{const{imageId:n,width:i,height:r}=t,{list:o}=e,a=o.findIndex((e=>e.imageId===n));return-1===a?e:{...e,list:[...o.slice(0,a),{...o[a],imageId:n,width:i,height:r},...o.slice(a+1)]}}case"s/TGL_OVENABLED":return{...e,ovEnabled:!e.ovEnabled};case"s/TGL_SMALLPXLS":return{...e,oSmallPxls:!e.oSmallPxls};case"s/TGL_RIGHTSHIFT":return{...e,oRightShift:!e.oRightShift};case"s/SET_O_OPACITY":return{...e,oOpacity:t.opacity};case"TEMPLATES_READY":return{...e,available:!0};case"persist/REHYDRATE":return{...e,available:!1};default:return e}})),user:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COOLDOWN_SET":{const{coolDown:n}=t;return{...e,coolDown:n||null}}case"COOLDOWN_END":return{...e,coolDown:null,lastCoolDownEnd:Date.now(),wait:null};case"REC_SET_PXLS":{const{wait:n}=t;return{...e,wait:n?Date.now()+n:e.wait}}case"REC_COOLDOWN":{const{wait:n}=t,i=n?Date.now()+n:null;return{...e,wait:i,coolDown:null}}case"SET_MOBILE":{const{mobile:n}=t;return{...e,isOnMobile:n}}case"s/REC_ME":case"s/LOGIN":{const{id:n,name:i,mailreg:r,blockDm:o,priv:a,userlvl:s,flag:l,createdAt:c}=t,d=t.messages?t.messages:[];return{...e,id:n,name:i,messages:d,mailreg:r,blockDm:o,priv:a,userlvl:s,flag:l,createdAt:c}}case"s/LOGOUT":return{...e,id:null,name:null,messages:[],mailreg:!1,blockDm:!1,priv:!1,flag:null,createdAt:null,userlvl:0};case"s/SET_NAME":{const{name:n}=t;return{...e,name:n}}case"s/SET_BLOCKING_DM":{const{blockDm:n}=t;return{...e,blockDm:n}}case"s/SET_PRIVATE":{const{priv:n}=t;return{...e,priv:n}}case"SET_NOTIFICATION":return{...e,notification:t.notification};case"UNSET_NOTIFICATION":return{...e,notification:null};case"s/REM_FROM_MESSAGES":{const{message:n}=t,i=[...e.messages],r=i.indexOf(n);return r>-1&&i.splice(r),{...e,messages:i}}case"s/SET_MAILREG":{const{mailreg:n}=t;return{...e,mailreg:n}}default:return e}},canvas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HISTORICAL_TIME":{const{date:n,time:i}=t;return k({...e,historicalDate:n,historicalTime:i})}case"s/TGL_HISTORICAL_VIEW":return e.is3D||e.canvasEndDate?e:k({...e,isHistoricalView:!e.isHistoricalView});case"UPDATE_VIEW":{const{view:n}=t;return{...e,view:[...n]}}case"RELOAD_URL":{const{canvases:t}=e,n=E(t);if(!n)return e;if(n.canvasId!==e.canvasId){const{canvasId:i}=n,r=S(t[i],e.prevCanvasState[i]);return{...e,...r,...n}}return{...e,...n}}case"SELECT_COLOR":return{...e,selectedColor:t.color};case"SET_HOVER":{const{hover:n}=t;return{...e,hover:n}}case"UNSET_HOVER":return{...e,hover:null};case"s/SELECT_CANVAS":{let{canvasId:n}=t;const{canvases:i,prevCanvasState:r,canvasId:o}=e;let a=i[n];a||(n=c.V8,a=i[c.V8]);const s=S(a,r[n]);return k({...e,...s,canvasId:n,isHistoricalView:!e.canvasEndDate&&e.isHistoricalView,prevCanvasState:{...e.prevCanvasState,[o]:{view:e.view,selectedColor:e.selectedColor}}})}case"s/REC_ME":{const{canvases:n}=t;let{canvasId:i,view:r}=e;null===i&&({canvasId:i,view:r}=E(n));const o=S(n[i],e.prevCanvasState[i]);return k({...e,...o,canvasId:i,canvases:n,view:r})}default:return e}},chat:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"s/REC_ME":case"s/LOGIN":{const n={},i=t.channels,r=Object.keys(i);for(let e=0;e<r.length;e+=1){const t=r[e];n[Number(t)]=i[t]}return{...e,channels:n,blocked:t.blocked}}case"s/LOGOUT":{const t={...e.channels},n={...e.messages},i=Object.keys(t);for(let e=0;e<i.length;e+=1){const r=i[e];0!==t[r][1]&&(delete n[r],delete t[r])}return{...e,channels:t,blocked:[],messages:n}}case"s/BLOCK_USER":{const{userId:n,userName:i}=t,r=[...e.blocked,[n,i]],o={...e.channels},a=Object.keys(o);for(let t=0;t<a.length;t+=1){const i=a[t];if(1===o[i][1]&&o[i][3]===n)return delete o[i],{...e,channels:o,blocked:r}}return{...e,blocked:r}}case"s/UNBLOCK_USER":{const{userId:n}=t,i=e.blocked.filter((e=>e[0]!==n));return{...e,blocked:i}}case"s/ADD_CHAT_CHANNEL":{const{channel:n}=t,i=Number(Object.keys(n)[0]);return e.channels[i]?e:{...e,channels:{...e.channels,...n}}}case"s/REMOVE_CHAT_CHANNEL":{const{cid:n}=t;if(!e.channels[n])return e;const i={...e.channels},r={...e.messages};return delete r[n],delete i[n],{...e,channels:i,messages:r}}case"s/REC_CHAT_MESSAGE":{const{name:n,text:i,country:r,channel:o,user:a}=t;if(!e.messages[o]||!e.channels[o])return e;const s=Math.round(Date.now()/1e3);N+=1;const l={...e.messages,[o]:[...e.messages[o],[n,i,r,a,s,N]]};l[o].length>c.FQ&&l[o].splice(0,2);const d=[...e.channels[o]];return d[2]=Date.now(),{...e,channels:{...e.channels,[o]:d},messages:l}}case"s/REC_CHAT_HISTORY":{const{cid:n,history:i}=t;for(let e=0;e<i.length;e+=1)N+=1,i[e].push(N);return{...e,messages:{...e.messages,[n]:i}}}default:return e}},fetching:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"s/SET_CHAT_FETCHING":{const{fetching:n}=t;return{...e,fetchingChat:n}}case"SET_API_FETCHING":{const{fetching:n}=t;return{...e,fetchingApi:n}}case"REQ_BIG_CHUNK":{const{fetchingChunks:t}=e;return{...e,fetchingChunks:t+1}}case"REC_BIG_CHUNK":case"REC_BIG_CHUNK_FAILURE":{const{fetchingChunks:t}=e;return{...e,fetchingChunks:t-1}}case"SET_PXLS_FETCHING":{const{fetching:n}=t;return{...e,fetchingPixel:n}}default:return e}}};function L(e){let t=Math.floor(99999*Math.random())+1;for(;e.args[t];)t+=1;return t}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=window.innerWidth,r=window.innerHeight;n&&(i=Math.floor(.7*i),r=Math.floor(Math.min(.8*r,900)));const o=e||i,a=t||r;return[(0,b.qE)(o,70,i),(0,b.qE)(a,50,r)]}function P(e,t,n,i){const r=e||0===e?e:Math.floor((window.innerWidth-n)/2),o=t||0===t?t:Math.floor((window.innerHeight-i)/2);return[(0,b.qE)(r,70-n,window.innerWidth-70),(0,b.qE)(o,0,window.innerHeight-30)]}function $(e){const{innerWidth:t,innerHeight:n}=window,{windows:i,positions:r}=e,o=t-70,a=n-30;let s=!1;const l={};for(let e=0;e<i.length;e+=1){const c=i[e].windowId,{xPos:d,yPos:u,width:h,height:f}=r[c],p=70-h;d>o||u>a||d<p||u<0||t>h||n>f?(s=!0,l[c]={xPos:(0,b.qE)(d,p,o),yPos:(0,b.qE)(u,0,a),width:Math.min(h,t-30),height:Math.min(f,n-30),z:r[c].z}):l[c]=r[c]}return s?{...e,positions:l}:e}function R(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.zMax>=50||t){const t={...e.positions},n=Object.keys(t),i=n.map((e=>t[e].z)).sort(((e,t)=>!t||e&&e>=t));for(let e=0;e<n.length;e+=1){const r=n[e];t[r]={...t[r],z:i.indexOf(t[r].z)}}e.zMax=i.length-1,e.positions=t}return e}const D={showWindows:window.innerWidth>604,zMax:0,windows:[],positions:{},args:{}},M={open:!1,alertType:null,title:null,message:null,btn:null},z=window.AudioContext||window.webkitAudioContext,H=z&&new z;function G(e){const t=new ArrayBuffer(2),n=new DataView(t);return n.setInt8(0,160),n.setInt8(1,Number(e)),t}var V=n(3146),W=n(3271);const U=new class{store=null;pixelTransferController=null;ws=null;getRenderer;constructor(){console.log("Creating WebSocketClient"),this.channelId=0,this.readyState=WebSocket.CLOSED,this.msgQueue=[],this.reqQueue=[],this.checkHealth=this.checkHealth.bind(this),setInterval(this.checkHealth,2e3)}initialize(e,t,n){return this.store=e,t&&(this.pixelTransferController=t),n&&(this.getRenderer=n),this.connect()}connect(){this.readyState=WebSocket.CONNECTING,this.ws&&console.log("WebSocket already open, not starting"),this.timeLastConnecting=Date.now();const e=`${"https:"===window.location.protocol?"wss:":"ws:"}//${W.ZY||window.location.host}/ws`;this.ws=new WebSocket(e),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=e=>{console.error("Socket encountered error, closing socket",e)}}checkHealth(){if(this.readyState===WebSocket.OPEN){const e=Date.now();e-3e4>this.timeLastPing&&(console.log("Server is silent, killing websocket"),this.readyState=WebSocket.CLOSING,this.ws.close()),e-23e3>this.timeLastSent&&(this.send(new Uint8Array([176]).buffer),this.timeLastSent=e)}}sendWhenReady(e){this.timeLastSent=Date.now(),this.readyState===WebSocket.OPEN?this.ws.send(e):(console.log("Tried sending message when websocket was closed!"),this.msgQueue.push(e))}send(e){this.readyState===WebSocket.OPEN&&this.ws.send(e)}processMsgQueue(){for(;this.msgQueue.length>0;)this.sendWhenReady(this.msgQueue.shift())}onOpen(){const e=Date.now();this.timeLastPing=e,this.timeLastSent=e,this.store.dispatch((0,V.cB)()),this.readyState=WebSocket.OPEN,this.send(G(this.store.getState().canvas.canvasId));const t=this.getRenderer?.().recChunkIds;t?.length&&(console.log(`Register ${t.length} chunks`),this.send(function(e){const t=new ArrayBuffer(2+2*e.length),n=new Uint16Array(t);n[0]=163;for(let t=0;t<e.length;t+=1)n[t+1]=e[t];return t}(t))),this.processMsgQueue()}setCanvas(e){null!==e&&(console.log(`Notify websocket server that we changed canvas to ${e}`),this.send(G(e)))}registerChunk(e){const t=function(e){const t=new ArrayBuffer(3),n=new DataView(t);return n.setInt8(0,161),n.setInt16(1,e),t}(e);this.readyState===WebSocket.OPEN&&this.send(t)}deRegisterChunks(e){const t=function(e){const t=new ArrayBuffer(2+2*e.length),n=new Uint16Array(t);n[0]=164;for(let t=0;t<e.length;t+=1)n[t+1]=e[t];return t}(e);this.readyState===WebSocket.OPEN&&this.send(t)}sendCaptchaSolution(e,t){return new Promise(((n,i)=>{let r;const o=["cs",e=>{n(e),clearTimeout(r)}];this.reqQueue.push(o),r=setTimeout((()=>{const e=this.reqQueue.indexOf(o);~e&&this.reqQueue.splice(e,1),i(new Error("Timeout"))}),2e4),this.sendWhenReady(`cs,${JSON.stringify([e,t])}`)}))}sendPixelUpdate(e,t,n){return new Promise(((i,r)=>{let o;const a=["pu",e=>{i(e),clearTimeout(o)}];this.reqQueue.push(a),o=setTimeout((()=>{const e=this.reqQueue.indexOf(a);~e&&this.reqQueue.splice(e,1),r(new Error("Timeout"))}),2e4),this.sendWhenReady(function(e,t,n){const i=new ArrayBuffer(3+4*n.length),r=new DataView(i);r.setUint8(0,193),r.setUint8(1,e),r.setUint8(2,t);let o=2,a=n.length;for(;a;){a-=1;const[e,t]=n[a];r.setUint8(o+=1,e>>>16),r.setUint16(o+=1,65535&e),r.setUint8(o+=2,t)}return i}(e,t,n))}))}sendChatMessage(e,t){this.sendWhenReady(`cm,${JSON.stringify([e,t])}`)}onMessage(e){let{data:t}=e;try{"string"==typeof t?this.onTextMessage(t):this.onBinaryMessage(t)}catch(e){console.log(`An error occurred while parsing websocket message ${t}`,e)}}onTextMessage(e){const t=e.indexOf(",");if(-1===t)return;const n=e.slice(0,t),i=JSON.parse(e.slice(t+1));switch(n){case"cm":this.store.dispatch((0,V.jm)(...i));break;case"ac":this.store.dispatch((0,V.V4)(i));break;case"rc":this.store.dispatch((0,V.kE)(i))}}onBinaryMessage(e){if(0===e.byteLength)return;const t=new DataView(e),n=t.getUint8(0);switch(this.timeLastPing=Date.now(),n){case 193:this.pixelTransferController&&this.pixelTransferController.receivePixelUpdate(function(e){const t=e.getUint8(1),n=e.getUint8(2),i=[];let r=e.byteLength;for(;r>3;){const t=e.getUint8(r-=1),n=e.getUint16(r-=2),o=e.getUint8(r-=1)<<16;i.push([o|n,t])}return{i:t,j:n,pixels:i}}(t));break;case 195:{const e=this.reqQueue.findIndex((e=>"pu"===e[0]));~e&&this.reqQueue.splice(e,1)[0][1](function(e){return{retCode:e.getUint8(1),wait:e.getUint32(2),coolDownSeconds:e.getInt16(6),pxlCnt:e.getUint8(8),rankedPxlCnt:e.getUint8(9)}}(t));break}case 167:this.store.dispatch((0,V.Zq)(function(e){const t={};t.total=e.getUint16(1);let n=e.byteLength;for(;n>3;){const i=e.getUint16(n-=2);t[e.getUint8(n-=1)]=i}return t}(t)));break;case 194:this.store.dispatch((0,V.DI)(function(e){return e.getUint32(1)}(t)));break;case 166:console.log("Websocket requested api/me reload"),this.store.dispatch((0,d.Ni)()),this.reconnect();break;case 198:{const e=this.reqQueue.findIndex((e=>"cs"===e[0]));~e&&this.reqQueue.splice(e,1)[0][1](function(e){return e.getUint8(1)}(t));break}default:console.error(`Unknown op_code ${n} received`)}}onClose(e){this.store.dispatch((0,V.m_)()),this.ws=null,this.readyState=WebSocket.CONNECTING;const t=this.timeLastConnecting<Date.now()-7e3?1e3:5e3;console.warn(`Socket is closed. Reconnect will be attempted in ${t} ms.`,e.reason),setTimeout((()=>this.connect()),t)}reconnect(){this.readyState===WebSocket.OPEN&&(this.readyState=WebSocket.CLOSING,console.log("Restarting WebSocket"),this.ws.onclose=null,this.ws.onmessage=null,this.ws.close(),this.ws=null,this.connect())}};var F=n(6085);class B{type;static db;constructor(e){this.type=e}async initialize(){return await B.openDB(),this}static openDB(){return B.db?B.db:new Promise(((e,t)=>{const n=window.indexedDB.open("ppfun_files",1);n.onsuccess=t=>{const n=t.target.result;n.onerror=e=>{console.error("indexedDB error:",e.target.error)},B.db=n,e(n)},n.onupgradeneeded=e=>{const t=e.target.result.createObjectStore("files",{autoIncrement:!0});t.createIndex("type","type",{unique:!1}),t.createIndex("mimetype","mimetype",{unique:!1})},n.onerror=()=>{console.error("Error on opening indexedDB:",n.error),t(n.error)}}))}async saveFile(e){const{db:t}=B;if(!t)return null;const n=Array.isArray(e)?e:[e],i=await Promise.all(n.map((e=>e.arrayBuffer())));return new Promise(((r,o)=>{const a=[],s=t.transaction("files","readwrite");s.oncomplete=()=>{r(Array.isArray(e)?a:a[0])},s.onabort=e=>{e.stopPropagation(),o(e.target.error)};const l=s.objectStore("files");n.forEach(((e,t)=>{a.push(null),l.add({type:this.type,mimetype:e.type,buffer:i[t]}).onsuccess=e=>{a[t]=e.target.result}}))}))}async updateFile(e,t){const{db:n}=B;if(!n)return null;const i=await t.arrayBuffer();return new Promise(((r,o)=>{const a=n.transaction("files","readwrite");a.onabort=e=>{e.stopPropagation(),o(e.target.error)},a.objectStore("files").put({type:this.type,mimetpe:t.type,buffer:i},e).onsuccess=e=>r(e.target.result)}))}loadFile(e){const{db:t}=B;if(!t)return null;const n=Array.isArray(e)?e:[e];return new Promise(((i,r)=>{const o=[],a=t.transaction("files","readonly");a.oncomplete=()=>{i(Array.isArray(e)?o:o[0])},a.onabort=e=>{e.stopPropagation(),r(e.target.error)};const s=a.objectStore("files");n.forEach(((e,t)=>{o.push(null),s.get(e).onsuccess=e=>{o[t]=e.target.result}}))}))}deleteFile(e){const{db:t}=B;if(!t)return null;const n=Array.isArray(e)?e:[e];return new Promise(((e,i)=>{const r=t.transaction("files","readwrite");r.oncomplete=()=>{e()},r.onabort=e=>{e.stopPropagation(),i(e.target.error)};const o=r.objectStore("files");n.forEach((e=>{o.delete(e)}))}))}getAllKeys(){const{db:e}=B;return e?new Promise(((t,n)=>{const i=e.transaction("files","readonly");i.objectStore("files").index("type").getAllKeys(this.type).onsuccess=e=>{t(e.target.result)},i.onabort=e=>{e.stopPropagation(),n(e.target.error)}})):null}async sync(e){const t=await this.getAllKeys(),n=t.filter((t=>!e.includes(t)));n.length&&(console.log("Templaes: Keys in db but not in store",n),await this.deleteFile(n));const i=e.filter((e=>!t.includes(e)));return i.length&&console.log("Templates: Keys in store but not in db",i),i}}const K=B;var Y=n(4423);const j=class{image;id;width;height;ready=!1;#e;constructor(e){this.id=e}get imageSmall(){if(!this.#e){const e=this.image.getContext("2d").getImageData(0,0,this.width,this.height),t=document.createElement("canvas");t.width=3*this.width,t.height=3*this.height;const n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height);let r=0,o=4*i.width+4;for(;r<e.data.length;){for(let t=0;t<e.width;t+=1)i.data[o]=e.data[r],i.data[++o]=e.data[++r],i.data[++o]=e.data[++r],i.data[++o]=e.data[++r],o+=9,r+=1;o+=4*i.width*2}n.putImageData(i,0,0),this.#e=t}return this.#e}async arrayBuffer(){return(0,Y.SJ)(this.image)}setDimensionFromCanvas(){const{width:e,height:t}=this.image;return this.width=e,this.height=t,this.read=!0,[e,t]}fromImage(e){return this.image=(0,Y.Pe)(e),this.setDimensionFromCanvas()}async fromFile(e){return this.image=await(0,Y.YU)(e),this.setDimensionFromCanvas()}async fromBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return this.image=await(0,Y.Ic)(e,t),this.setDimensionFromCanvas()}},q=new class{#t;#n=new K("templates");#i=new Map;ready=!1;async initialize(e){try{this.#t=e,await this.#n.initialize(),this.ready=!0,this.#t.dispatch({type:"TEMPLATES_READY"}),await this.syncDB()}catch(e){console.warn(`Couldn't initialize Templates: ${e.message}`)}}async getTemplate(e){if(!this.ready)return null;let t=this.#i.get(e);return t?t.image:(t=await this.loadExistingTemplate(e),t?t.image:null)}getTemplateSync(e){if(!this.ready)return null;const t=this.#i.get(e);return t?t.image:(this.loadExistingTemplate(e),null)}getSmallTemplateSync(e){if(!this.ready)return null;const t=this.#i.get(e);return t?t.imageSmall:(this.loadExistingTemplate(e),null)}getColorOfPixel(e,t,n){const i=this.#t.getState().templates.list.filter((i=>i.enabled&&i.canvasId===e&&i.x<=t&&i.y<=n&&i.x+i.width>t&&i.y+i.height>n));for(const e of i){const i=this.getTemplateSync(e.imageId);if(!i)continue;const r=i.getContext("2d").getImageData(t-e.x,n-e.y,1,1).data;if(r[3]>200)return[r[0],r[1],r[2]]}return null}getTemplatesInView(e,t,n,i,r){const o=t-i,a=n-r,s=t+i,l=n+r;return this.#t.getState().templates.list.filter((t=>t.enabled&&t.canvasId===e&&t.x<=s&&t.y<=l&&t.x+t.width>o&&t.y+t.height>a))}async syncDB(){try{const{list:e}=this.#t.getState().templates,t=e.map((e=>e.imageId)),n=await this.#n.sync(t);e.filter((e=>n.includes(e.imageId))).forEach((e=>{this.#t.dispatch(s(e.title))}))}catch(e){console.error(`Error on syncing templates store and indexedDB: ${e.message}`)}}async loadAllMissing(){const{templates:e}=this.#t.getState(),t=e.list.map((e=>e.imageId)).filter((e=>!this.#i.has(e)));for(const e of t)await this.loadExistingTemplate(e)}async loadExistingTemplate(e){try{const t=await this.#n.loadFile(e);if(!t)throw new Error("File does not exist in indexedDB");const{mimetype:n,buffer:i}=t,r=new j(e);return await r.fromBuffer(i,n),this.#i.set(e,r),this.#t.dispatch({type:"REC_TEMPLATE"}),r}catch(t){return console.error(`Error loading template ${e}: ${t.message}`),null}}async addFile(e,t,n,i,r){try{const o=await this.#n.saveFile(e),s=new j(o),l=await s.fromFile(e);this.#i.set(o,s),this.#t.dispatch(a(o,t,n,i,r,...l))}catch(e){console.error(`Error saving template ${t}: ${e.message}`)}}async updateFile(e,t){try{await this.#n.updateFile(e,t);const n=new j(e),i=await n.fromFile(t);this.#i.set(e,n),this.#t.dispatch(function(e,t,n){return{type:"s/UPD_TEMPLATE_IMG",imageId:e,width:t,height:n}}(e,...i))}catch(t){console.error(`Error updating file ${e}: ${t.message}`)}}changeTemplate(e,t){this.#t.dispatch(l(e,t))}deleteTemplate(e){const{list:t}=this.#t.getState().templates,n=t.find((t=>t.title===e));if(!n)return;const{imageId:i}=n;this.#t.dispatch(s(e)),this.#n.deleteFile(i),this.#i.delete(i)}async exportEnabledTemplates(){const{list:e}=this.#t.getState().templates,t=e.filter((e=>e.enabled));if(!t.length||t.length>20)return this.#t.dispatch((0,o.Jz)("Hata :(","20'den fazla dışa aktarılamaz veya şablon yok!","error")),null;const n=await this.#n.loadFile(t.map((e=>e.imageId))),i=[];for(let e=0;e<t.length;e+=1){const{buffer:r,mimetype:o}=n[e];i.push({...t[e],buffer:await(0,b.dS)(r),mimetype:o})}return i}async importTemplates(e){const t=JSON.parse(await e.text());if(!t.length||t.length>20)return void this.#t.dispatch((0,o.Jz)("Hata :(","20'den fazla içe aktarılamaz veya şablon yok!","error"));const n=await Promise.all(t.map((e=>(0,b.Vi)(e.buffer)))),i=[];for(let e=0;e<t.length;e+=1){const{mimetype:r}=t[e];i.push(new Blob([n[e]],{type:r}))}const{list:r}=this.#t.getState().templates,s=await this.#n.saveFile(i),l=[];for(let e=0;e<t.length;e+=1){const{x:n,y:i,width:o,height:c,canvasId:d,title:u}=t[e],h=s[e],f=r.find((e=>e.title===u));f?(l.push(f.imageId),this.changeTemplate(u,{imageId:h,title:u,canvasId:d,x:n,y:i,width:o,height:c})):this.#t.dispatch(a(h,u,d,n,i,o,c))}l.length&&this.#n.deleteFile(l)}};window.templateLoader=q;const X=q,Z=1.2;function Q(e,t,n,i,r){const{width:o,height:a}=t,s=t.getContext("2d");if(!s)return;s.globalAlpha=.5,s.fillStyle=r?"#DDDDDD":"#222222";let[l,c]=(0,b.UT)(n,i,t,[0,0]),[d,u]=(0,b.UK)(n,i,t,[l,c]);for(;d<o;d+=i){const e=l++%10==0?2:1;s.fillRect(d,0,e,a)}for(;u<a;u+=i){const e=c++%10==0?2:1;s.fillRect(0,u,o,e)}s.globalAlpha=1}var J=n(3503);class ee{store;renderer;viewport;clickTapStartView=[0,0];clickTapStartTime=0;tapStartDist=50;clickTapStartCoords=[0,0];speedScalar=0;isClicking=!1;isMultiTap=!1;wasEverMultiTap=!1;isTapPainting=!1;tapTimeout=null;prevTime=Date.now();coolDownDelta=!1;constructor(e,t,n){this.store=n,this.renderer=e,this.viewport=t,this.onMouseDown=this.onMouseDown.bind(this),this.onAuxClick=this.onAuxClick.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onWheel=this.onWheel.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),t.addEventListener("auxclick",this.onAuxClick,!1),t.addEventListener("mousedown",this.onMouseDown,!1),t.addEventListener("mousemove",this.onMouseMove,!1),t.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("wheel",this.onWheel,!1),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("mouseout",this.onMouseOut,!1),t.addEventListener("touchcancel",this.onMouseOut,!1)}dispose(){}gotCoolDownDelta(e){this.coolDownDelta=!0,setTimeout((()=>{this.coolDownDelta=!1}),1e3*e)}onMouseDown(e){if(e.preventDefault(),document.activeElement.blur(),0===e.button){this.renderer.cancelStoreViewInState(),this.isClicking=!0;const{clientX:t,clientY:n}=e;this.clickTapStartTime=Date.now(),this.clickTapStartCoords=[t,n],this.clickTapStartView=this.renderer.view;const{viewport:i}=this;setTimeout((()=>{this.isClicking&&(i.style.cursor="move")}),300)}}onMouseUp(e){e.preventDefault();const{store:t,renderer:n}=this;if(0===e.button){this.isClicking=!1;const{clientX:i,clientY:r}=e,{clickTapStartCoords:o,clickTapStartTime:a}=this,s=[o[0]-i,o[1]-r].map(Math.abs);a>Date.now()-250&&s[0]<6&&s[1]<6&&ee.placePixel(t,n,this.screenToWorld([i,r])),this.viewport.style.cursor="auto"}n.storeViewInState()}static getTouchCenter(e){let t=0,n=0;for(const{pageX:i,pageY:r}of e.touches)t+=i,n+=r;const{length:i}=e.touches;return[t/i,n/i]}static placePixel(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=e.getState();if(r.canvas.isHistoricalView)return;const o=i??ee.getWantedColor(r,t,n);if(null===o)return;const{viewscale:a}=t;if(r.gui.autoZoomIn&&a<8)return void t.updateView([n[0],n[1],12]);if(a<3)return;const s=t.getColorIndexOfPixel(...n);if(o===s)return;if(o<r.canvas.clrIgnore){const{palette:e}=r.canvas,{rgb:t}=e;let n=3*o;const i=t[n++],a=t[n++],l=t[n];if(e.getIndexOfColor(i,a,l)===s)return}const{canvasSize:l}=r.canvas,[c,d]=n;if(c>5275&&d>-8713&&c<5398&&d<-8614&&"0"===r.canvas.canvasId)return void(window.location.href="https://files.catbox.moe/gh2wtr.mp4");const u=l/2;if(c<-u||c>=u||d<-u||d>=u)return;const[h,f]=(0,b.J$)(l,c,d),p=(0,b.Bd)(l,c,d);J.A.tryPlacePixel(h,f,p,o,s)}static getMultiTouchDistance(e){if(e.touches.length<2)return 1;const t=e.touches[0],n=e.touches[1];return Math.sqrt((n.pageX-t.pageX)**2+(n.pageY-t.pageY)**2)}onTouchStart(e){e.preventDefault(),document.activeElement.blur(),this.renderer.cancelStoreViewInState(),this.clearTabTimeout(),this.isTapPainting=!1,this.clickTapStartTime=Date.now(),this.clickTapStartCoords=(0,b.EC)(e),this.clickTapStartView=this.renderer.view,e.touches.length>1?(this.tapStartDist=ee.getMultiTouchDistance(e),this.isMultiTap=!0,this.wasEverMultiTap=!0):(this.isMultiTap=!1,this.wasEverMultiTap=!1,this.store.getState().gui.holdPaint?this.tapTimeout=setTimeout((()=>{this.isTapPainting=!0,ee.placePixel(this.store,this.renderer,this.screenToWorld(this.clickTapStartCoords))}),200):this.tapTimeout=setTimeout((()=>{this.selectColorFromScreen(this.clickTapStartCoords)}),600))}onTouchEnd(e){if(e.preventDefault(),e.touches.length)return;const{store:t,renderer:n}=this;if(!this.wasEverMultiTap){const[n,i]=(0,b.EC)(e),{clickTapStartCoords:r,clickTapStartTime:a}=this,s=[r[0]-n,r[1]-i].map(Math.abs);a>Date.now()-580&&s[0]<6&&s[1]<6&&(ee.placePixel(t,this.renderer,this.screenToWorld([n,i])),setTimeout((()=>{t.dispatch((0,o.WM)())}),500))}n.storeViewInState(),this.clearTabTimeout()}onTouchMove(e){e.preventDefault(),e.stopPropagation();const t=e.touches.length>1,n=this.store.getState(),[i,r]=(0,b.EC)(e);if(this.isMultiTap!==t)return this.wasEverMultiTap=!0,this.isMultiTap=t,this.clickTapStartCoords=[i,r],this.clickTapStartView=this.renderer.view,void(this.tapStartDist=ee.getMultiTouchDistance(e));const{clickTapStartView:o,clickTapStartCoords:a}=this;if(t){this.clearTabTimeout();const t=e.touches[0],n=e.touches[1],i=Math.sqrt((n.pageX-t.pageX)**2+(n.pageY-t.pageY)**2)/this.tapStartDist,[r,a]=this.renderer.view;this.renderer.updateView([r,a,o[2]*i])}if(!n.gui.holdPaint||t){const[e,t]=o,n=i-a[0],s=r-a[1];(n>5||s>5)&&this.clearTabTimeout();const{viewscale:l}=this.renderer;this.renderer.updateView([e-n/l,t-s/l])}else this.wasEverMultiTap||this.coolDownDelta||(this.isTapPainting?ee.placePixel(this.store,this.renderer,this.screenToWorld([i,r])):(this.clickTapStartCoords=[i,r],this.clickTapStartView=this.renderer.view,this.tapStartDist=ee.getMultiTouchDistance(e)))}clearTabTimeout(){this.tapTimeout&&(clearTimeout(this.tapTimeout),this.tapTimeout=null)}zoom(e,t){const[n,i,r]=this.renderer.view,o=r>=1?1.1:1.04,a=e>0?r*o:r/o;this.renderer.updateView([n,i,a],t),this.renderer.storeViewInState()}step(e){const[t,n,i]=this.renderer.view,[r,o]=e.map((e=>100*e/i));this.renderer.updateView([t+r,n+o]),this.renderer.storeViewInState()}holdPaintStarted(e){if(!e)return;const{hover:t}=this.store.getState().canvas;t&&ee.placePixel(this.store,this.renderer,t)}onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement.blur();const{deltaY:t}=e,{store:n}=this,{hover:i}=n.getState().canvas,r=i||null;t<0&&this.zoom(1,r),t>0&&this.zoom(-1,r)}static getWantedColor(e,t,n){if(e.gui.holdPaint===c.h7.HISTORY)return t.getColorIndexOfPixel(...n,!0);if(e.gui.holdPaint===c.h7.OVERLAY){const{canvasId:t}=e.canvas,i=X.getColorOfPixel(t,...n);return i?e.canvas.palette.getClosestIndexOfColor(...i):null}return e.canvas.selectedColor}screenToWorld(e){return(0,b.UT)(this.renderer.view,this.renderer.viewscale,this.viewport,e)}setHoverFromScrrenCoor(e){const{store:t}=this,n=t.getState(),{hover:i}=n.canvas,r=this.screenToWorld(e),[a,s]=r,{canvasSize:l}=n.canvas,c=l/2;return a<-c||a>=c||s<-c||s>=c?(i&&t.dispatch((0,o.WM)()),null):i&&i[0]===a&&i[1]===s?null:(t.dispatch((0,o.f_)(r)),r)}onMouseMove(e){e.preventDefault();const{clientX:t,clientY:n}=e,{renderer:i,isClicking:r}=this,{viewscale:o}=i;if(r){if(Date.now()<this.clickTapStartTime+100)return;const{clickTapStartView:e,clickTapStartCoords:i}=this,[r,a]=e,s=t-i[0],l=n-i[1];this.renderer.updateView([r-s/o,a-l/o])}else{const e=this.setHoverFromScrrenCoor([t,n]);if(!e)return;const i=this.store.getState();!this.coolDownDelta&&i.gui.holdPaint&&ee.placePixel(this.store,this.renderer,e)}}onMouseOut(){const{store:e,viewport:t}=this;t.style.cursor="auto",e.dispatch((0,o.WM)()),this.isClicking=!1,this.clearTabTimeout()}selectColorFromScreen(e){const{renderer:t,store:n}=this;if(this.renderer.viewscale<3)return;const i=this.screenToWorld(e),r=t.getColorIndexOfPixel(...i);null!==r&&n.dispatch((0,o.sD)(r))}onAuxClick(e){const{which:t,clientX:n,clientY:i}=e;2===t&&(e.preventDefault(),this.selectColorFromScreen([n,i]))}update(){let e=Date.now();const{moveU:t,moveV:n,moveW:i}=this.store.getState().gui;if(!(t||n||i))return this.prevTime=e,this.speedScalar=0,!1;e-=this.prevTime,this.prevTime+=e,this.speedScalar=Math.min(1,this.speedScalar+.025);const[r,o,a]=this.renderer.view,s=.4*e/a*this.speedScalar;let l=a>=1?1.0005:1.0003;return l**=i*this.speedScalar,this.renderer.updateView([r+s*t,o+s*n,a*l**e]),!0}}const te=ee;var ne=n(538),ie=n(4369);class re extends ie.A{image;ready;isEmpty;palette;constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0),this.palette=e,this.image=document.createElement("canvas"),this.image.getContext("2d"),this.image.width=c.dn,this.image.height=c.dn,this.ready=!1,this.isEmpty=!1}fromBuffer(e){this.recUpdates=!0;const t=new ImageData(c.dn,c.dn),n=new Uint32Array(t.data.buffer),{abgr:i}=this.palette;let r=e.byteLength;for(let t=0;t<r;t+=1)n[t]=i[63&e[t]];const o=c.dn**2,a=this.palette.abgr[0];for(;r<o;)n[r]=a,r+=1;this.image.getContext("2d").putImageData(t,0,0),this.ready=!0}preLoad(e,t,n,i){if(this.ready)return;this.ready=!0;const r=this.image.getContext("2d");r.save(),r.msImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,r.scale(t,t);const o=c.dn/t;r.drawImage(e,n,i,o,o,0,0,o,o),r.restore()}fromImage(e){this.ready=!0,this.image.getContext("2d").drawImage(e,0,0)}empty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.ready=!0,this.isEmpty=!0,!e){const{image:e,palette:t}=this,n=e.getContext("2d");n.fillStyle=t.colors[0],n.fillRect(0,0,c.dn,c.dn)}}static getIndexFromCell(e){let[t,n]=e;return t+c.dn*n}getColorIndex(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,i]=e,r=this.image.getContext("2d").getImageData(n,i,1,1).data;return t||0!==r[3]?t?this.palette.getClosestIndexOfColor(r[0],r[1],r[2]):this.palette.getIndexOfColor(r[0],r[1],r[2]):null}hasColorIn(e,t){const n=re.getIndexFromCell(e),i=this.image.getContext("2d").getImageData(0,0,c.dn,c.dn);return new Uint32Array(i.data.buffer)[n]===this.palette.abgr[t]}setColor(e,t){const[n,i]=e,r=this.image.getContext("2d");return r.fillStyle=this.palette.colors[t],r.fillRect(n,i,1,1),!0}}const oe=re,ae=/^([\w]+:)?\/\//;function se(e){return new Promise(((t,n)=>{const i=new Image;i.addEventListener("load",(()=>t(i))),i.addEventListener("error",(()=>{n(new Error(`Failed to load image's URL: ${e}`))})),function(e){return ae&&e.replace(ae,"").indexOf(window.location.host)}(e)&&(i.crossOrigin="anonymous"),i.src=e}))}const le=new class{tiles;constructor(){this.tiles={},this.loadLoadingTile(0)}getTile(e){return void 0===this.tiles[e]&&this.loadLoadingTile(e),this.tiles[e]||this.tiles[0]||null}async loadLoadingTile(e){null!==this.tiles[e]&&(this.tiles[e]=null,this.tiles[e]=await se(`./loading${e}.png`))}};class ce extends ne.A{canvasMaxTiledZoom;historicalMaxTiledZooms;palette;canvasSize;constructor(e,t,n,i,r){super(e,t),this.palette=n,this.canvasSize=i,this.canvasMaxTiledZoom=(0,b.YQ)(i),this.historicalMaxTiledZooms=r?r.map((e=>{const[t,n]=e;return[t,(0,b.YQ)(n)]})):[]}getPixelUpdate(e,t,n,i){const r=this.cget(`${this.canvasMaxTiledZoom}:${e}:${t}`);if(r){const e=n%c.dn,t=Math.floor(n/c.dn);r.setColor([e,t],i)}}getColorIndexOfPixel(e,t){const{canvasSize:n}=this,[i,r]=(0,b.J$)(n,e,t),o=`${this.canvasMaxTiledZoom}:${i}:${r}`,a=this.cget(o);return a?a.getColorIndex((0,b._c)(n,[e,t])):null}getHistoricalIndexOfPixel(e,t,n,i,r){if(!n)return null;const[o,a]=(0,b.J$)(r,e,t),s=(0,b._c)(r,[e,t]),l=Date.now();if(i&&i&&"0000"!==i){const e=`${n}${i}:${o}:${a}`,t=this.cget(e);if(t){const e=t.getColorIndex(s,!1);if(t.timestamp=l,null!==e)return e}}const c=`${n}:${o}:${a}`,d=this.cget(c);return d?(d.timestamp=l,d.getColorIndex(s)):null}preLoadChunk(e,t,n,i){if(e<=0)return null;try{let r=e-1,o=c.GG,[a,s]=[t,n].map((e=>Math.floor(e/o))),l=this.getChunk(r,a,s,!1,!1,!0);if(l||(r>0&&(r-=1),o=c.GG**(e-r),[a,s]=[t,n].map((e=>Math.floor(e/o))),l=this.getChunk(r,a,s,!0,!1,!0)),l){const e=t%o*c.dn/o,r=n%o*c.dn/o;return i.preLoad(l,o,e,r),i.image}}catch(i){return console.warn(`Error occurred while preloading for ${e}:${t}:${n}`,i),null}return null}getChunk(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=`${e}:${t}:${n}`;let s=this.cget(a);if(s){if(s.ready)return s.image}else i&&(s=new oe(this.palette,e,t,n),this.cset(a,s),this.canvasMaxTiledZoom===e?this.fetchBaseChunk(t,n,s):this.fetchTile(e,t,n,s));if(o&&s){const i=this.preLoadChunk(e,t,n,s);if(i)return i}return r?le.getTile(this.canvasId):null}getHistoricalChunk(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=r?`${i}${r}`:i;o+=`:${e}:${t}`;const a=this.cget(o),{canvasId:s}=this;if(a)return a.ready?a.image:r?null:le.getTile(s);if(n){const n=(0,b.gQ)(i,this.canvasMaxTiledZoom,this.historicalMaxTiledZooms),a=new oe(this.palette,n,e,t);this.cset(o,a),this.fetchHistoricalChunk(e,t,i,r,a)}return r?null:le.getTile(s)}async fetchHistoricalChunk(e,t,n,i,r){const{canvasId:o}=this;let a=`${window.ssv.backupurl}/${n.slice(0,4)}/${n.slice(4,6)}/${n.slice(6)}/`;a+=i?`${o}/${i}/${e}/${t}.png`:`${o}/tiles/${e}/${t}.png`,this.bcReqChunk(r);try{const e=await se(a);r.fromImage(e),this.bcRecChunk(r)}catch(e){this.bcReqChunkFail(r,e),i?r.empty(!0):r.empty()}}async fetchBaseChunk(e,t,n){this.bcReqChunk(n);try{const i=`${W.b9}/chunks/${this.canvasId}/${e}/${t}.bmp`,r=await fetch(i);if(!r.ok)throw new Error("Network response was not ok.");{const e=await r.arrayBuffer();if(!e.byteLength)throw new Error("Chunk response was invalid");{const t=new Uint8Array(e);n.fromBuffer(t)}this.bcRecChunk(n)}}catch(e){n.empty(),n.recUpdates=!0,this.bcReqChunkFail(n,e)}}async fetchTile(e,t,n,i){this.bcReqChunk(i);try{const r=`/tiles/${this.canvasId}/${e}/${t}/${n}.webp`,o=await se(r);i.fromImage(o),this.bcRecChunk(i)}catch(e){i.empty(),this.bcReqChunkFail(i,e)}}}const de=ce;class ue{static NOTIFICATION_TIME=1100;scale;notifcircle;notificationRadius;pixelList;constructor(){this.pixelList=[],this.notificationRadius=150,this.notifcircle=document.createElement("canvas"),this.notifcircle.width=200,this.notifcircle.height=200;const e=this.notifcircle.getContext("2d");e&&(e.fillStyle="#FF000055",e.beginPath(),e.arc(100,100,100,0,2*Math.PI),e.closePath(),e.fill())}addPixel(e,t){this.pixelList.length<300&&this.pixelList.unshift([Date.now(),e,t])}doRender(){return 0!==this.pixelList.length}updateScale(e){this.scale=e,this.notificationRadius=(0,b.qE)(10*this.scale,20,400)}render(e,t,n,i){const r=t.getContext("2d");if(!r)return;const o=Date.now();let a=this.pixelList.length;for(;a>0;){a--;const[e,s,l]=this.pixelList[a],c=o-e;if(c>ue.NOTIFICATION_TIME){this.pixelList.pop();continue}const[d,u]=(0,b.UK)(n,i,t,[s,l]).map((e=>e+this.scale/2)),h=c/ue.NOTIFICATION_TIME*this.notificationRadius/100;r.save(),r.scale(h,h),r.drawImage(this.notifcircle,d/h-100,u/h-100),r.restore()}}}const he=new ue;class fe extends F.A{canvasId=null;viewscale=0;centerChunk=[null,null];tiledScale=0;tiledZoom=4;hover=!1;viewport=null;lastFetch=0;canvas;oldHistoricalTime=null;constructor(e){super(e),this.is3D=!1,this.canvasMaxTiledZoom=0,this.historicalCanvasMaxTiledZoom=0,this.scaleThreshold=1;const t=document.createElement("canvas");t.className="viewport";const n=t.getContext("2d",{alpha:!1});this.viewport=t;const i=document.createElement("canvas"),r=i.getContext("2d",{alpha:!1});this.canvas=i,this.onWindowResize(),r.fillStyle="#C4C4C4",r.fillRect(0,0,this.canvas.width,this.canvas.height),n.fillStyle="#C4C4C4",n.fillRect(0,0,this.viewport.width,this.viewport.height),document.body.appendChild(this.viewport),this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize),this.updateCanvasData(e.getState()),this.controls=new te(this,this.viewport,e)}destructor(){this.controls.dispose(),window.removeEventListener("resize",this.onWindowResize),this.viewport.remove(),super.destructor()}getViewport(){return this.viewport}onWindowResize(){this.viewport.width=window.innerWidth,this.viewport.height=window.innerHeight;const e=2*Math.ceil(window.screen.width/2)+c.GG*c.dn,t=2*Math.ceil(window.screen.height/2)+c.GG*c.dn;this.canvas.width===e&&this.canvas.height===t||(console.log(`Noticed screen: ${e} / ${t}`),this.canvas.width=e,this.canvas.height=t,this.scaleThreshold=Math.min(e/c.dn/3,t/c.dn/3)),this.forceNextRender=!0}updateCanvasData(e){const{canvasId:t}=e.canvas;if(t!==this.canvasId){if(this.canvasId=t,null!==t){const{palette:n,canvasSize:i,canvases:r}=e.canvas;this.canvasMaxTiledZoom=(0,b.YQ)(i),this.historicalCanvasMaxTiledZoom=this.canvasMaxTiledZoom,this.chunkLoader=new de(this.store,t,n,i,r[t].historicalSizes)}this._view[2]=0,this.updateView(e.canvas.view),this.forceNextRender=!0}}updateOldHistoricalTime(e,t){this.oldHistoricalTime="0000"===t?null:t}updateHistoricalTime(e,t,n){this.historicalCanvasMaxTiledZoom=(0,b.YQ)(n),this.forceNextRender=!0,this.updateView(this.store.getState().canvas.view)}getColorIndexOfPixel(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const n=this.store.getState(),{historicalDate:i,historicalTime:r,historicalCanvasSize:o}=n.canvas;return this.chunkLoader.getHistoricalIndexOfPixel(e,t,i,r,o)}return this.chunkLoader.getColorIndexOfPixel(e,t)}getPointedColor(){const{hover:e}=this.store.getState().canvas;return e?this.getColorIndexOfPixel(...e):null}updateView(e,t){let[n,i,r]=e;const o=this.store.getState(),{isHistoricalView:a}=o.canvas,s=a?o.canvas.historicalCanvasSize:o.canvas.canvasSize;if(r){const o=a?.7:c.dn/s;if(r=(0,b.qE)(e[2],o,c.sH),t){let e=this.viewscale;this.viewscale=r>.85&&r<1.2?1:r,e/=this.viewscale;const[o,a]=t;n=o+(n-o)*e,i=a+(i-a)*e}else this.viewscale=r}else[,,r]=this._view;const l=-s/2,d=s/2-1;n=(0,b.qE)(n,l,d),i=(0,b.qE)(i,l,d);const u=this.view[2];if(super.updateView([n,i,r]),u!==r){const{viewscale:e}=this;he.updateScale(e);let t=e>.5?0:Math.round(2*Math.log2(e)/c.GG);t=c.GG**t;const n=(a?this.historicalCanvasMaxTiledZoom:this.canvasMaxTiledZoom)+2*Math.log2(t)/c.GG,i=e/t;this.tiledScale=t,this.tiledZoom=n,this.relScale=i,e<this.scaleThreshold||u<this.scaleThreshold||o.templates.ovEnabled&&(u<=c.oj&&r>c.oj||u>c.oj&&r<=c.oj)?this.forceNextRender=!0:this.forceNextSubrender=!0}const h=this.centerChunk,f=(0,b.AY)(this.tiledScale,[n,i],s);h&&h[0]===f[0]&&h[1]===f[1]?this.forceNextSubrender=!0:(this.centerChunk=f,this.forceNextRender=!0)}renderPixel(e,t,n,i,r){const o=this.store.getState(),{canvasSize:a,palette:s,isHistoricalView:l}=o.canvas,d=this.viewscale;if(this.chunkLoader.getPixelUpdate(e,t,n,i),d<.8||l)return;const u=d>this.scaleThreshold?1:d,h=this.canvas.getContext("2d");if(!h)return;const[f,p]=(0,b.D3)(e,t,n,a),[m,v]=this.centerChunk.map((e=>(e+.5)*c.dn-a/2)),{width:g,height:y}=this.canvas,w=(f-m)*u+g/2,k=(p-v)*u+y/2;w<0||w>=g||k<0||k>=y||(h.fillStyle=s.colors[i],h.fillRect(w,k,u,u),r&&he.addPixel(f,p),this.forceNextSubrender=!0)}isChunkInView(e,t,n){const{tiledZoom:i}=this;if(e>i+1)return!1;let[r,o]=this.centerChunk,{relScale:a}=this;if(e!==i){const t=c.GG**(e-i);r=Math.floor(r*t),o=Math.floor(o*t),a*=t}const{width:s,height:l}=this.viewport,d=Math.ceil(s/c.dn/2/a),u=Math.ceil(l/c.dn/2/a);return Math.abs(t-r)<=d&&Math.abs(n-o)<=u}renderChunks(e){const t=this.canvas.getContext("2d");if(!t)return;const{centerChunk:n,tiledScale:i,tiledZoom:r,viewport:o,viewscale:a}=this,{canvasSize:s}=e.canvas;let{relScale:l}=this;a>=1?(t.msImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1):(t.msImageSmoothingEnabled=!0,t.webkitImageSmoothingEnabled=!0,t.imageSmoothingEnabled=!0);const{width:d,height:u}=o,h=Math.ceil(d/c.dn/2/l),f=Math.ceil(u/c.dn/2/l);a>this.scaleThreshold&&(l=1),t.save(),t.fillStyle="#C4C4C4",t.scale(l,l);const p=Date.now();let m=!1;p>this.lastFetch+150&&(this.lastFetch=p,m=!0);const v=this.canvas.width/2/l-c.dn/2,g=this.canvas.height/2/l-c.dn/2,[y,w]=n;let b;for(let e=-h;e<=h;e+=1)for(let n=-f;n<=f;n+=1){const o=y+e,a=w+n,l=v+e*c.dn,d=g+n*c.dn,u=s/c.dn;o<0||o>=u*i||a<0||a>=u*i?t.fillRect(l,d,c.dn,c.dn):(b=this.chunkLoader.getChunk(r,o,a),b?(t.drawImage(b,l,d),m&&(b.timestamp=p)):t.fillRect(l,d,c.dn,c.dn))}t.restore(),e.templates.ovEnabled&&(a<c.oj||!e.templates.oSmallPxls)&&function(e,t,n,i,r,o){if(!X.ready||i<.035)return;const{canvasSize:a,canvasId:s}=e.canvas,[l,d]=n.map((e=>e*c.dn/r+c.dn/2/r-a/2)),u=i>o?1:i,{width:h,height:f}=t,p=h/2/u,m=f/2/u,v=X.getTemplatesInView(s,l,d,p,m);if(!v.length)return;const g=t.getContext("2d");if(g){g.imageSmoothingEnabled=!1,g.save(),g.scale(u,u),g.globalAlpha=e.templates.oOpacity/100;for(const e of v){if(e.width*u<1||e.height*u<1)continue;const t=X.getTemplateSync(e.imageId);t&&g.drawImage(t,e.x-l+h/2/u,e.y-d+f/2/u)}g.restore()}}(e,this.canvas,n,a,this.tiledScale,this.scaleThreshold)}render(){if(!this.chunkLoader)return;super.render();const e=this.store.getState();e.canvas.isHistoricalView?this.renderHistorical(e):this.renderMain(e)}renderMain(e){const{_view:t,viewport:n,viewscale:i}=this,{showGrid:r,showPixelNotify:o,isPotato:a,isLightGrid:s}=e.gui,{fetchingPixel:l}=e.fetching,{canvasSize:d,hover:u}=e.canvas,[h,f]=t,[p,m]=this.centerChunk,v=i>=.5&&o&&he.doRender(),g=i>=3&&!l&&(u||this.hover)&&!a,y=i>=3&&!l&&(u!==this.hover||this.forceNextRender||this.forceNextSubrender||v)&&a;if(!(this.forceNextRender||g||y||v||this.forceNextSubrender))return;this.hover=u,this.forceNextRender&&this.renderChunks(e),this.forceNextRender=!1,this.forceNextSubrender=!1;const{width:w,height:k}=n,S=n.getContext("2d");if(!S)return;S.msImageSmoothingEnabled=!1,S.webkitImageSmoothingEnabled=!1,S.imageSmoothingEnabled=!1;const E=d/2;i>this.scaleThreshold?(S.save(),S.scale(i,i),S.drawImage(this.canvas,w/2/i-this.canvas.width/2+((p+.5)*c.dn-E-h),k/2/i-this.canvas.height/2+((m+.5)*c.dn-E-f)),S.restore()):S.drawImage(this.canvas,Math.floor(w/2-this.canvas.width/2+((p+.5)*c.dn/this.tiledScale-E-h)*i),Math.floor(k/2-this.canvas.height/2+((m+.5)*c.dn/this.tiledScale-E-f)*i)),e.templates.ovEnabled&&e.templates.oSmallPxls&&i>=c.oj&&function(e,t,n,i){if(!X.ready)return;const{canvasId:r}=e.canvas,[o,a]=n,{width:s,height:l}=t,c=s/2/i,d=l/2/i,u=X.getTemplatesInView(r,o,a,c,d);if(!u.length)return;const h=t.getContext("2d");if(!h)return;const f=i/3;h.imageSmoothingEnabled=!1,h.save(),h.scale(f,f);for(const e of u){const t=X.getSmallTemplateSync(e.imageId);t&&h.drawImage(t,3*(e.x-o)+s/2/f,3*(e.y-a)+l/2/f)}h.restore()}(e,n,t,i),r&&i>=8&&Q(0,n,t,i,s),v&&he.render(e,n,t,i),u&&g&&function(e,t,n,i){const r=t.getContext("2d"),{hover:o,palette:a,selectedColor:s}=e.canvas,[l,c]=(0,b.UK)(n,i,t,o);r.save(),r.translate(l+i/2,c+i/2);const d=Math.sin(Date.now()/250)/4;r.rotate(d),r.fillStyle="#000",r.fillRect(-.6*i-1,-.6*i-1,i*Z+2,i*Z+2),r.fillStyle=a.colors[s],r.fillRect(.6*-i,.6*-i,i*Z,i*Z),r.restore()}(e,n,t,i),u&&y&&function(e,t,n,i){const r=t.getContext("2d"),{palette:o,selectedColor:a,hover:s}=e.canvas,[l,c]=(0,b.UK)(n,i,t,s);r.save(),r.fillStyle="#000",r.fillRect(l-1,c-1,4,i+2),r.fillRect(l-1,c-1,i+2,4),r.fillRect(l+i-2,c-1,4,i+2),r.fillRect(l-1,c+i-2,i+1,4),r.fillStyle=o.colors[a],r.fillRect(l,c,2,i),r.fillRect(l,c,i,2),r.fillRect(l+i-1,c,2,i),r.fillRect(l,c+i-1,i,2),r.restore()}(e,n,t,i)}renderHistoricalChunks(e){const t=this.canvas.getContext("2d");if(!t)return;const{centerChunk:n,viewport:i,viewscale:r,oldHistoricalTime:o}=this,{historicalDate:a,historicalTime:s,historicalCanvasSize:l}=e.canvas;r>=1?(t.msImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1):(t.msImageSmoothingEnabled=!0,t.webkitImageSmoothingEnabled=!0,t.imageSmoothingEnabled=!0);const d=r>this.scaleThreshold?1:r,{width:u,height:h}=i,f=Math.ceil(u/c.dn/2/d),p=Math.ceil(h/c.dn/2/d);if(t.save(),t.fillStyle="#C4C4C4",!a||!s)return t.fillRect(0,0,this.canvas.width,this.canvas.height),void t.restore();t.scale(d,d);const m=Date.now();let v=!1;m>this.lastFetch+150&&(this.lastFetch=m,v=!0);const g=this.canvas.width/2/d-c.dn/2,y=this.canvas.height/2/d-c.dn/2,[w,b]=n;let k;for(let e=-f;e<=f;e+=1)for(let n=-p;n<=p;n+=1){const i=w+e,r=b+n,d=g+e*c.dn,u=y+n*c.dn,h=l/c.dn;if(i<0||i>=h||r<0||r>=h)t.fillRect(d,u,c.dn,c.dn);else{if(k=this.chunkLoader.getHistoricalChunk(i,r,!0,a),k?(t.drawImage(k,d,u),v&&(k.timestamp=m)):t.fillRect(d,u,c.dn,c.dn),"0000"===s)continue;k=this.chunkLoader.getHistoricalChunk(i,r,!0,a,s),k?k.isEmpty||(t.drawImage(k,d,u),v&&(k.timestamp=m)):o&&(k=this.chunkLoader.getHistoricalChunk(i,r,!1,a,o),k&&!k.isEmpty&&(t.drawImage(k,d,u),v&&(k.timestamp=m)))}}t.restore()}renderHistorical(e){const{viewport:t,viewscale:n}=this,{showGrid:i,isLightGrid:r}=e.gui,{historicalCanvasSize:o}=e.canvas,[a,s]=this._view,[l,d]=this.centerChunk;if(!this.forceNextRender&&!this.forceNextSubrender)return;this.forceNextRender&&this.renderHistoricalChunks(e),this.forceNextRender=!1,this.forceNextSubrender=!1;const{width:u,height:h}=t,f=t.getContext("2d");if(!f)return;f.msImageSmoothingEnabled=!1,f.webkitImageSmoothingEnabled=!1,f.imageSmoothingEnabled=!1;const p=o/2;n>this.scaleThreshold?(f.save(),f.scale(n,n),f.drawImage(this.canvas,u/2/n-this.canvas.width/2+((l+.5)*c.dn-p-a),h/2/n-this.canvas.height/2+((d+.5)*c.dn-p-s)),f.restore()):f.drawImage(this.canvas,Math.floor(u/2-this.canvas.width/2+((l+.5)*c.dn-p-a)*n),Math.floor(h/2-this.canvas.height/2+((d+.5)*c.dn-p-s)*n)),i&&n>=8&&Q(0,t,this._view,n,r)}}const pe=fe,me=new F.A;let ve=me;async function ge(e,t){switch(ve.destructor(),t){case!0:if((0,b.R9)()){const t=(await Promise.all([n.e(233),n.e(101)]).then(n.bind(n,8632))).default;ve=new t(e)}else e.dispatch((0,o.Jz)("Tuval Hatası","3B tuval çizilemedi, WebGL2 devre dışı mı?","error","OK")),ve=me;break;case!1:ve=new pe(e);break;default:ve=me}return ve}function ye(){return ve}!function e(){ve.render(),window.requestAnimationFrame(e)}();const we="PixelPlanet.fun";let be=null;const ke=new class{constructor(){this.wins=[],this.origin=window.location.origin,window.addEventListener("beforeunload",(()=>{this.dispatch((0,o.GP)())}))}add(e){-1===this.wins.indexOf(e)&&this.wins.push(e)}remove(e){const t=this.wins.indexOf(e);~t&&this.wins.splice(t,1)}dispatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{wins:n}=this;try{for(let i=0;i<n.length;i+=1){const r=n[i];r.closed?(n.splice(i,1),i-=1):r!==t&&r.postMessage(e,this.origin)}}catch{return!1}return!0}closeAll(){for(;this.wins.length;)this.wins.pop().close()}};var Se=n(7007);let Ee=!1;const Ce=new(n.n(Se)());function Te(e){!Ee||e.is3D||e.origUpdateView||(console.log("Extension hooked into Renderer"),e.origUpdateView=e.updateView,e.updateView=function(){const[e,t,n]=this._view;this.origUpdateView(...arguments);const[i,r,o]=this._view;if(i===e&&r===t||Ce.emit("setviewcoordinates",[i,r]),o!==n){const e=(arguments.length<=1?void 0:arguments[1])&&o>.85&&o<1.2?1:o;Ce.emit("setscale",e)}})}!function(){function e(){console.log("Extension active"),Ce.once=Ce.origOnce,Ce.addListener=Ce.origAdd,Ce.on=Ce.addListener,delete Ce.origOnce,delete Ce.origAdd,Ee=!0,Te(ye())}Ce.origOnce=Ce.once,Ce.origAdd=Ce.addListener,Ce.once=function(){Ce.origOnce(...arguments),e()},Ce.addListener=function(){Ce.origAdd(...arguments),e()},Ce.on=Ce.addListener}(),window.pixelPlanetEvents=Ce;const xe=(0,i.rL)({key:"wind",storage:f.A,version:17,migrate:A},(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_WIN":{const{windowType:n,title:i,cloneable:r,args:o,xPos:a,yPos:s,width:l,height:c}=t,[d,u]=O(l,c,!0),[h,f]=P(a,s,d,u),p=!e.showWindows||t.fullscreen;if(e.windows.length>=100)return e;const m=L(e),v=e.zMax+1;return R({...e,zMax:v,windows:[...e.windows,{windowId:m,windowType:n,open:!0,hidden:!1,fullscreen:p,title:i,cloneable:r}],args:{...e.args,[m]:{...o}},positions:{...e.positions,[m]:{width:d,height:u,xPos:h,yPos:f,z:v}}})}case"REMOVE_WIN":{const{windowId:n}=t,i={...e.args},r={...e.positions};return delete i[n],delete r[n],{...e,windows:e.windows.filter((e=>e.windowId!==n)),args:i,positions:r}}case"CLOSE_WIN":{const{windowId:n}=t,i=e.windows.map((e=>e.windowId!==n?e:{...e,open:!1}));return{...e,windows:i}}case"CLOSE_ALL_WIN_TYPE":{const{windowType:n}=t,i=e.windows.map((e=>e.windowType!==n?e:{...e,open:!1}));return{...e,windows:i}}case"HIDE_ALL_WIN_TYPE":{const{windowType:n,hide:i}=t,r=e.windows.map((e=>e.windowType!==n?e:{...e,hidden:i}));return{...e,windows:r}}case"CLONE_WIN":{const{windowId:n}=t,i=e.windows.find((e=>e.windowId===n)),r=e.positions[n],o=L(e),a=e.zMax+1,{innerWidth:s,innerHeight:l}=window;return R({...e,zMax:a,windows:[...e.windows,{...i,windowId:o}],args:{...e.args,[o]:{...e.args[n]}},positions:{...e.positions,[o]:{...r,xPos:Math.min(r.xPos+15,s-70),yPos:Math.min(r.yPos+15,l-30),z:a}}})}case"CHANGE_WIN_TYPE":{const{windowId:n,windowType:i,title:r}=t,o={...e.args,[n]:{...t.args}},a=e.windows.map((e=>e.windowId!==n?e:{...e,windowType:i,title:r}));return{...e,args:o,windows:a}}case"FOCUS_WIN":{const{windowId:n}=t,{zMax:i}=e,{z:r}=e.positions[n];return r===i?e:R({...e,zMax:i+1,positions:{...e.positions,[n]:{...e.positions[n],z:i+1}}})}case"TGL_MAXIMIZE_WIN":{const{windowId:n}=t,i=e.windows.map((e=>e.windowId!==n?e:{...e,fullscreen:!e.fullscreen,open:!0,hidden:!1}));return{...e,windows:i}}case"CLOSE_FULLSCREEN_WINS":{const t=e.windows.map((e=>e.fullscreen?{...e,open:!1}:e));return{...e,windows:t}}case"MOVE_WIN":{const{windowId:n,xDiff:i,yDiff:r}=t;let{xPos:o,yPos:a}=e.positions[n];const{width:s,height:l}=e.positions[n];return[o,a]=P(o+i,a+r,s,l),{...e,positions:{...e.positions,[n]:{...e.positions[n],xPos:o,yPos:a}}}}case"RESIZE_WIN":{const{windowId:n,xDiff:i,yDiff:r}=t;let{width:o,height:a}=e.positions[n];return[o,a]=O(o+i,a+r,!1),{...e,positions:{...e.positions,[n]:{...e.positions[n],width:o,height:a}}}}case"persist/REHYDRATE":{const{showWindows:n}=e;if(!n||"wind"!==t.key)return e;const i={...e,...t.payload},r={...i.args},o={...i.positions},a=i.windows.filter((e=>!(!e.open||!e.fullscreen&&!n)||(console.log(`Cleaning up window from previous session: ${e.windowId}`),delete r[e.windowId],delete o[e.windowId],!1)));return R($({...i,windows:a,args:r,positions:o}))}case"WIN_RESIZE":{const t=window.innerWidth>604;return t?$(t===e.showWindows?e:{...e,showWindows:t}):{...e,showWindows:t}}case"SET_WIN_TITLE":{const{windowId:n,title:i}=t,r=e.windows.map((e=>e.windowId!==n?e:{...e,title:i}));return{...e,windows:r}}case"SET_WIN_ARGS":{const{windowId:n,args:i}=t;return{...e,args:{...e.args,[n]:{...e.args[n],...i}}}}default:return e}})),Ne=(0,u.HY)({..._,windows:xe,alert:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALERT":{const{title:n,message:i,alertType:r,btn:o}=t;return{...e,open:!0,title:n,message:i,alertType:r,btn:o}}case"CLOSE_ALERT":return{...e,open:!1};default:return e}}}),Ie=(0,u.y$)(Ne,(0,u.Tw)(h.A,(()=>e=>t=>Array.isArray(t)?t.map(e):e(t)),(e=>t=>n=>{if(n instanceof MessageEvent){if(n.origin!==window.location.origin||!n.data.type)return null;if("t/UNLOAD"===n.data.type)console.log("popup closed"),ke.remove(n.source);else if("t/LOAD"===n.data.type){const t=e.getState();n.source.postMessage((0,o.Gr)(t),window.location.origin),ke.add(n.source),console.log("popup added")}else n.data.type.startsWith("s/")&&ke.dispatch(n.data,n.source);return t(n.data)}return ke.wins.length&&n.type&&n.type.startsWith("s/")&&ke.dispatch(n),t(n)}),(e=>t=>n=>{const i=e.getState(),{mute:r,chatNotify:o,musicPlayer:a}=i.gui;if(!r&&H)switch(n.type){case"SELECT_COLOR":{const e=H.createOscillator(),t=H.createGain(),{currentTime:n}=H;e.type="sine",e.detune.value=-600,e.frequency.setValueAtTime(600,n),e.frequency.setValueAtTime(700,n+.1),t.gain.setValueAtTime(.3,n),t.gain.exponentialRampToValueAtTime(.2,n+.1),e.connect(t),t.connect(H.destination),e.start(),e.stop(n+.2);break}case"SET_NOTIFICATION":{const{notification:e}=n;if("string"!=typeof e)break;const t=H.createOscillator(),i=H.createGain(),{currentTime:r}=H;t.type="sine",t.detune.value=-1200,t.frequency.setValueAtTime(500,r),t.frequency.setValueAtTime(600,r+.1),i.gain.setValueAtTime(.3,r),i.gain.exponentialRampToValueAtTime(.2,r+.1),t.connect(i),i.connect(H.destination),t.start(),t.stop(r+.2);break}case"ALERT":{const e=H.createOscillator(),t=H.createGain(),{currentTime:i}=H;if("captcha"===n.alertType)e.type="sine",e.detune.value=-600,e.start(i),e.frequency.setValueAtTime(1479.98,i),e.frequency.exponentialRampToValueAtTime(493.88,i+.01),e.stop(i+.1),t.gain.setValueAtTime(.5,i),t.gain.setTargetAtTime(0,i,.1),e.connect(t),t.connect(H.destination);else{e.type="sine",e.detune.value=-900,e.start(i),e.frequency.setValueAtTime(600,i),e.frequency.setValueAtTime(1400,i+.025),e.frequency.setValueAtTime(1200,i+.05),e.frequency.setValueAtTime(900,i+.075),e.stop(i+.3);const n=H.createOscillator();n.type="sine",n.start(i),n.frequency.setValueAtTime(2,i),n.stop(i+.3),n.connect(t),t.gain.setValueAtTime(1,i),t.gain.setTargetAtTime(0,i,3),e.connect(t),t.connect(H.destination)}break}case"REC_SET_PXLS":switch(n.retCode){case 0:{const{palette:e,selectedColor:t}=i.canvas,n=e.colors.length,r=100+300*Math.log(t/n+1),o=H.createOscillator(),a=H.createGain(),{currentTime:s}=H;o.type="sine",o.start(s),o.frequency.setValueAtTime(r,s),o.frequency.exponentialRampToValueAtTime(1400,s+.2),o.stop(s+.1),a.gain.setValueAtTime(.5,s),a.gain.setTargetAtTime(0,s,.1),o.connect(a),a.connect(H.destination);break}case 9:{const e=H.createOscillator(),t=H.createGain(),{currentTime:n}=H;e.type="sine",e.start(n),e.frequency.setValueAtTime(1479.98,n),e.frequency.exponentialRampToValueAtTime(493.88,n+.01),e.stop(n+.1),t.gain.setValueAtTime(.5,n),t.gain.setTargetAtTime(0,n,.1),e.connect(t),t.connect(H.destination);break}}break;case"COOLDOWN_END":{const{lastCoolDownEnd:e}=i.user;if(e&&e+5e3>Date.now())break;const t=H.createOscillator(),n=H.createGain(),{currentTime:r}=H;t.type="sine",t.frequency.setValueAtTime(349.23,r),t.frequency.setValueAtTime(523.25,r+.1),t.frequency.setValueAtTime(698.46,r+.2),n.gain.setValueAtTime(.5,r),n.gain.exponentialRampToValueAtTime(.2,r+.15),t.connect(n),n.connect(H.destination),t.start(),t.stop(r+.3);break}case"s/REC_CHAT_MESSAGE":{if(o)break;const{isPing:e,channel:t}=n,{mute:r,chatChannel:a}=i.chatRead;if(r.includes(t)||r.includes(`${t}`))break;const{channels:s}=i.chat,l=H.createOscillator(),c=H.createGain(),{currentTime:d}=H;l.type="sine",l.frequency.setValueAtTime(310,d);const u=e||s[t]&&1===s[t][1]&&t!=a?540:355;l.frequency.exponentialRampToValueAtTime(u,d+.025),c.gain.setValueAtTime(.1,d),c.gain.exponentialRampToValueAtTime(.1,d+.1),l.connect(c),c.connect(H.destination),l.start(),l.stop(d+.075);break}}return t(n)}),(e=>t=>n=>{try{if(!document.hasFocus())switch(n.type){case"s/REC_ME":window.Notification&&"granted"!==Notification.permission&&"denied"!==Notification.permission&&Notification.requestPermission();break;case"COOLDOWN_END":{const t=e.getState(),{lastCoolDownEnd:n}=t.user;if(n&&n+15e3>Date.now())break;window.Notification&&"granted"===Notification.permission&&new Notification("Sıradaki pikselleriniz hazır",{icon:"/tile.png",silent:!1,vibrate:[200,100],body:"Artık pixelplanet.fun'da daha fazla piksel atabilirsin :)"});break}case"s/REC_CHAT_MESSAGE":{const t=e.getState(),{chatNotify:i}=t.gui;if(!i)break;const{isPing:r}=n;if(!r)break;const{name:o}=n;window.Notification&&"granted"===Notification.permission&&new Notification(`${o} senden bahsetti`,{icon:"/tile.png",silent:!1,vibrate:[200,100],body:"Sohbette yeni mesajlarınız var"});break}}}catch(e){console.error(e)}return t(n)}),(e=>t=>n=>{const i=t(n);switch(n.type){case"COOLDOWN_SET":{const{coolDown:t}=e.getState().user,n=`${(0,b.lY)(t,!0)} | ${we}`;if(be===n)break;be=n,document.title=n;break}case"COOLDOWN_END":document.title=we;break;case"s/SELECT_CANVAS":case"s/REC_ME":case"RELOAD_URL":case"UPDATE_VIEW":{const t=e.getState(),{view:i,canvasIdent:r,is3D:o}=t.canvas;if("UPDATE_VIEW"!==n.type){const[e,n,i]=t.canvas.palette.rgb;!function(e,t,n){const i=document.querySelector("meta[name=theme-color]");i&&i.setAttribute("content",`rgb(${e}, ${t}, ${n})`)}(e,n,i)}const a=`#${r},${i.map(((e,t)=>(2!==t||o||(e=10*Math.log2(e)),Math.round(e)))).join(",")}`;window.history.replaceState(void 0,void 0,a);break}}return i}),(e=>t=>n=>{switch(n.type){case"REC_BIG_CHUNK":case"REC_BIG_CHUNK_FAILURE":{const{chunk:e}=n;e.recUpdates&&U.registerChunk(n.chunk.id);break}case"REMOVE_CHUNKS":{const{chunks:e}=n,t=e.filter((e=>e.recUpdates)).map((e=>e.id));t.length&&U.deRegisterChunks(t);break}case"s/SET_NAME":case"s/LOGIN":case"s/LOGOUT":U.reconnect();break;case"s/REQ_CHAT_MESSAGE":{const{text:e,channel:t}=n;U.sendChatMessage(e,t);break}case"RELOAD_URL":case"s/SELECT_CANVAS":case"s/REC_ME":{const i=e.getState(),r=t(n),o=e.getState(),{canvasId:a}=o.canvas;return i.canvas.canvasId!==a&&U.setCanvas(a),r}}return t(n)}),(()=>e=>t=>{const{type:n}=t;switch(n){case"s/SELECT_CANVAS":Ce.emit("selectcanvas",t.canvasId);break;case"SET_HOVER":Ce.emit("sethover",t.hover);break;case"REC_BIG_CHUNK":Ce.emit("receivechunk",t.chunk)}const i=e(t);switch(n){case"RELOAD_URL":case"s/SELECT_CANVAS":case"s/TGL_EASTER_EGG":case"s/REC_ME":Ee&&Te(ye())}return i}),(e=>t=>n=>{const{type:i}=n;switch(i){case"SET_HISTORICAL_TIME":{const t=e.getState(),n=ye(),{historicalDate:i,historicalTime:r}=t.canvas;n.updateOldHistoricalTime(i,r);break}case"SELECT_HOVER_COLOR":{const t=ye().getPointedColor();null!==t&&e.dispatch((0,o.sD)(t));break}}const r=t(n),a=e.getState();switch(i){case"RELOAD_URL":case"s/SELECT_CANVAS":case"s/REC_ME":{const t=ye(),{is3D:n}=a.canvas;if(n===t.is3D?(t.updateCanvasData(a),"RELOAD_URL"===i&&t.updateView(a.canvas.view)):ge(e,n),a.canvas.isHistoricalView){const{historicalDate:e,historicalTime:n,historicalCanvasSize:i}=a.canvas;t.updateHistoricalTime(e,n,i)}break}case"s/TGL_EASTER_EGG":{const t=ye(),{is3D:n}=a.canvas;n&&ge(e,!t.is3D);break}case"SET_HISTORICAL_TIME":{const{historicalDate:e,historicalTime:t,historicalCanvasSize:n}=a.canvas;ye().updateHistoricalTime(e,t,n);break}case"s/CHG_TEMPLATE":case"s/TGL_OVENABLED":case"s/TGL_SMALLPXLS":case"s/REM_TEMPLATE":case"s/UPD_TEMPLATE_IMG":case"s/SET_O_OPACITY":case"REQ_BIG_CHUNK":case"PRE_LOADED_BIG_CHUNK":case"REC_BIG_CHUNK":case"REC_BIG_CHUNK_FAILURE":ye().forceNextRender=!0;break;case"s/TGL_GRID":case"ALLOW_SETTING_PXL":ye().forceNextSubrender=!0;break;case"s/TGL_HISTORICAL_VIEW":{const e=ye();e.updateView(e.view,e.view),e.forceNextRender=!0;break}case"s/SELECT_HOLD_PAINT":if(n.value){const e=ye();e.controls.holdPaintStarted?.(n.immediate)}break;case"s/SET_MOVE_U":case"s/SET_MOVE_V":case"s/SET_MOVE_W":case"s/CANCEL_MOVE":n.value||ye().storeViewInState();break;case"SET_VIEW_COORDINATES":{const e=ye();e.updateView(n.view),e.storeViewInState();break}case"SET_SCALE":{const e=ye(),[t,i]=e.view;e.updateView([t,i,n.scale],n.zoompoint),e.storeViewInState();break}case"REC_SET_PXLS":{const e=ye();e.forceNextSubrender=!0;const{coolDownSeconds:t}=n;t<0&&e&&e.controls&&e.controls.gotCoolDownDelta&&e.controls.gotCoolDownDelta(-1*t);break}}return r}))),Ae=Ie,_e=["g","h","x","m","t","r","l","+","-"];var Le,Oe=n(6540),Pe=n(3561),$e=n(5338),Re=n(971);function De(e,t,n,i){Le||(Le="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Le,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Me(){let e=(0,Pe.d4)((e=>e.gui.style));if(!window.ssv.availableStyles)return null;const t=new Date,n=t.getMonth()+1,i=t.getDate();(31===i&&10===n||1===i&&11===n)&&(e="dark-spooky");const r=window.ssv.availableStyles[e];return"default"!==e&&r?De("link",{rel:"stylesheet",type:"text/css",href:r}):null}const ze=Oe.memo(Me);var He;function Ge(e,t,n,i){He||(He="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:He,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ve=()=>{const[e,t,n]=(0,Pe.d4)((e=>[e.canvas.view,e.canvas.hover,e.canvas.is3D]),Pe.bN),i=(0,Pe.wA)();let o;if(t)o=t;else{const[t,i,r]=e;o=(n?[t,i,r]:[t,i]).map(Math.round)}return Ge("div",{className:"coorbox",onClick:()=>{(0,r.A)(window.location.hash),i((0,d.me)("Kopyalandı"))},role:"button",title:"Panoya Kopyala",tabIndex:"0"},void 0,`(${o.join(", ")})`)},We=Oe.memo(Ve);var Ue=n(1612);const Fe={USERAREA:["activeTab"],CHAT:["chatChannel"]},Be=["HELP","SETTINGS","USERAREA","CHAT","CANVAS_SELECTION","ARCHIVE","REGISTER","FORGOT_PASSWORD","NEWS","TOP3"];function Ke(){const e=window.location.pathname.split("/")[1];return e&&Be.includes(e.toUpperCase())}function Ye(e,t){const n={...t};let i=`/${e.toLowerCase()}`;const r=Fe[e];if(r)for(let e=0;e<r.length;e+=1){const t=r[e];n[t]&&(i+=`/${encodeURIComponent(n[t])}`,delete n[t])}let o=new URLSearchParams;const a=Object.keys(n);for(let e=0;e<a.length;e+=1){const t=a[e];o.append(t,n[t])}return o=o.toString(),o&&(i+=`?${o}`),i}const je=Be;function qe(e){return{type:"OPEN_WIN",windowType:e,title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",args:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,fullscreen:arguments.length>3&&void 0!==arguments[3]&&arguments[3],cloneable:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],xPos:arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,yPos:arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,width:arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,height:arguments.length>8&&void 0!==arguments[8]?arguments[8]:null}}function Xe(e,t){return{type:"HIDE_ALL_WIN_TYPE",windowType:e,hide:t}}const Ze=(0,Oe.createContext)();function Qe(e,t,n,i,r,o){!function(e,t,n,i,r){let o,a;try{if(window.innerWidth<=604?(i=window.innerWidth,r=window.innerHeight,o=window.top.screenX,a=window.top.screenY):(o=Math.round(window.top.screenX+t),a=Math.round(window.top.screenY+n)),Number.isNaN(o)||Number.isNaN(a))throw new Error("NaN")}catch{o=0,a=0}try{return window.open(e,e,`popup=yes,width=${i},height=${r},left=${o},top=${a},toolbar=no,status=no,directories=no,menubar=no`)}catch{return null}}(Ye(e,t),n,i,r,o)}const Je=function(){const e=(0,Pe.wA)(),t=(0,Oe.useContext)(Ze);return(0,Oe.useCallback)((function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{xPos:r=null,yPos:o=null,width:a=null,height:s=null,args:l=null}=i;if("popup"===i.target)return void Qe(n,l,r,o,a,s);const{title:c=""}=i,d=!Ke();if("blank"===i.target&&d){const{cloneable:t=!0}=i;e(qe(n.toUpperCase(),c,l,!1,t,r,o,a,s))}else if("fullscreen"===i.target&&d){const{cloneable:t=!0}=i;e(qe(n.toUpperCase(),c,l,!0,t,r,o,a,s))}else t?t.changeType(n,c,l):window.location.href=Ye(n,l)}),[t,e])};var et,tt;function nt(e,t,n,i){tt||(tt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:tt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const it=()=>{const e=Je();return nt("div",{id:"canvasbutton",className:"actionbuttons",onClick:()=>e("CANVAS_SELECTION",{target:"fullscreen"}),role:"button",title:"Tuval Seçimi",tabIndex:-1},void 0,et||(et=nt(Ue.L5J,{})))},rt=Oe.memo(it);var ot,at,st,lt,ct;function dt(e,t,n,i){ct||(ct="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:ct,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ut=()=>{const[e,t,n,i,r]=(0,Pe.d4)((e=>[e.ranks.online,e.ranks.totalPixels,e.user.name,e.gui.onlineCanvas,e.canvas.canvasId]),Pe.bN),a=(0,Pe.wA)();return dt("div",{className:"onlinebox",role:"button",tabIndex:"0",onClick:()=>a((0,o.YC)())},void 0,i?dt("span",{title:"Tuvaldeki Çevrim İçi Oyuncular"},void 0,e[r]||0,ot||(ot=dt(Ue.x$1,{})),at||(at=dt(Ue.L5J,{}))):dt("span",{title:"Toplam Çevrim İçi Oyuncular"},void 0,e.total,st||(st=dt(Ue.x$1,{})))," ",null!=n&&dt("span",{title:"Atılan pikseller"},void 0,(0,b.um)(t)," ",lt||(lt=dt(Ue.IFh,{}))))},ht=Oe.memo(ut);var ft,pt,mt=n(9644);function vt(e,t,n,i){pt||(pt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:pt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const gt=e=>[e.windows.windows.some((t=>"CHAT"===t.windowType&&!1===t.hidden&&(e.windows.showWindows||t.fullscreen))),e.windows.windows.some((e=>"CHAT"===e.windowType&&!0===e.hidden))&&e.windows.showWindows],yt=()=>{const[e,t]=(0,Oe.useState)(!1),n=(0,Pe.wA)(),[i,r]=(0,Pe.d4)(gt,Pe.bN),o=(0,Pe.d4)((e=>e.gui.chatNotify)),a=(0,Pe.d4)((e=>e.chat.channels)),[s,l]=(0,Pe.d4)((e=>[e.chatRead.unread,e.chatRead.mute]),Pe.bN);return(0,Oe.useEffect)((()=>{if(!o||i)return void t(!1);const e=Object.keys(a);let n=0;for(;n<e.length;){const i=e[n];if(0!==a[i][1]&&s[i]&&!l.includes(i)){t(!0);break}n+=1}n===e.length&&t(!1)}),[o,i,a,s,l]),vt("div",{id:"chatbutton",className:"actionbuttons",onClick:()=>{n(i?Xe("CHAT",!0):r?Xe("CHAT",!1):qe("CHAT","",null,!1,!0,window.innerWidth-350-62,window.innerHeight-350-64,350,350))},role:"button",title:i?"Sohbeti Kapat":"Sohbeti Aç",tabIndex:0},void 0,e&&vt("div",{style:{position:"fixed",bottom:27,right:62,top:"unset"},className:"chnunread"},void 0,"⦿"),ft||(ft=vt(mt.PrD,{})))},wt=Oe.memo(yt);var bt,kt;function St(e,t,n,i){kt||(kt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:kt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Et=()=>{const e=Je();return St("div",{id:"helpbutton",className:"actionbuttons",onClick:()=>e("HELP",{target:"fullscreen"}),role:"button",title:"Yardım",tabIndex:-1},void 0,bt||(bt=St(Ue.qQC,{})))},Ct=Oe.memo(Et);var Tt,xt;function Nt(e,t,n,i){xt||(xt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:xt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const It=()=>{const e=Je();return Nt("div",{id:"settingsbutton",className:"actionbuttons",onClick:()=>e("SETTINGS",{target:"fullscreen"}),role:"button",title:"Ayarlar",tabIndex:-1},void 0,Tt||(Tt=Nt(Ue.Pcn,{})))},At=Oe.memo(It);var _t,Lt;function Ot(e,t,n,i){Lt||(Lt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Lt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Pt=()=>{const e=Je();return Ot("div",{id:"loginbutton",className:"actionbuttons",onClick:()=>e("USERAREA",{target:"fullscreen"}),role:"button",title:"Kullanıcı Alanı",tabIndex:-1},void 0,_t||(_t=Ot(mt.LTk,{})))},$t=Oe.memo(Pt);var Rt,Dt,Mt=n(5419),zt=n.n(Mt);function Ht(e,t,n,i){Dt||(Dt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Dt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Gt=()=>{const e=(0,Pe.d4)((e=>e.canvas.view));return Ht("div",{id:"downloadbutton",className:"actionbuttons",role:"button",title:"Ekran Görüntüsü Al",tabIndex:0,onClick:()=>function(e){const t=ye().getViewport();if(!t)return;const[n,i]=e.map(Math.round),r=`globalpixel-${n}-${i}.png`;t.toBlob((e=>zt()(e,r)))}(e)},void 0,Rt||(Rt=Ht(mt.S3Y,{})))},Vt=Oe.memo(Gt);var Wt;function Ut(e,t,n,i){Wt||(Wt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Wt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ft=()=>{const e=Je();return Ut("div",{id:"top3button",className:"actionbuttons",onClick:()=>e("TOP3",{target:"fullscreen"}),role:"button",title:"Top3",tabIndex:-1},void 0,"T3")},Bt=Oe.memo(Ft);var Kt,Yt,jt,qt,Xt,Zt;function Qt(e,t,n,i){Zt||(Zt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Zt,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Jt=()=>{const[e,t]=(0,Oe.useState)(!1),n=(0,Pe.d4)((e=>e.gui.menuOpen)),[i]=(0,Pe.d4)((e=>[e.user.isOnMobile]),Pe.bN);return(0,Oe.useEffect)((()=>{n&&setTimeout((()=>t(!0)),10)}),[n]),(e||n)&&Qt("div",{className:n&&e?"menu show":"menu",onTransitionEnd:()=>{n||t(!1)}},void 0,Kt||(Kt=Qt(At,{})),Yt||(Yt=Qt($t,{})),jt||(jt=Qt(Vt,{})),qt||(qt=Qt(Ct,{})),i&&(Xt||(Xt=Qt(Bt,{}))))},en=Oe.memo(Jt);var tn;function nn(e,t,n,i){tn||(tn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:tn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const rn=()=>{const e=(0,Pe.d4)((e=>e.user.coolDown));return nn("div",{className:e&&e>=300?"cooldownbox show":"cooldownbox"},void 0,e&&(0,b.lY)(e,!0))},on=Oe.memo(rn);var an,sn;function ln(e,t,n,i){sn||(sn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:sn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const cn=()=>Oe.createElement(Oe.Fragment,null,an||(an=ln("div",{className:"chaosbox"},void 0,ln("p",{},void 0,"Chaos for now! 🎊")))),dn=Oe.memo(cn);var un;function hn(e,t,n,i){un||(un="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:un,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const fn=()=>{const e=(0,Pe.d4)((e=>e.ranks.totalDailyRanking)),t={fontSize:"1em"};return Oe.createElement(Oe.Fragment,null,hn("div",{className:"top3"},void 0,hn("p",{style:t},void 0,"Top 3 Users for Today:"),hn("ul",{},void 0,e.slice(0,3).map(((e,n)=>hn("li",{style:{color:0===n?"gold":1===n?"silver":"bronze",...t}},n,n+1,". ",e.name))))))},pn=Oe.memo(fn);var mn;function vn(e,t,n,i){mn||(mn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:mn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const gn=()=>{const[e,t]=(0,Oe.useState)("notifybox"),n=(0,Pe.d4)((e=>e.user.notification));return(0,Oe.useEffect)((()=>{if(n){let i="notifybox";n&&"string"!=typeof n&&(i+=n>0?" green":" red"),i!==e&&t(i)}}),[n,e]),vn("div",{className:n?`${e} show`:e},void 0,n)},yn=Oe.memo(gn);var wn,bn;function kn(e,t,n,i){bn||(bn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:bn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Sn=()=>{const[e,t,n,i]=(0,Pe.d4)((e=>[e.canvas.canvasId,e.canvas.canvasIdent,e.canvas.canvasSize,e.canvas.view]),Pe.bN);return kn("div",{role:"button",tabIndex:-1,id:"globebutton",title:"Küresel Görünüm",className:"actionbuttons",onClick:()=>function(e,t,n,i){const[r,o]=i.map(Math.round);window.location.href=`globe#${t},${e},${n},${r},${o}`}(e,t,n,i)},void 0,wn||(wn=kn(mt.DpB,{})))},En=Oe.memo(Sn);var Cn,Tn;function xn(e,t,n,i){Tn||(Tn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Tn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Nn=()=>{const e=(0,Pe.d4)((e=>e.gui.paletteOpen)),[t,n]=(0,Pe.d4)((e=>[e.canvas.palette,e.canvas.selectedColor]),Pe.bN),i=(0,Pe.wA)();return xn("div",{id:"palselbutton",className:"actionbuttons"+(e?" pressed":""),style:{color:t.isDark(n)?"white":"black",backgroundColor:t.colors[n]},role:"button",title:e?"Paleti Kapat":"Paleti Aç",tabIndex:0,onClick:()=>i((0,o.SG)())},void 0,Cn||(Cn=xn(mt.fMd,{})))},In=Oe.memo(Nn);var An=n(819);const _n=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;const[i,r]=(0,Oe.useState)(null),o=(0,Oe.useRef)(),a=(0,Oe.useCallback)((e=>{e.preventDefault(),r(setTimeout((()=>{t(e),r(null)}),n))}),[t,n]),s=(0,Oe.useCallback)((t=>{t.preventDefault(),i&&(clearTimeout(i),e&&e(t),r(null))}),[i,e]),l=(0,Oe.useCallback)((e=>{e.preventDefault(),clearTimeout(i),r(null)}),[i]);return(0,Oe.useCallback)((e=>{if(e)o.current=e,e.addEventListener("mousedown",a,{passive:!1}),e.addEventListener("mouseup",s,{passive:!1}),e.addEventListener("touchstart",a,{passive:!1}),e.addEventListener("touchend",s,{passive:!1}),e.addEventListener("mouseleave",l,{passive:!1}),e.addEventListener("touchcancel",l,{passive:!1});else if(o.current){const e=o.current;e.removeEventListener("mousedown",a,{passive:!1}),e.removeEventListener("mouseup",s,{passive:!1}),e.removeEventListener("touchstart",a,{passive:!1}),e.removeEventListener("touchend",s,{passive:!1}),e.removeEventListener("mouseleave",l,{passive:!1}),e.removeEventListener("touchcancel",l,{passive:!1})}}),[l,a,s])};var Ln,On,Pn;function $n(e,t,n,i){Pn||(Pn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Pn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Rn=()=>{const[e,t]=(0,Pe.d4)((e=>[e.gui.holdPaint,e.gui.showMvmCtrls]),Pe.bN),n=(0,Pe.wA)(),i=(0,Oe.useCallback)((()=>{let t;switch(e){case c.h7.OFF:case c.h7.PENCIL:if(window.ssv?.backupurl){t=c.h7.HISTORY,n((0,d.me)("Geçmiş Kalemi AÇIK"));break}case c.h7.HISTORY:t=c.h7.OVERLAY,n((0,d.me)("Şablon Kalemi AÇIK"));break;default:t=e?c.h7.OFF:c.h7.PENCIL}n((0,o.kN)(t))}),[e,n]),r=(0,Oe.useCallback)((()=>{let t;t=e?c.h7.OFF:c.h7.PENCIL,n((0,o.kN)(t))}),[e,n]),a=_n(r,i);let s="actionbuttons",l="Kalemi Etkinleştir";switch(e){case c.h7.PENCIL:s+=" ppencil pressed",l="Kalemi Devre Dışı Bırak";break;case c.h7.HISTORY:s+=" phistory pressed",l="Geçmiş Kalemini Devre Dışı Bırak";break;case c.h7.OVERLAY:s+=" poverlay pressed",l="Şablon Kalemini Devre Dışı Bırak"}return Oe.createElement("div",{id:"pencilbutton",className:s,style:{bottom:e||t?180:98},role:"button",title:l,tabIndex:-1,ref:a},e?Ln||(Ln=$n(An.cCX,{})):On||(On=$n(An.O18,{})))},Dn=Oe.memo(Rn);var Mn,zn,Hn;function Gn(e,t,n,i){Hn||(Hn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Hn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Vn=()=>{const[e,t]=(0,Pe.d4)((e=>[e.gui.holdPaint,e.gui.showMvmCtrls]),Pe.bN),n=(0,Pe.wA)(),i=(0,Oe.useCallback)((()=>{let t;switch(e){case c.h7.OFF:case c.h7.PENCIL:if(window.ssv?.backupurl){t=c.h7.HISTORY,n((0,d.me)("History Mouse ON"));break}case c.h7.HISTORY:t=c.h7.OVERLAY,n((0,d.me)("Overlay Mouse ON"));break;default:t=e?c.h7.OFF:c.h7.PENCIL}n((0,o.kN)(t))}),[e,n]),r=(0,Oe.useCallback)((()=>{let t;t=e?c.h7.OFF:c.h7.PENCIL,n((0,o.kN)(t))}),[e,n]),a=_n(r,i);let s="actionbuttons",l="Enable Mouse";switch(e){case c.h7.PENCIL:s+=" ppencil pressed",l="Disable Mouse";break;case c.h7.HISTORY:s+=" phistory pressed",l="Disable History Mouse";break;case c.h7.OVERLAY:s+=" poverlay pressed",l="Disable Overlay Mouse"}return Oe.createElement("div",{id:"mousebutton",className:`${s} ${e?"green-background":"red-background"}`,role:"button",title:l,tabIndex:-1,ref:a},e?Mn||(Mn=Gn(An.AUB,{})):zn||(zn=Gn(An.tXX,{})))},Wn=Oe.memo(Vn);var Un,Fn,Bn,Kn,Yn,jn,qn,Xn,Zn,Qn=n(9666),Jn=n(2689);function ei(e,t,n,i){Zn||(Zn="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Zn,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ti=()=>{const[e,t]=(0,Oe.useState)(!1),[n,i]=(0,Pe.d4)(Jn.v,Pe.bN),r=(0,Pe.wA)();(0,Oe.useEffect)((()=>{i&&window.setTimeout((()=>t(!0)),10)}),[i]);const a=(0,Oe.useCallback)((e=>{if(!e)return;const t=e=>{switch(e.preventDefault(),e.currentTarget.id){case"forwardbtn":r((0,o.gj)(-1));break;case"backwardbtn":r((0,o.gj)(1));break;case"leftbtn":r((0,o.$l)(-1));break;case"rightbtn":r((0,o.$l)(1));break;case"upbtn":r((0,o.$G)(-1));break;case"downbtn":r((0,o.$G)(1))}},n=e=>{switch(e.preventDefault(),e.currentTarget.id){case"forwardbtn":case"backwardbtn":r((0,o.gj)(0));break;case"leftbtn":case"rightbtn":r((0,o.$l)(0));break;case"upbtn":case"downbtn":r((0,o.$G)(0))}},i=e=>{e.preventDefault(),r((0,o.GX)())};e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("mousedown",t,{passive:!1}),e.addEventListener("touchend",n,{passive:!1}),e.addEventListener("mouseup",n,{passive:!1}),e.addEventListener("mouseleave",i,{passive:!1}),e.addEventListener("touchcancel",i,{passive:!1})}),[r]);return(e||i)&&ei("div",{id:"mvmctrls",className:e&&i?"show":"",onTransitionEnd:()=>!i&&t(!1)},void 0,Oe.createElement("div",{className:"actionbuttons",id:"forwardbtn",role:"button",key:"forward",tabIndex:0,style:{left:57,bottom:139},ref:a},Un||(Un=ei(Qn.Jje,{}))),Oe.createElement("div",{className:"actionbuttons",id:"backwardbtn",role:"button",key:"backward",tabIndex:0,style:{left:57,bottom:98},ref:a},Fn||(Fn=ei(Qn.A0e,{}))),Oe.createElement("div",{className:"actionbuttons",id:"leftbtn",role:"button",key:"left",tabIndex:0,style:{left:16,bottom:98},ref:a},Bn||(Bn=ei(Qn.LYk,{}))),Oe.createElement("div",{className:"actionbuttons",id:"rightbtn",role:"button",key:"right",tabIndex:0,style:{left:98,bottom:98},ref:a},Kn||(Kn=ei(Qn.WYX,{}))),Oe.createElement("div",{className:"actionbuttons",id:"upbtn",role:"button",key:"up",tabIndex:0,style:{left:16,bottom:139},ref:a},n?Yn||(Yn=ei(Qn.t_V,{})):jn||(jn=ei(Qn.GHB,{}))),Oe.createElement("div",{className:"actionbuttons",id:"downbtn",role:"button",key:"down",tabIndex:0,style:{left:98,bottom:139},ref:a},n?qn||(qn=ei(Qn.A33,{})):Xn||(Xn=ei(Qn.ztj,{}))))};var ni;function ii(e,t,n,i){ni||(ni="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:ni,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ri=()=>{const[e,t]=(0,Oe.useState)(!1),[n,i,r,a,s,l]=(0,Pe.d4)((e=>[e.gui.paletteOpen,e.gui.compactPalette,e.canvas.palette.colors,e.canvas.clrIgnore,e.canvas.selectedColor,e.user.userlvl]),Pe.bN),c=(0,Pe.wA)();(0,Oe.useEffect)((()=>{window.setTimeout((()=>{n&&t(!0)}),10)}),[n]);const d=0===l?a:0,[u,h]=function(e,t,n,i,r){const{width:o,height:a}=t,s=n.length-i;let l,c,d;o<=300||a<=432?(c=24,d=5,l="row"):s>30||r?(c=28,d=5,l="row"):(c=24,d=a<801?2:1,l="column");const u=Math.ceil(s/d)*c,h=c*d;return e?[{display:"flex",flexWrap:"wrap",textAlign:"center",lineHeight:0,height:u,width:h,flexDirection:l,visibility:"visible"},{display:"block",width:c,height:c,margin:0,padding:0,cursor:"pointer",visibility:"visible"}]:[{display:"flex",flexWrap:"wrap",textAlign:"center",lineHeight:0,height:0,width:h,flexDirection:l,visibility:"hidden"},{display:"block",height:0,width:c,margin:0,padding:0,visibility:"hidden"}]}(e&&n,function(){const[e,t]=(0,Oe.useState)({width:window.innerWidth,height:window.innerHeight});return(0,Oe.useEffect)((()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}(),r,d,i);return(e||n)&&ii("div",{id:"palettebox",style:u,onTransitionEnd:()=>{n||t(!1)}},void 0,r.slice(d).map(((e,t)=>ii("span",{style:{backgroundColor:e,...h},role:"button",tabIndex:0,"aria-label":`color ${t+d}`,className:s===t+d?"selected":"unselected",color:e,onClick:()=>c((0,o.sD)(t+d))},`${e}-${t+d}`))))},oi=Oe.memo(ri);var ai,si,li=n(9826);function ci(e,t,n,i){si||(si="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:si,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const di={width:"100%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},ui=e=>{let{autoload:t,width:n,setLegit:i}=e;const[r,o]=(0,Oe.useState)({}),[a,s]=(0,Oe.useState)([]),[l,c]=(0,Oe.useState)(!1),d=async()=>{l&&c(!1);const e=await async function(){const e=`${W.b9}/captcha.svg`,t=await fetch(e,{cache:"no-cache"});if(t.ok){const e=t.headers.get("captcha-id"),n=await t.blob();return[URL.createObjectURL(n),e]}return null}();if(!e)return void s(["Captcha yüklenemedi"]);const[t,n]=e;o({url:t,id:n})};(0,Oe.useEffect)((()=>{t&&d()}),[]);const u=n||100;return Oe.createElement(Oe.Fragment,null,ci("p",{},void 0,"Resimdeki karakterleri yazınız:"," ",ci("span",{style:{fontSize:11}},void 0,"(","İpucu: Büyük/küçük harfe duyarlı değil; l ve I aynı",")")),a.map((e=>ci("p",{className:"errormessage"},e,ci("span",{},void 0,"Hata"),": ",e))),ci("div",{style:{width:`${u}%`,paddingTop:`${Math.floor(.6*u)}%`,position:"relative",display:"inline-block",backgroundColor:"#e0e0e0"}},void 0,r.url?ci("img",{style:{...di,opacity:l?1:0,transition:"100ms"},src:r.url,alt:"CAPTCHA",onLoad:()=>{s([]),c(!0)},onError:()=>{s(["Captcha yüklenemedi"])}}):ci("span",{style:di,role:"button",tabIndex:0,title:"Captcha Yükle",className:"modallink",onClick:d,onKeyPress:d},void 0,"Captcha'yı Yüklemek İçin Tıklayınız")),ci("p",{},void 0,"Okuyamıyor musun? Yenile:"," ",ci("span",{role:"button",tabIndex:-1,title:"Yenile",className:"modallink",style:{fontSize:28},onClick:d},void 0,ai||(ai=ci(li.k9w,{})))),ci("input",{name:"captcha",placeholder:"Karakterleri Gir",type:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",onChange:()=>i&&i(!0),autoFocus:t,style:{width:"6em",fontSize:21,margin:5}}),ci("input",{type:"hidden",name:"captchaid",value:r.id||"0"}))},hi=Oe.memo(ui);var fi;function pi(e,t,n,i){fi||(fi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:fi,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const mi=e=>{let{close:t}=e;const[n,i]=(0,Oe.useState)(null),[r,o]=(0,Oe.useState)(!1),[a,s]=(0,Oe.useState)(!1),[l,c]=(0,Oe.useState)(Date.now());return pi("form",{onSubmit:async e=>{e.preventDefault();const n=e.target.captcha.value.slice(0,6);if(r||!n)return;a||await(0,W.Vw)(2);const s=e.target.captchaid.value;let l;try{switch(o(!0),await U.sendCaptchaSolution(n,s)){case 0:return void t();case 1:l="Çözmeniz çok sürdü, tekrar deneyiniz.";break;case 2:l="Doğrulamayı yanlış çözdünüz";break;case 3:l="Olmayan veya yanlış captcha metni";break;case 4:l="Captcha kimliği verilmedi";break;default:l="Bilinmeyen Captcha Hatası"}}catch(e){l=`${e.message}`}o(!1),c(Date.now()),i(l)}},void 0,n&&pi("p",{className:"errormessage"},n,pi("span",{},void 0,"Hata"),": ",n),pi(hi,{autoload:!0,setLegit:s},l),pi("p",{},void 0,pi("button",{type:"button",onClick:t},void 0,"Geri Dön")," ",pi("button",{type:"submit"},void 0,r?"...":"Gönder")))},vi=Oe.memo(mi);var gi,yi=n(7256);function wi(e,t,n,i){gi||(gi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:gi,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const bi=e=>{let{close:t}=e;const[n,i]=(0,Oe.useState)([]),[r,o]=(0,Oe.useState)(null),[a,s]=(0,Oe.useState)(null),[l,c]=(0,Oe.useState)(0),[d,u]=(0,Oe.useState)(null),[h,f]=(0,Oe.useState)(!1),p=Je(),m=async()=>{if(h)return;f(!0),i([]);const e=await(0,W.Nl)();if(f(!1),e.errors)return void i(e.errors);const{sleft:t,mod:n,reason:r}=e;if(t){const e=new Date(Date.now()+1e3*t);c(t),u(e.toLocaleString())}s(n),o(r)};return(0,yi.A)((()=>{l>0&&(c(l-1),1===l&&m())}),1e3),wi("div",{style:{userSelect:"text"}},void 0,wi("p",{},void 0,"Yasaklandınız. Doğru olmadığını mı düşünüyorsunuz? ",wi("span",{role:"button",tabIndex:0,className:"modallink",onClick:()=>{p("HELP",{target:"fullscreen"}),t()}},void 0,"Yardım")," 'da başvuruda bulunun."),n.map((e=>wi("p",{className:"errormessage"},e,wi("span",{},void 0,"Hata"),": ",e))),r&&wi(Oe.Fragment,{},"rea",wi("h3",{},void 0,"Neden",":"),wi("p",{},void 0,r)),a&&wi(Oe.Fragment,{},"mod",wi("h3",{},void 0,"Moderatör",":"),wi("p",{},void 0,a)),l>0&&wi(Oe.Fragment,{},"exp",wi("h3",{},void 0,"Süre",":"),wi("p",{},void 0,"Yasağınızın kalkacağı zaman ",wi("span",{style:{fontWeight:"bold"}},void 0,d)," ki bu da şu tarihte ",wi("span",{style:{fontWeight:"bold"}},void 0,(0,b.W0)(l)))),l<0&&wi(Oe.Fragment,{},"nb",wi("h3",{},void 0,"Yasak Kaldırıldı",":"),wi("p",{},void 0,"Bu iletiyi gördüğünüze göre artık yasaklı değilsiniz.")),wi("p",{},void 0,!r&&wi(Oe.Fragment,{},"btnr",wi("button",{type:"button",style:{fontWeight:"bold",animation:"glowing 1300ms infinite"},onClick:m},void 0,h?"...":"Neden?")," "),wi("button",{type:"submit",onClick:t},void 0,"Tamam")))},ki=Oe.memo(bi);var Si;function Ei(e,t,n,i){Si||(Si="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Si,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ci=e=>{let{show:t,onClick:n,z:i}=e;const[r,o]=(0,Oe.useState)(!1);return(0,Oe.useEffect)((()=>{t&&window.setTimeout((()=>{o(!0)}),10)}),[t]),r||t?Ei("div",{className:t&&r?"overlay show":"overlay",style:i?{zIndex:i}:{},onTransitionEnd:()=>{t||o(!1)},tabIndex:-1,onClick:n}):null},Ti=Oe.memo(Ci);var xi;function Ni(e,t,n,i){xi||(xi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:xi,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ii=()=>{const[e,t]=(0,Oe.useState)(!1),{open:n,alertType:i,title:r,message:a,btn:s}=(0,Pe.d4)((e=>e.alert)),l=(0,Pe.wA)(),c=(0,Oe.useCallback)((()=>{l((0,o.R$)())}),[l]);(0,Oe.useEffect)((()=>{n&&window.setTimeout((()=>{t(!0)}),10)}),[n]);let d=null;switch(i){case"captcha":d=vi;break;case"ban":d=ki}if(!e&&!n)return null;const u=n&&e;return Oe.createElement(Oe.Fragment,null,Ni(Ti,{z:6,show:u,onClick:c}),Ni("div",{className:u?"Alert show":"Alert",onTransitionEnd:()=>{n||t(!1)}},void 0,Ni("h2",{},void 0,r),a&&Ni("p",{},void 0,a),d?Ni(d,{close:c}):Ni("button",{type:"button",onClick:c},void 0,s)),")")},Ai=Oe.memo(Ii);var _i;function Li(e,t,n,i){_i||(_i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:_i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Oi(e){return e?`${e.substring(0,2)}:${e.substring(2)}`:""}const Pi=()=>{const e=(0,Oe.useRef)(null),[t,n]=(0,Oe.useState)(!1),[i,r]=(0,Oe.useState)([]),[a]=(0,Oe.useState)((0,b.Gq)()),[s,l,c,d,u]=(0,Pe.d4)((e=>[e.canvas.canvasId,e.canvas.canvasStartDate,e.canvas.canvasEndDate,e.canvas.historicalDate,e.canvas.historicalTime]),Pe.bN),h=(0,Pe.wA)(),f=(0,Oe.useCallback)(((e,t)=>{const n=t.substring(0,2)+t.substring(3,5),i=(0,b.$T)(e);h((0,o.e_)(i,n))}),[h]),p=(0,Oe.useCallback)((async e=>{if(t)return;n(!0);const i=e.target.value,o=await(0,W.or)(i,s);o&&o.length&&(r(o),f(i,o[0])),n(!1)}),[t,s,f]),m=(0,Oe.useCallback)((async t=>{if(!(i.length&&e&&e.current&&e.current.value))return;let o=i,a=i.indexOf(Oi(u))+t,l=e.current.value;if(a>=i.length||a<0){if(n(!0),a<0?e.current.stepDown(1):e.current.stepUp(1),l=e.current.value,o=await(0,W.or)(l,s),n(!1),!o||!o.length)return;a=a<0?o.length-1:0}r(o),f(l,o[a])}),[u,i,s,f]),v=(g=d)?`${g.substring(0,4)}-${g.substring(4,6)}-${g.substring(6)}`:"";var g;const y=Oi(u);return Li("div",{id:"historyselect"},void 0,Oe.createElement("input",{type:"date",pattern:"\\d{4}-\\d{2}-\\d{2}",key:"dateinput",value:v,min:l,max:c||a,ref:e,onChange:p}),Li("div",{},"timeselcon",!!i.length&&u&&!t&&Li("div",{},"timesel",Li("button",{type:"button",className:"hsar",onClick:()=>m(-1)},void 0,"←"),Li("select",{value:y,onChange:e=>f(v,e.target.value)},void 0,i.map((e=>Li("option",{value:e},e,e)))),Li("button",{type:"button",className:"hsar",onClick:()=>m(1)},void 0,"→")),t&&Li("p",{},void 0,"Yükleniyor..."),!i.length&&!t&&Li("p",{},void 0,"Tarih seçiniz")))},$i=Oe.memo(Pi);var Ri,Di,Mi,zi,Hi,Gi,Vi,Wi,Ui,Fi,Bi,Ki,Yi;function ji(e,t,n,i){Yi||(Yi="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Yi,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const qi=()=>{const[e,t,n]=(0,Pe.d4)((e=>[e.canvas.isHistoricalView,e.canvas.is3D,e.user.isOnMobile]),Pe.bN),i=(new Date).toLocaleString("en-US",{timeZone:"Europe/Istanbul"}),r=new Date(i).getHours();return Oe.createElement(Oe.Fragment,null,Ri||(Ri=ji(Ai,{})),Di||(Di=ji(ti,{})),e?Mi||(Mi=ji($i,{})):Oe.createElement(Oe.Fragment,null,zi||(zi=ji(In,{})),Hi||(Hi=ji(oi,{})),!t&&(Gi||(Gi=ji(En,{}))),!t&&n&&(Vi||(Vi=ji(Dn,{}))),!n&&(Wi||(Wi=ji(Wn,{}))),Ui||(Ui=ji(on,{})),20===r&&(Fi||(Fi=ji(dn,{}))),!n&&(Bi||(Bi=ji(pn,{})))),Ki||(Ki=ji(yn,{})))},Xi=Oe.memo(qi);var Zi,Qi,Ji;function er(e,t,n,i){Ji||(Ji="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ji,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const tr=()=>{const e=(0,Pe.d4)((e=>e.gui.menuOpen)),t=(0,Pe.wA)();return er("div",{id:"menubutton",className:"actionbuttons"+(e?" pressed":""),role:"button",title:e?"Menüyü Kapat":"Menüyü Aç",tabIndex:-1,onClick:()=>t((0,o.kW)())},void 0,e?Zi||(Zi=er(mt.Xbk,{})):Qi||(Qi=er(mt.j1Q,{})))},nr=Oe.memo(tr);var ir=n(5504),rr=n(2325);const or=e=>e.windows.windows,ar=e=>e.windows.showWindows,sr=(0,rr.Mz)(or,ar,((e,t)=>[e.some((e=>e.fullscreen&&!e.hidden))||t,e.some((e=>e.fullscreen&&e.open&&!e.hidden))])),lr=(0,rr.Mz)(or,ar,((e,t)=>(t||(e=e.filter((e=>e.fullscreen))),e.map((e=>e.windowId))))),cr=function(e,t,n){const i=(0,Oe.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),t&&t();let{clientX:i,clientY:r}=e.touches?e.touches[0]:e;const o=e=>{e.preventDefault(),e.stopPropagation();const{clientX:t,clientY:o}=e.touches?e.touches[0]:e;n(t-i,o-r),i=t,r=o};document.addEventListener("mousemove",o),document.addEventListener("touchmove",o);const a=e=>{e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",a),document.removeEventListener("touchcancel",a),document.removeEventListener("touchend",a)};document.addEventListener("mouseup",a),document.addEventListener("touchcancel",a),document.addEventListener("touchend",a)}),[t,n]);(0,Oe.useEffect)((()=>{const t=e.current;if(t)return t.addEventListener("mousedown",i,{passive:!1}),t.addEventListener("touchstart",i,{passive:!1}),()=>{t.removeEventListener("mousedown",i),t.removeEventListener("touchstart",i)}}),[e,i])};var dr,ur=n(7609);function hr(e,t,n,i){dr||(dr="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:dr,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const fr=()=>{const[e,t]=(0,Oe.useState)(""),[n,i]=(0,Oe.useState)(!1),o=(0,Pe.wA)();return hr("p",{},void 0,hr("input",{style:{display:"inline-block",width:"100%",maxWidth:"18em"},readOnly:!0,value:e}),e?hr("button",{type:"button",onClick:()=>{(0,r.A)(e),o((0,d.me)("Kopyalandı"))}},"cobtn","Kopyala"):hr("button",{type:"button",onClick:async()=>{i(!0);const e=await(0,W.yU)();e.iid&&t(e.iid),i(!1)}},"subtn",n?"...":"IID Al"))},pr=Oe.memo(fr);var mr,vr,gr,yr,wr,br,kr,Sr,Er,Cr,Tr,xr,Nr,Ir,Ar,_r,Lr,Or,Pr,$r,Rr,Dr,Mr,zr,Hr,Gr,Vr,Wr,Ur,Fr,Br,Kr,Yr,jr,qr,Xr,Zr,Qr,Jr,eo,to,no,io,ro,oo;function ao(e,t,n,i){oo||(oo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:oo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var so,lo,co=n(5384);function uo(e,t,n,i){lo||(lo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:lo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ho=Oe.memo((e=>{let{title:t,keyBind:n,value:i,onToggle:r,children:o,deactivated:a}=e;return uo("div",{className:"setitem"},void 0,uo("div",{className:"setrow"},void 0,uo("h3",{className:"settitle"},void 0,t," ",n&&uo("kbd",{},void 0,n)),uo(co.A,{checked:i,onChange:r,disabled:a})),uo("div",{className:"modaldesc"},void 0,o),so||(so=uo("div",{className:"modaldivider"})))}),((e,t)=>e.value===t.value));var fo;function po(e,t,n,i){fo||(fo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:fo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const mo=function(){const[e,t]=(0,Oe.useState)(window.ssv.lang),[n,i]=(0,Oe.useState)("xx");return(0,Oe.useEffect)((()=>{const{langs:t}=window.ssv;for(let n=0;n<t.length;n+=1){const[r,o]=t[n];if(r===e)return void i(o)}}),[e]),navigator.cookieEnabled?po("div",{style:{textAlign:"right"}},void 0,po("span",{},void 0,po("select",{value:e,onChange:e=>{const n=e.target;t(n.options[n.selectedIndex].value)}},void 0,window.ssv.langs.map((e=>{let[t]=e;return po("option",{value:t},t,t.toUpperCase())})))),"  ",po("span",{},void 0,po("img",{style:{height:"1em",imageRendering:"crisp-edges"},alt:"",src:`/cf/${n}.gif`})),po("button",{type:"submit",style:{display:"block",margin:5},onClick:()=>{const t=new Date;t.setTime(t.getTime()+24*c.Lp);let{hostname:n}=window.location;n=n.lastIndexOf(".")!==n.indexOf(".")?n.slice(n.indexOf(".")):`.${n}`,document.cookie=`plang=${e};expires=${t.toUTCString()};path=/;domain=${n}`,window.location.reload()}},void 0,"Kaydet")):null};var vo;function go(e,t,n,i){vo||(vo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:vo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const yo=e=>{let{enabled:t,title:n,canvasId:i,x:r,y:a,width:s,height:c,imageId:d,startEditing:u}=e;const h=(0,Oe.useRef)(),f=(0,Pe.d4)((e=>e.canvas.canvases)),p=(0,Pe.wA)();return(0,Oe.useEffect)((()=>{(async()=>{if(!d||!h.current)return;const e=await X.getTemplate(d);if(!e)return;const t=await createImageBitmap(e);h.current.getContext("bitmaprenderer").transferFromImageBitmap(t),t.close()})()}),[d]),go("div",{className:t?"tmpitm":"tmpitm disabled",style:{cursor:"pointer"},onClick:()=>p(l(n,{enabled:!t}))},void 0,go("div",{className:"tmpitm-preview"},void 0,Oe.createElement("canvas",{className:"tmpitm-img",ref:h,key:"showimg",width:s,height:c})),go("div",{className:"tmpitm-desc"},void 0,go("h4",{},void 0,n),go("p",{},void 0,"Tuval",": ",go("span",{},void 0,f[i]?.title)),go("p",{},void 0,"Kordinatlar",": ",go("span",{},void 0,`${r},${a}`)),go("p",{},void 0,"Boyutlar",": ",go("span",{},void 0,`${s} x ${c}`))),go("div",{className:"tmpitm-actions"},void 0,go("button",{onClick:e=>{e.stopPropagation(),u(n)},type:"button"},void 0,"Düzenle"),go("button",{onClick:e=>{e.stopPropagation(),p((0,o.fX)(i)),p((0,o.Dj)([r+s/2,a+c/2]))},type:"button"},void 0,"Git")))},wo=Oe.memo(yo);var bo;function ko(e,t,n,i){bo||(bo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:bo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const So=e=>{let{title:t,canvasId:n,x:i,y:r,imageId:o,stopEditing:a}=e;const[s]=(0,Oe.useMemo)((()=>[Number.isNaN(parseInt(i,10))||Number.isNaN(parseInt(r,10))?null:[i,r]]),[i,r]),[l,c]=(0,Oe.useState)(s),[d,u]=(0,Oe.useState)(null),[h,f]=(0,Oe.useState)(t||""),[p,m]=(0,Oe.useState)(null),[v,g]=(0,Oe.useState)(!0),y=(0,Oe.useRef)(),w=(0,Oe.useRef)(),[k,S,E]=(0,Pe.d4)((e=>[e.canvas.canvasId,e.canvas.canvases,e.templates.list]),Pe.bN),[C,T]=(0,Oe.useState)(n??k);(0,Oe.useEffect)((()=>{(async()=>{if(!o||!y.current)return;const e=await X.getTemplate(o);if(!e)return;const t=await createImageBitmap(e),n=y.current,{width:i,height:r}=t;n.width=i,n.height=r,n.getContext("bitmaprenderer").transferFromImageBitmap(t),u([i,r]),t.close()})()}),[o]),(0,Oe.useEffect)((()=>{p&&y.current&&(async()=>{const e=await createImageBitmap(p),t=y.current,{width:n,height:i}=e;t.width=n,t.height=i,t.getContext("bitmaprenderer").transferFromImageBitmap(e),u([n,i]),e.close()})()}),[p]);const x=y.current&&(p||o)&&v&&l&&h&&d;return ko("div",{className:"tmpitm"},void 0,ko("div",{className:"tmpitm-preview"},void 0,ko("div",{style:{width:"100%",height:"100%"}},void 0,Oe.createElement("canvas",{className:"tmpitm-img",ref:y,key:"editimg",style:{opacity:.4}})),ko("div",{className:"centered-on-img modallink",onClick:()=>w.current?.click()},void 0,"Dosya Seç"),Oe.createElement("input",{type:"file",key:"hinpt",accept:"image/*",ref:w,style:{display:"none"},onChange:e=>{u(null),m(e.target.files?.[0])}})),ko("div",{className:"tmpitm-desc"},void 0,ko("h4",{},void 0,ko("input",{value:h,style:{width:"10em"},type:"text",onChange:e=>{const t=e.target.value;g(!E.some((e=>e.title===t))),f(e.target.value)},placeholder:"Şablon Adı"})),ko("p",{},void 0,"Tuval",": ",ko("span",{},void 0,ko("select",{value:C,onChange:e=>{const t=e.target;T(t.options[t.selectedIndex].value)}},void 0,Object.keys(S).filter((e=>!S[e].v&&!S[e].ed)).map((e=>ko("option",{value:e},e,S[e].title)))))),ko("p",{},void 0,"Kordinatlar",": ",ko("span",{},void 0,ko("input",{type:"text",defaultValue:l&&l.join("_"),style:{display:"inline-block",maxWidth:"8em"},placeholder:"X_Y or URL",onChange:e=>{const t=(0,b.Ot)(e.target.value.trim());t&&(e.target.value=t.join("_")),c(t)}}))),ko("p",{},void 0,"Boyutlar",": ",ko("span",{},void 0,d?d.join(" x "):"N/A"))),ko("div",{className:"tmpitm-actions"},void 0,t&&ko("button",{onClick:()=>{a(t),X.deleteTemplate(t)},type:"button"},void 0,"Sil"),ko("button",{onClick:()=>a(h),type:"button"},void 0,"Geri Dön"),ko("button",{disabled:!x,onClick:async()=>{if(!x)return;const[e,s]=l;t?(p&&o&&await X.updateFile(o,p),!t||t===h&&i===e&&r===s&&n===C||X.changeTemplate(t,{title:h,canvasId:C,x:e,y:s})):await X.addFile(p,h,C,e,s),a(t)},type:"button"},void 0,"Kaydet")))},Eo=Oe.memo(So);var Co,To;function xo(e,t,n,i){To||(To="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:To,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const No=()=>{const[e,t]=(0,Oe.useState)(!1),[n,i,r,o,a,s]=(0,Pe.d4)((e=>[e.templates.list,e.templates.ovEnabled,e.templates.oSmallPxls,e.templates.oOpacity,e.templates.oRightShift,e.user.isOnMobile]),Pe.bN),[l,c]=(0,Oe.useState)([]),d=(0,Oe.useCallback)((()=>t(!1)),[]),u=(0,Oe.useRef)(),h=(0,Pe.wA)(),f=(0,Oe.useCallback)((e=>{const t=n.findIndex((t=>t.title===e)),i=l.indexOf(t);c(-1===i?[...l,t]:l.toSpliced(i,1))}),[n,l]);return Oe.createElement(Oe.Fragment,null,xo("h2",{},void 0,"Şablonlar"),xo("p",{},void 0,"Sürekli tek bir renk atmaktan sıkıldın mı? Bir çizim yapmak istedin ancak piksel sayarak çizmek istemiyor musun? Şablonlar sana bu konuda yardım olacak! Şablonlar tuvalin üzerinde istediğiniz resmi koymanızı ve böylece rahatlıkla çizim yapmanızı sağlar. Şablondaki bir piksel tuvaldeki bir piksele denk gelecektir."),xo(ho,{title:"Overlay'i Etkinleştir",keyBind:"T",value:i,onToggle:()=>h({type:"s/TGL_OVENABLED"})},void 0,"Şablonları tuval üzerinde göster."),xo(ho,{title:"Yakınlaştırmada Pikselleri Küçült",value:r,onToggle:()=>h({type:"s/TGL_SMALLPXLS"})},void 0,"Büyük ölçeklerde şablonun piksellerini küçük kareler halinde göster."),xo("div",{className:"setitem"},void 0,xo("div",{className:"setrow"},void 0,xo("h3",{className:"settitle"},void 0,"Overlay Opaklığı"),xo("div",{style:{textAlign:"right"}},void 0,xo("input",{type:"number",value:o,style:{maxWidth:"6em"},step:"1",min:"10",max:"100",onChange:e=>h({type:"s/SET_O_OPACITY",opacity:e.target.value})}))),xo("div",{className:"modaldesc"},void 0,"Overlay'in yüzde olarak opaklığı."),Co||(Co=xo("div",{className:"modaldivider"}))),!s&&xo(ho,{title:"Sağ-Shift ile Otomatik Boyama",value:a,onToggle:()=>h({type:"s/TGL_RIGHTSHIFT"})},void 0,"Sağ-shift ile şablondan otomatik boya, geçmiş yerine."),n.map(((e,t)=>{let{enabled:n,imageId:i,canvasId:r,title:o,x:a,y:s,width:c,height:d}=e;return l.includes(t)?xo(Eo,{enabled:n,title:o,imageId:i,canvasId:r,x:a,y:s,stopEditing:f},t):xo(wo,{enabled:n,title:o,imageId:i,canvasId:r,x:a,y:s,width:c,height:d,startEditing:f},t)})),e&&xo(Eo,{stopEditing:d}),e?xo("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>d()},void 0," ","Şablon Eklemekten Vazgeç"):xo("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>t(!0)},void 0," ","Şablon Ekle"),n.some((e=>e.enabled))&&xo(Oe.Fragment,{},"exps"," | ",xo("span",{role:"button",tabIndex:-1,className:"modallink",onClick:async()=>{const e=await X.exportEnabledTemplates();e&&zt()(JSON.stringify(e),"PixelplanetTemplates.json")}},void 0,"Etkin olan şablonları dışa aktar"))," | ",xo("span",{role:"button",tabIndex:-1,className:"modallink",onClick:async()=>u.current?.click()},void 0,"Şablonları içe aktar"),Oe.createElement("input",{type:"file",key:"impin",ref:u,style:{display:"none"},onChange:e=>{X.importTemplates(e.target.files?.[0])}}))};var Io,Ao,_o;function Lo(e,t,n,i){_o||(_o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:_o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Oo=function(){const[e,t]=(0,Oe.useState)(""),[n,i]=(0,Oe.useState)(""),[r,o]=(0,Oe.useState)([]),[a,s]=(0,Oe.useState)(!1);return(0,Oe.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("checkpoints"))||[];o(e)}),[]),Lo("div",{},void 0,Io||(Io=Lo("h2",{},void 0,"Checkpoints")),Lo("div",{style:{display:"flex",alignItems:"center"}},void 0,Lo("div",{style:{marginRight:"20px"}},void 0,Lo("h3",{style:{marginLeft:"20px"}},void 0,"Saved Checkpoints"),Lo("ul",{},void 0,r.map(((e,t)=>Lo("li",{},t,Lo("span",{},void 0,e.name," - ",Lo("a",{href:e.location},void 0,e.location)),Lo("button",{onClick:()=>(e=>{const t=[...r];t.splice(e,1),o(t),localStorage.setItem("checkpoints",JSON.stringify(t))})(t),style:{marginLeft:"5px"}},void 0,"Delete")))))),a&&Lo("div",{},void 0,Ao||(Ao=Lo("h3",{},void 0,"New Checkpoint")),Lo("label",{},void 0,"Checkpoint Name:",Lo("input",{type:"text",value:e,onChange:e=>t(e.target.value)})),Lo("label",{},void 0,"Checkpoint Coordinates:",Lo("input",{type:"text",value:n,onChange:e=>i(e.target.value)})),Lo("div",{},void 0,Lo("button",{onClick:()=>{const a={name:e,location:n},l=[...r,a];o(l),localStorage.setItem("checkpoints",JSON.stringify(l)),t(""),i(""),s(!1)}},void 0,"Save Checkpoint"),Lo("button",{onClick:()=>s(!1)},void 0,"Cancel"))),!a&&Lo("button",{onClick:()=>s(!0)},void 0,"New Checkpoint")))};var Po,$o,Ro,Do,Mo,zo;function Ho(e,t,n,i){zo||(zo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:zo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Go=e=>{let{title:t,values:n,selected:i,onSelect:r,icon:o,children:a}=e;return Ho("div",{className:"setitem"},void 0,Ho("div",{className:"setrow"},void 0,Ho("h3",{className:"settitle"},void 0,t),o&&Ho("img",{alt:"",src:o}),Ho("select",{value:i,onChange:e=>{const t=e.target;r(t.options[t.selectedIndex].value)}},void 0,n.map((e=>Ho("option",{value:e},e,e))))),Ho("div",{className:"modaldesc"},void 0,a),Po||(Po=Ho("div",{className:"modaldivider"})))},Vo=()=>{const[e,t,n,i,r,a,s,l,c,d,u,h]=(0,Pe.d4)((e=>[e.gui.showGrid,e.gui.showPixelNotify,e.gui.showMvmCtrls,e.gui.autoZoomIn,e.gui.compactPalette,e.gui.isPotato,e.gui.isLightGrid,e.gui.style,e.gui.mute,e.gui.chatNotify,e.canvas.isHistoricalView,e.templates.available]),Pe.bN),f=(0,Pe.wA)(),p=window.AudioContext||window.webkitAudioContext;return Ho("div",{className:"content"},void 0,Ho(ho,{title:"Izgarayı Göster",keyBind:"G",value:e,onToggle:()=>f((0,o.Db)())},void 0,"Pikselleri ayırt edebilmeniz için piksel aralarına çizgi çizer."),Ho(ho,{title:"Piksel Etkinliğini Göster",keyBind:"X",value:t,onToggle:()=>f((0,o.y1)())},void 0,"Diğerlerini piksel attığı yerleri bir daire ile belli eder."),Ho(ho,{title:"Hareket Kontrollerini Her Zaman Göster",keyBind:"N",value:n,onToggle:()=>f((0,o.NK)())},void 0,"Hareket tuşlarını sürekli olarak görünebilir tut"),Ho(ho,{title:"Oyun Seslerini Kapat",keyBind:"M",deactivated:!p,value:!p||c,onToggle:()=>f((0,o.K8)())},void 0,["Tüm ses efektleri devre dışı bırakır.",!p&&Ho("p",{className:"warn"},void 0,"Tarayıcınız ses oynatmamız için AudioContext'i kullanmamıza izin vermiyor. Bizi engelleyen bir gizlilik özelliğiniz mi var?")]),Ho(ho,{title:"Sohbet Bildirimlerini Aç",value:d,onToggle:()=>f((0,o.kK)())},void 0,"Sohbette yeni iletilerde sesle uyar"),Ho(ho,{title:"Otomatik Yakınlaştırma",value:i,onToggle:()=>f((0,o.Kr)())},void 0,"Bir yere tıkladığınız zaman eğer uzaklaştırılmışsa piksel atmak yerine yakınlaştırır."),Ho(ho,{title:"Sıklaştırılmış Palet",value:r,onToggle:()=>f((0,o.Px)())},void 0,"Ekranda yer açmak için paleti küçük bir dörtgen haline getirir."),Ho(ho,{title:"Patates Modu",value:a,onToggle:()=>f((0,o.$H)())},void 0,"Bir patates üzerinden oynayanlar için."),Ho(ho,{title:"Beyaz Izgara",value:s,onToggle:()=>f((0,o.Lg)())},void 0,"Izgarayı siyah yerine beyaz olarak gösterir."),window.ssv&&window.ssv.backupurl&&Ho(ho,{title:"Geçmiş Görünümü",value:u,keyBind:"H",onToggle:()=>f((0,o.e8)())},void 0,"Tuvalin eskiden nasıl göründüğünü gösterir."),window.ssv&&window.ssv.availableStyles&&Ho(Go,{title:"Temalar",values:Object.keys(window.ssv.availableStyles),selected:l,onSelect:e=>f((0,o.mL)(e))},void 0,"Oyunun nasıl görüneceğidir."),window.ssv&&navigator.cookieEnabled&&window.ssv.langs&&Ho("div",{className:"setitem"},void 0,Ho("div",{className:"setrow"},void 0,Ho("h3",{className:"settitle"},void 0,"Dil Seç"),$o||($o=Ho(mo,{})))),Ro||(Ro=Ho("div",{className:"setitem"},void 0,Ho("div",{className:"setrow"},void 0,Ho(Oo,{})))),Do||(Do=Ho("div",{className:"modaldivider"})),h&&(Mo||(Mo=Ho(No,{}))))},Wo=Oe.memo(Vo),Uo=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;function Fo(e){return e?e.length<5?"E-postanız en az 5 karakterden oluşmalıdır.":e.length>40?"E-postanız 40 karakterden uzun olamaz.":-1===e.indexOf(".")?"E-postanız en az bir nokta içermelidir":1!==e.split("").filter((e=>"@"===e)).length?"E-postanız @ içermelidir":!Uo.test(e)&&"Your Email looks shady":"E-posta adresi boş olamaz."}function Bo(e){return e?e.length<2?"Kullanıcı adınız en az 2 karakterden oluşmalıdır":e.length>26?"Kullanıcı adınız 26 karakterden az olmalıdır":(-1!==e.indexOf("@")||-1!==e.indexOf("/")||-1!==e.indexOf("\\")||-1!==e.indexOf(">")||-1!==e.indexOf("<")||-1!==e.indexOf("#"))&&"Kullanıcı adınız @, /, \\ veya # gibi geçersiz karakterler bulunduruyor":"Kullanıcı adınız boş olamaz."}function Ko(e){return e?e.length<6?"Parolanız en az 6 karakterden oluşmalıdır.":e.length>60&&"Parolanız 60 karakterden kısa olmalıdır.":"Bir parola girilmedi."}var Yo,jo;function qo(e,t,n,i){jo||(jo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:jo,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Xo={display:"inline-block",width:"75%",maxWidth:"35em"},Zo=()=>{const[e,t]=(0,Oe.useState)(""),[n,i]=(0,Oe.useState)(""),[r,a]=(0,Oe.useState)(!1),[s,l]=(0,Oe.useState)([]),c=(0,Pe.wA)();return qo("form",{onSubmit:async t=>{if(t.preventDefault(),r)return;const i=function(e,t){const n=[],i=-1!==e.indexOf("@")?Fo(e):Bo(e);i&&n.push(i);const r=Ko(t);return r&&n.push(r),n}(e,n);if(i.length>0)return void l(i);a(!0);const{errors:s,me:d}=await(0,W.D8)(e,n);a(!1),s?l(s):c((0,o.Lx)(d))}},void 0,s.map((e=>qo("p",{},e,qo("span",{},void 0,"Hata"),": ",e))),qo("input",{value:e,style:Xo,onChange:e=>t(e.target.value),type:"text",placeholder:"Kullanıcı Adı veya E-Posta"}),Yo||(Yo=qo("br",{})),qo("input",{value:n,style:Xo,onChange:e=>i(e.target.value),type:"password",placeholder:"Parola"}),qo("p",{},void 0,qo("button",{type:"submit"},void 0,r?"...":"Giriş Yap")))},Qo=Oe.memo(Zo);var Jo,ea,ta,na,ia,ra,oa,aa;function sa(e,t,n,i){aa||(aa="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:aa,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const la={marginRight:5},ca=()=>{const e=Je();return sa("div",{style:{textAlign:"center"}},void 0,sa("p",{},void 0,"Daha fazla özellik ve istatistik için giriş yapın."),Jo||(Jo=sa("br",{})),sa("h2",{},void 0,"Kullanıcı adı veya E-Posta ile giriş yap:"),ea||(ea=sa(Qo,{})),sa("p",{className:"modallink",onClick:()=>e("FORGOT_PASSWORD"),role:"presentation"},void 0,"Parolamı Unuttum."),sa("h2",{},void 0,"veya bunlar ile giriş yap:"),ta||(ta=sa("a",{href:"/api/auth/discord"},void 0,sa("img",{style:la,width:32,src:"/discordlogo.svg",alt:"Discord"}))),na||(na=sa("a",{href:"/api/auth/google"},void 0,sa("img",{style:la,width:32,src:"/googlelogo.svg",alt:"Google"}))),ia||(ia=sa("a",{href:"/api/auth/facebook"},void 0,sa("img",{style:la,width:32,src:"/facebooklogo.svg",alt:"Facebook"}))),ra||(ra=sa("a",{href:"/api/auth/vk"},void 0,sa("img",{style:la,width:32,src:"/vklogo.svg",alt:"VK"}))),oa||(oa=sa("a",{href:"/api/auth/reddit"},void 0,sa("img",{style:la,width:32,src:"/redditlogo.svg",alt:"Reddit"}))),sa("h2",{},void 0,"veya buradan kayıt ol:"),sa("button",{type:"button",onClick:()=>e("REGISTER")},void 0,"Kayıt Ol"))},da=Oe.memo(ca);var ua;function ha(e,t,n,i){ua||(ua="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:ua,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const fa=e=>{let{onClick:t,active:n,label:i}=e,r="tab-list-item";return n&&(r+=" active"),ha("li",{role:"presentation",className:r,onClick:()=>t(i)},void 0,i)};var pa;function ma(e,t,n,i){pa||(pa="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:pa,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const va=e=>{let{children:t,activeTab:n,setActiveTab:i}=e;return ma("div",{className:"tabs"},void 0,ma("ol",{className:"tab-list"},void 0,t.map((e=>{if(!e.props)return;const{label:t}=e.props;return ma(fa,{active:n===t,label:t,onClick:e=>i(e)},t)}))),ma("div",{className:"tab-content"},void 0,t.map((e=>{if(e.props&&e.props.label===n)return e.props.children}))))};var ga;function ya(e,t,n,i){ga||(ga="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:ga,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const wa=()=>{const[e,t]=(0,Oe.useState)(!1),[n,i]=(0,Oe.useState)(null),r=(0,Pe.d4)((e=>e.user.messages));return r?ya("div",{style:{paddingLeft:"5%",paddingRight:"5%"}},void 0,r.includes("not_verified")&&ya("p",{className:"usermessages"},void 0,"Lütfen E-posta adresini doğrula yoksa hesabın birkaç gün içerisinde silinebilir.",n?ya("span",{className:"modallink"},void 0,n):ya("span",{role:"button",tabIndex:-1,className:"modallink",onClick:async()=>{if(e)return;t(!0);const{errors:n}=await(0,W.mM)(),r=n?n[0]:"Sana yeni bir doğrulama postası gönderdik.";i(r)}},void 0,"Yeni bir doğrulama postası için buraya tıkla.")),r.map((e=>"not_verified"===e?null:ya("p",{className:"usermessages"},e,e)))):null},ba=Oe.memo(wa);var ka,Sa;function Ea(e,t,n,i){Sa||(Sa="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Sa,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ca(){const e=(0,Pe.d4)((e=>e.user.name)),t=(0,Pe.d4)((e=>e.user.id));let n=(0,Pe.d4)((e=>e.user.createdAt));const i=(0,Pe.d4)((e=>e.user.flag));return n&&(n=new Date(n).toLocaleString()),Ea("div",{style:{textAlign:"center",paddingLeft:"5%",paddingRight:"5%"}},void 0,ka||(ka=Ea(ba,{})),Ea("h3",{},void 0,"User Infos"),Ea("p",{},void 0,`Id: ${t}`),Ea("p",{},void 0,`Kullanıcı adınız: ${e}`),Ea("p",{},void 0,"Country: "," ",Ea("img",{style:{height:"1em",imageRendering:"crisp-edges"},alt:i,src:`/cf/${i}.gif`})),Ea("p",{},void 0,`Registration: ${n}`))}const Ta=Oe.memo(Ca);var xa;function Na(e,t,n,i){xa||(xa="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:xa,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ia(){const e=e=>{let{text:t,value:n,rank:i}=e;return Na("p",{},void 0,Na("span",{className:"stattext"},void 0,i?`${t}: #`:`${t}: `)," ",Na("span",{className:"statvalue"},void 0,(0,b.um)(n)))},t=(0,Pe.d4)((e=>({totalPixels:e.ranks.totalPixels,dailyTotalPixels:e.ranks.dailyTotalPixels,ranking:e.ranks.ranking,dailyRanking:e.ranks.dailyRanking})),Pe.bN);return Na("div",{style:{textAlign:"center",paddingLeft:"5%",paddingRight:"5%"}},void 0,Na("h3",{},void 0,"User Stats"),Na(e,{text:"Bugün Atılan Pikseller",value:t.dailyTotalPixels}),Na(e,{text:"Günlük Sıralama",value:t.dailyRanking,rank:!0}),Na(e,{text:"Atılan Pikseller",value:t.totalPixels}),Na(e,{text:"Genel Sıralama",value:t.ranking,rank:!0}))}const Aa=Oe.memo(Ia);var _a,La,Oa,Pa;function $a(e,t,n,i){Pa||(Pa="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Pa,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ra=e=>{let{done:t}=e;const[n,i]=(0,Oe.useState)(""),[r,a]=(0,Oe.useState)(""),[s,l]=(0,Oe.useState)(""),[c,d]=(0,Oe.useState)(!1),[u,h]=(0,Oe.useState)(!1),[f,p]=(0,Oe.useState)([]),m=(0,Pe.d4)((e=>e.user.mailreg)),v=(0,Pe.wA)();return c?$a("div",{className:"inarea"},void 0,$a("p",{className:"modalmessage"},void 0,"Parolanız başarıyla değiştirildi."),$a("button",{type:"button",onClick:t},void 0,"Close")):$a("div",{className:"inarea"},void 0,$a("form",{onSubmit:async e=>{if(e.preventDefault(),u)return;const t=function(e,t,n,i){const r=[];if(e){const e=Ko(t);e&&r.push(e)}if(n!==i)return r.push("Parolalar uyuşmuyor."),r;const o=Ko(n);return o&&r.push(o),r}(m,n,r,s);if(p(t),t.length)return;h(!0);const{errors:i}=await(0,W.D_)(r,n);if(i)return p(i),void h(!1);v((0,o.MM)(!0)),d(!0)}},void 0,f.map((e=>$a("p",{className:"errormessage"},e,$a("span",{},void 0,"Hata"),": ",e))),m&&$a("input",{value:n,onChange:e=>i(e.target.value),type:"password",placeholder:"Eski Parola"}),_a||(_a=$a("br",{})),$a("input",{value:r,onChange:e=>a(e.target.value),type:"password",placeholder:"Yeni Parola"}),La||(La=$a("br",{})),$a("input",{value:s,onChange:e=>l(e.target.value),type:"password",placeholder:"Yeni Parolayı Doğrula"}),Oa||(Oa=$a("br",{})),$a("button",{type:"submit"},void 0,u?"...":"Kaydet"),$a("button",{type:"button",onClick:t},void 0,"Geri Dön")))},Da=Oe.memo(Ra);var Ma,za;function Ha(e,t,n,i){za||(za="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:za,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ga=e=>{let{done:t}=e;const[n,i]=(0,Oe.useState)(""),[r,a]=(0,Oe.useState)(!1),[s,l]=(0,Oe.useState)([]),c=(0,Pe.wA)();return Ha("div",{className:"inarea"},void 0,Ha("form",{onSubmit:async e=>{if(e.preventDefault(),r)return;const i=function(e){const t=[],n=Bo(e);return n&&t.push(n),t}(n);if(i.length>0)return void l(i);a(!0);const{errors:s}=await(0,W.vH)(n);a(!1),s?l(s):(c((0,o.i)(n)),t())}},void 0,s.map((e=>Ha("p",{className:"errormessage"},e,Ha("span",{},void 0,"Hata"),": ",e))),Ha("input",{value:n,onChange:e=>i(e.target.value),type:"text",placeholder:"Yeni Kullanıcı Adı"}),Ma||(Ma=Ha("br",{})),Ha("button",{type:"submit"},void 0,r?"...":"Kaydet"),Ha("button",{type:"button",onClick:t},void 0,"Geri Dön")))};var Va,Wa,Ua;function Fa(e,t,n,i){Ua||(Ua="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ua,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ba=e=>{let{done:t}=e;const[n,i]=(0,Oe.useState)(""),[r,o]=(0,Oe.useState)(""),[a,s]=(0,Oe.useState)(!1),[l,c]=(0,Oe.useState)(!1),[d,u]=(0,Oe.useState)([]);return l?Fa("div",{className:"inarea"},void 0,Fa("p",{className:"modalmessage"},void 0,"E-Posta başarılı bir şekilde değiştirildi. Sana bir doğrulama postası gönderdik,             lütfen yeni E-Posta adresin ile doğrula."),Fa("button",{type:"button",onClick:t},void 0,"Close")):Fa("div",{className:"inarea"},void 0,Fa("form",{onSubmit:async e=>{if(e.preventDefault(),a)return;const t=function(e,t){const n=[],i=Ko(t);i&&n.push(i);const r=Fo(e);return r&&n.push(r),n}(r,n);if(t.length>0)return void u(t);s(!0);const{errors:i}=await(0,W.zp)(r,n);s(!1),i?u(i):c(!0)}},void 0,d.map((e=>Fa("p",{className:"errormessage"},e,Fa("span",{},void 0,"Hata"),": ",e))),Fa("input",{value:n,onChange:e=>i(e.target.value),type:"password",placeholder:"Parola"}),Va||(Va=Fa("br",{})),Fa("input",{value:r,onChange:e=>o(e.target.value),type:"text",placeholder:"Yeni E-posta"}),Wa||(Wa=Fa("br",{})),Fa("button",{type:"submit"},void 0,a?"...":"Kaydet"),Fa("button",{type:"button",onClick:t},void 0,"Geri Dön")))};var Ka,Ya;function ja(e,t,n,i){Ya||(Ya="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ya,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const qa=e=>{let{done:t}=e;const[n,i]=(0,Oe.useState)(""),[r,a]=(0,Oe.useState)(!1),[s,l]=(0,Oe.useState)([]),c=(0,Pe.wA)();return ja("div",{className:"inarea",style:{backgroundColor:"#ff6666"}},void 0,ja("form",{onSubmit:async e=>{if(e.preventDefault(),r)return;const t=function(e){const t=[],n=Ko(e);return n&&t.push(n),t}(n);if(t.length>0)return void l(t);a(!0);const{errors:i}=await(0,W.Yh)(n);a(!1),i?l(i):c((0,o.y4)())}},void 0,s.map((e=>ja("p",{className:"errormessage"},e,ja("span",{},void 0,"Hata"),": ",e))),ja("input",{value:n,onChange:e=>i(e.target.value),type:"password",placeholder:"Parola"}),Ka||(Ka=ja("br",{})),ja("button",{type:"submit"},void 0,r?"...":"Evet, Hesabımı Sil!"),ja("button",{type:"button",onClick:t},void 0,"Geri Dön")))};var Xa,Za;function Qa(e,t,n,i){Za||(Za="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Za,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ja=e=>[e.chat.blocked,e.user.blockDm,e.user.priv,e.fetching.fetchingApi],es=e=>{let{done:t}=e;const[n,i,r,o]=(0,Pe.d4)(Ja,Pe.bN),a=(0,Pe.wA)();return Qa("div",{className:"inarea"},void 0,Qa(ho,{title:"DM'leri Engelle",value:i,onToggle:()=>{o||a((0,d.RB)(!i))}},void 0,"Tüm Gizli Mesajları Engelle"),Qa(ho,{title:"Gizli",value:r,onToggle:()=>{o||a((0,d.Hw)(!r))}},void 0,"Beni istatistiklerde gösterme"),Qa("h3",{style:{textAlign:"left",marginLeft:10}},void 0,"Kullanıcıların Engelini Kaldır"),n.length?Qa("span",{className:"unblocklist"},void 0,n.map((e=>Qa("div",{role:"button",tabIndex:0,onClick:()=>{o||a((0,d.jF)(e[0],e[1],!1))}},e[0],`⦸ ${e[1]}`)))):Qa("p",{},void 0,"Engellediğin kullanıcı yok"),Xa||(Xa=Qa("div",{className:"modaldivider"})),Qa("button",{type:"button",onClick:t,style:{margin:10}},void 0,"Done"))};var ts,ns,is,rs,os,as,ss,ls,cs,ds,us;function hs(e,t,n,i){us||(us="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:us,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const fs={CHANGE_NAME:Oe.memo(Ga),CHANGE_MAIL:Oe.memo(Ba),CHANGE_PASSWORD:Da,DELETE_ACCOUNT:Oe.memo(qa),SOCIAL_SETTINGS:Oe.memo(es)};function ps(){const[e,t]=(0,Oe.useState)("NONE"),n=(0,Pe.wA)(),i=(0,Oe.useCallback)((async()=>{await(0,W.SK)()&&n((0,o.y4)())}),[n]),r=(0,Pe.d4)((e=>e.user.mailreg)),a=fs[e];return hs("div",{style:{textAlign:"center",paddingLeft:"5%",paddingRight:"5%"}},void 0,ts||(ts=hs("br",{})),hs("span",{role:"button",tabIndex:-1,className:"modallink",onClick:i},void 0," ","Çıkış Yap"),ns||(ns=hs("span",{className:"hdivider"}))," ",is||(is=hs("br",{})),hs("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>t("CHANGE_NAME")},void 0," ","Kullanıcı Adı Değiştir"),rs||(rs=hs("span",{className:"hdivider"}))," ",os||(os=hs("br",{})),r&&hs(Oe.Fragment,{},"mc",hs("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>t("CHANGE_MAIL")},void 0," ","E-Posta Adresi Değiştir"),as||(as=hs("span",{className:"hdivider"})))," ",ss||(ss=hs("br",{})),hs("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>t("CHANGE_PASSWORD")},void 0," ","Parola Değiştir"),ls||(ls=hs("span",{className:"hdivider"})),cs||(cs=hs("br",{})),hs("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>t("DELETE_ACCOUNT")},void 0," ","Hesabı Sil"),ds||(ds=hs("br",{})),hs("span",{role:"button",tabIndex:-1,className:"modallink",onClick:()=>t("SOCIAL_SETTINGS")},void 0," ","Sosyal Ayarlar"),a&&hs(a,{done:()=>t(null)}))}var ms,vs,gs;function ys(e,t,n,i){gs||(gs="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:gs,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ws={Infos:Ta,Stats:Aa,Config:Oe.memo(ps)},bs=()=>{const[e,t]=(0,Oe.useState)("Infos"),n=ws[e],i=Object.keys(ws);return Oe.createElement(Oe.Fragment,null,ys("div",{className:"content",style:{overflowWrap:"anywhere"}},void 0,i.map(((n,r)=>ys(Oe.Fragment,{},n,ys("span",{role:"button",tabIndex:-1,className:e===n?"modallink selected":"modallink",onClick:()=>t(n)},void 0,n),r!==i.length-1&&(ms||(ms=ys("span",{className:"hdivider"})))))),vs||(vs=ys("div",{className:"modaldivider"}))),n&&ys(n,{}))},ks=Oe.memo(bs);var Ss,Es,Cs,Ts,xs,Ns,Is,As,_s,Ls;function Os(e,t,n,i){Ls||(Ls="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ls,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ps=Oe.lazy((()=>n.e(636).then(n.bind(n,9288)))),$s=Oe.lazy((()=>n.e(5).then(n.bind(n,7678)))),Rs=Oe.lazy((()=>n.e(662).then(n.bind(n,6037)))),Ds=Oe.lazy((()=>n.e(133).then(n.bind(n,890)))),Ms=()=>{const e=(0,Pe.d4)((e=>e.user.name)),t=(0,Pe.d4)((e=>e.user.userlvl)),n=(0,Pe.d4)((e=>e.ranks.lastFetch)),{args:i,setArgs:r,setTitle:o}=(0,Oe.useContext)(Ze),{activeTab:a="Profil"}=i,s=(0,Pe.wA)(),l=(0,Oe.useCallback)((e=>{r({activeTab:e}),o(e)}),[r,o]);return(0,yi.A)((()=>{Date.now()-3e5>n&&s((0,d.YK)())}),3e5),Os("div",{style:{textAlign:"center"}},void 0,Os(va,{activeTab:a,setActiveTab:l},void 0,Os("div",{label:"Profil"},void 0,e?Ss||(Ss=Os(ks,{})):Es||(Es=Os(da,{}))),Os("div",{label:"İstatistikler"},void 0,Cs||(Cs=Os(Oe.Suspense,{fallback:Os("div",{},void 0,"Loading...")},void 0,Os(Ps,{})))),Os("div",{label:"Dönüştürücü"},void 0,Ts||(Ts=Os(Oe.Suspense,{fallback:Os("div",{},void 0,"Loading...")},void 0,Os($s,{})))),Os("div",{label:"GlobalPixel Factions"},void 0,xs||(xs=Os(Oe.Suspense,{fallback:Os("div",{},void 0,"Loading...")},void 0,Os(Ds,{})))),t&&Os("div",{label:"Mod Araçları"},void 0,Os(Oe.Suspense,{fallback:Os("div",{},void 0,"Yükleniyor...")},void 0,Ns||(Ns=Os(Rs,{}))))),Is||(Is=Os("br",{})),"Consider joining us on Discord:"," ",As||(As=Os("a",{href:"./discord",target:"_blank"},void 0,"globalpixel.xyz/discord")),_s||(_s=Os("br",{})))},zs=Oe.memo(Ms);var Hs;function Gs(e,t,n,i){Hs||(Hs="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Hs,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Vs=()=>{const[e,t]=(0,Oe.useState)(""),[n,i]=(0,Oe.useState)([]),[r,a]=(0,Oe.useState)(Date.now()),s=(0,Pe.wA)(),l=Je();return Gs("div",{className:"content"},void 0,Gs("form",{style:{paddingLeft:"5%",paddingRight:"5%"},onSubmit:async n=>{if(n.preventDefault(),e)return;const r=n.target.name.value,c=n.target.email.value,d=n.target.password.value,u=n.target.confirmpassword.value,h=n.target.captcha.value,f=n.target.captchaid.value,p=function(e,t,n,i){const r=[],o=Fo(t);o&&r.push(o);const a=Bo(e);a&&r.push(a);const s=Ko(n);return s&&r.push(s),n!==i&&r.push("Passwords do not match"),r}(r,c,d,u);if(p.length>0)return void i(p);t(!0);const{errors:m,me:v}=await(0,W.Hi)(r,c,d,h,f);if(t(!1),m)return a(Date.now()),void i(m);s((0,o.Lx)(v)),l("USERAREA")}},void 0,Gs("p",{},void 0,"Yeni Hesap Oluşturun"),n.map((e=>Gs("p",{className:"errormessage"},e,Gs("span",{},void 0,"Hata"),": ",e))),Gs("h3",{},void 0,"Kullanıcı Adı",":"),Gs("input",{name:"name",className:"reginput",autoComplete:"username",type:"text",placeholder:"Kullanıcı Adı"}),Gs("h3",{},void 0,"E-Posta Adresi",":"),Gs("input",{name:"email",className:"reginput",autoComplete:"email",type:"text",placeholder:"E-Posta Adresi"}),Gs("h3",{},void 0,"Parola",":"),Gs("input",{name:"password",className:"reginput",autoComplete:"new-password",type:"password",placeholder:"Parola"}),Gs("h3",{},void 0,"Parolayı Onayla",":"),Gs("input",{name:"confirmpassword",className:"reginput",autoComplete:"new-password",type:"password",placeholder:"Parolayı Onayla"}),Gs("h3",{},void 0,"Captcha",":"),Gs(hi,{autoload:!1,width:60},r),Gs("button",{type:"submit"},void 0,e?"...":"Onayla"),Gs("button",{type:"button",onClick:()=>l("USERAREA")},void 0,"Geri Dön")))},Ws=Oe.memo(Vs);var Us,Fs,Bs,Ks,Ys,js,qs,Xs,Zs,Qs;function Js(e,t,n,i){Qs||(Qs="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Qs,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const el=e=>{let{canvasId:t,canvas:n,selCanvas:i,online:r}=e;return Js("div",{className:"cvbtn",onClick:()=>i(t),role:"button",tabIndex:0},void 0,Js("img",{className:"cvimg",alt:"preview",src:`/preview${t}.png`}),Js("div",{className:"modalcvtext"},void 0,Js("h4",{},void 0,n.title),r&&Js(Oe.Fragment,{},"online","Çevrimiçi Kullanıcılar",": ",Js("span",{className:"modalinfo"},void 0,r),Us||(Us=Js("br",{}))),Js("span",{className:"modalinfo"},void 0,n.desc),Fs||(Fs=Js("br",{})),"Bekleme Süresi",": ",Js("span",{className:"modalinfo"},void 0,n.pcd&&n.bcd!==n.pcd?Js("span",{},"cdf"," ",n.bcd/1e3,"s / ",n.pcd/1e3,"s"):Js("span",{},"cd"," ",n.bcd/1e3,"s")),Bs||(Bs=Js("br",{})),"Biriktirilebilir Süre",": ",Js("span",{className:"modalinfo"},void 0," ",n.cds/1e3,"s"),Ks||(Ks=Js("br",{})),"Sıralama",": ",Js("span",{className:"modalinfo"},void 0,n.ranked?"Evet":"Hayır"),Ys||(Ys=Js("br",{})),void 0!==n.req&&Js(Oe.Fragment,{},"req",Js("span",{},void 0,"Gereksinimler",":",js||(js=Js("br",{})),Js("span",{className:"modalinfo"},void 0,"number"==typeof n.req?Js("span",{},void 0,"Kullanıcı Hesabı"," "):null,n.req>0?Js("span",{},void 0," ",`ve ${n.req} piksel`," "):null,"top"===n.req&&Js("span",{},void 0,"Günlük Top10 Sıralaması"))),qs||(qs=Js("br",{}))),"Boyutlar",": ",Js("span",{className:"modalinfo"},void 0," ",n.size," x ",n.size,n.v?Xs||(Xs=Js("span",{},"voxsize"," x ",c.oy," Voxels")):Zs||(Zs=Js("span",{},"pxlsize"," Pixels")))))},tl=Oe.memo(el);var nl;function il(e,t,n,i){nl||(nl="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:nl,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const rl=()=>{const[e,t,n]=(0,Pe.d4)((e=>[e.canvas.canvases,e.gui.easterEgg,e.ranks.online]),Pe.bN),i=(0,Pe.wA)(),r=(0,Oe.useCallback)((e=>i((0,o.fX)(e))),[i]),a=Je();return il("div",{className:"content"},void 0,il("p",{},void 0,"Kullanmak istediğiniz tuvali buradan seçiniz.\nHer tuval özgün olup farklı renk paletleri, bekleme süreleri ve gereksinimleri vardır.\nArşivlenmiş tuvallere buradan ulaşabilirsiniz:"," ",il("span",{role:"button",tabIndex:0,className:"modallink",onClick:()=>a("ARCHIVE")},void 0,"Arşiv")),Object.keys(e).sort(((t,n)=>t===window.ssv.dc?-1:n===window.ssv.dc?1:(null!=e[t].linkcd&&(t=e[t].linkcd+.1),null!=e[n].linkcd&&(n=e[n].linkcd+.1),t-n))).map((i=>(!e[i].hid||t)&&!e[i].ed&&il(tl,{online:n[i],canvasId:i,canvas:e[i],selCanvas:r},i))),window.ssv?.backupurl&&Object.keys(e).some((t=>e[t].ed))&&Oe.createElement(Oe.Fragment,null,il("h3",{},void 0,"Eski Tuvaller (yalnız geçmiş)"),Object.keys(e).map((t=>e[t].ed&&il(tl,{online:n[t],canvasId:t,canvas:e[t],selCanvas:r},t)))))},ol=Oe.memo(rl);var al,sl,ll,cl;function dl(e,t,n,i){cl||(cl="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:cl,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var ul,hl=n(7715),fl=n(961);function pl(e,t,n,i){ul||(ul="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:ul,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const ml=e=>{let{args:t,close:n}=e;const i=(0,Pe.d4)((e=>e.chat.channels)),r=(0,Pe.d4)((e=>e.fetching.fetchingApi)),o=(0,Pe.wA)(),{name:a,uid:s,setChannel:l,addToInput:c}=t;return Oe.createElement(Oe.Fragment,null,pl("div",{role:"button",tabIndex:0,onClick:()=>{const e=`@[${(0,b.Xk)(a)}](${s})`;c(e),n()},style:{borderTop:"none"}},"ping","Ping"),pl("div",{role:"button",tabIndex:0,onClick:()=>{const e=Object.keys(i);for(let t=0;t<e.length;t+=1){const r=e[t];if(4===i[r].length&&i[r][3]===s)return l(r),void n()}r||o((0,d.aQ)({userId:s},l)),n()}},"dm","DM"),pl("div",{role:"button",tabIndex:-1,onClick:()=>{o((0,d.jF)(s,a,!0)),n()}},"block","Engelle"))};var vl;function gl(e,t,n,i){vl||(vl="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:vl,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const yl=e=>{let{args:t,close:n}=e;const i=(0,Pe.d4)((e=>e.chat.channels)),r=(0,Pe.d4)((e=>e.chatRead.mute)),{cid:a}=t,s=(0,Pe.wA)(),l=r.includes(a);return Oe.createElement(Oe.Fragment,null,gl("div",{role:"button",onClick:()=>{s(l?(0,o.k7)(a):(0,o.Bg)(a))},tabIndex:0,style:{borderTop:"none"}},"mute",(l?"✔":"✘")+" Sustur"),0!==i[a][1]&&gl("div",{role:"button",onClick:()=>{s((0,d.xs)(a)),n()},tabIndex:0},"leave","Kapat"))};var wl;function bl(e,t,n,i){wl||(wl="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:wl,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const kl=e=>{let{args:t,close:n}=e;const i=b.RN,{addToInput:r}=t;return Oe.createElement(Oe.Fragment,null,bl("span",{className:"emojiTitle"},void 0,"Emojis",bl("button",{style:{position:"absolute",right:"5px",cursor:"pointer"},onClick:()=>{n()}},void 0,"X")),bl("div",{className:"emojiContainer",style:{width:"200px",height:"180px"}},void 0,i.length>0&&i.map((e=>bl("span",{className:"emojispan"},void 0,bl("img",{className:"emoji",alt:"",title:e,src:`/emojis/${e}.gif`,onClick:()=>{r(`:${e}:`),n()}},e))))))};var Sl,El,Cl,Tl,xl,Nl,Il,Al;function _l(e,t,n,i){Al||(Al="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Al,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Ll=e=>{let{args:t,close:n}=e;const{addToInput:i}=t;return Oe.createElement(Oe.Fragment,null,_l("span",{className:"modTitle"},void 0,"Modtools for chat",_l("button",{style:{position:"absolute",right:"5px",cursor:"pointer"},onClick:()=>{n()}},void 0,"X")),_l("div",{className:"modContainer",style:{width:"200px",height:"180px"}},void 0,_l("div",{className:"muteOption"},void 0,Sl||(Sl=_l("span",{},void 0,"/mute Id: ")),El||(El=_l("input",{type:"text",id:"muteId"})),Cl||(Cl=_l("span",{},void 0," Minutes: ")),Tl||(Tl=_l("input",{type:"text",id:"muteMinutes"})),_l("button",{onClick:()=>{var e,t;e=document.getElementById("muteId").value,t=document.getElementById("muteMinutes").value,i(`/mute ${e} ${t}`),n()}},void 0,"Add")),xl||(xl=_l("br",{})),_l("div",{className:"unmuteOption"},void 0,Nl||(Nl=_l("span",{},void 0,"/unmute Id: ")),Il||(Il=_l("input",{type:"text",id:"unmuteId"})),_l("button",{onClick:()=>{var e;e=document.getElementById("unmuteId").value,i(`/unmute ${e}`),n()}},void 0,"Add"))))};var Ol;function Pl(e,t,n,i){Ol||(Ol="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ol,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const $l={USER:Oe.memo(ml),CHANNEL:Oe.memo(yl),EMOJI:Oe.memo(kl),MOD:Oe.memo(Ll)},Rl=e=>{let{type:t,x:n,y:i,args:r,close:o,align:a}=e;const s=(0,Oe.useRef)(null);var l,c;if(l=[s],c=o,(0,Oe.useEffect)((()=>{const e=l.some((e=>e.current))?l.map((e=>e.current)):null;if(null===e)return;const t=t=>{e.every((e=>!e||!e.contains(t.target)))&&c()},n=()=>{c()};return document.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("resize",n),()=>{document.removeEventListener("mousedown",t,{capture:!0}),window.removeEventListener("resize",n)}}),[l,c]),!t)return null;const d={};switch(a){case"tr":d.right=window.innerWidth-n,d.top=i;break;case"br":d.right=window.innerWidth-n,d.bottom=window.innerHeight-i;break;case"bl":d.left=n,d.bottom=window.innerHeight-i;break;default:d.left=n,d.top=i}const u=$l[t];return fl.createPortal(Oe.createElement("div",{ref:s,className:`contextmenu ${t}`,style:d},Pl(u,{close:o,args:r})),document.getElementById("app"))},Dl=Oe.memo(Rl);var Ml,zl,Hl=n(2682);function Gl(e,t,n,i){zl||(zl="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:zl,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Vl=e=>{let{url:t}=e;const[n,i]=(0,Oe.useState)(null);return(0,Oe.useEffect)((()=>{!async function(){const e=`${window.location.protocol}//www.tiktok.com/oembed?url=${encodeURIComponent(t)}`,n=await fetch(e),r=await n.json();r.html&&i(r.html)}()}),[t]),n?Gl("iframe",{style:{width:"100%",height:756},srcDoc:n,frameBorder:"0",referrerPolicy:"no-referrer",allow:"autoplay; picture-in-picture",scrolling:"no",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-same-origin allow-presentation",allowFullScreen:!0,title:"Embedded tiktok"}):Ml||(Ml=Gl("div",{},void 0,"LOADING"))},Wl=[Oe.memo(Vl),e=>e.includes("/video/"),e=>function(e){let t=e.indexOf("/@");if(-1===t)return e;t+=1;let n=e.indexOf("/",t);return-1===n&&(n=e.length),e.substring(t,n)}(e),"/embico/tiktok.png"];var Ul;function Fl(e,t,n,i){Ul||(Ul="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ul,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Bl(e){let t,n=-1;if(e.includes("youtube")&&(n=e.indexOf("v=")),e.includes("youtu.be")&&(n=e.indexOf("e/")),-1===n)return null;for(n+=2,t=n;t<e.length&&!["&","?","/"].includes(e[t]);t+=1);return e.substring(n,t)}const Kl=e=>{let{url:t}=e;const n=Bl(t);return n?Fl("div",{className:"vemb",style:{paddingBottom:"56.25%"}},void 0,Fl("iframe",{className:"vembc",src:`https://www.youtube.com/embed/${n}`,frameBorder:"0",referrerPolicy:"no-referrer",allow:"autoplay; picture-in-picture",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-same-origin allow-presentation",allowFullScreen:!0,title:"Embedded youtube"})):null},Yl=[Oe.memo(Kl),Bl,e=>Bl(e),"/embico/youtube.png"];var jl;function ql(e,t,n,i){jl||(jl="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:jl,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Xl=e=>{let{url:t}=e;const n=t.substring(0,t.indexOf("?type="));return t.includes("?type=video")?ql("div",{className:"vemb"},void 0,ql("video",{className:"vembc",controls:!0,autoPlay:!0,src:n})):ql("img",{alt:`Matrix ${n}`,src:n,style:{maxWidth:"100%"}})},Zl=[Oe.memo(Xl),e=>e.includes("?type=video")||e.includes("?type=image"),null,"/embico/matrix.png"],Ql=function(e,t){const n=(0,Oe.useRef)();(0,Oe.useEffect)((()=>{n.current=t}),[t]),(0,Oe.useEffect)((()=>{function t(t){t.source===e.current.contentWindow&&n.current(t.data)}return window.addEventListener("message",t,!1),()=>window.removeEventListener("message",t)}),[e])},Jl="t.me/",ec=e=>{let{url:t}=e;const[n,i]=(0,Oe.useState)(200),r=(0,Oe.useRef)(null);Ql(r,(e=>{try{const t=JSON.parse(e);"resize"===t.event&&t.height&&i(t.height)}catch{console.error(`Could not read postMessage from frame: ${e}`)}}));let o=(0,b.jI)(t);o=o.substring(o.indexOf(Jl)+5);const a=o.indexOf("/",o.indexOf("/")+1);return-1!==a&&(o=o.substring(0,a)),Oe.createElement("iframe",{ref:r,style:{width:"100%",height:n},src:`https://t.me/${o}?embed=1`,frameBorder:"0",referrerPolicy:"no-referrer",allow:"autoplay; picture-in-picture",scrolling:"no",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-same-origin allow-presentation",allowFullScreen:!0,title:"Embedded telegram"})},tc=[Oe.memo(ec),e=>{let t=e.indexOf(Jl);return!(-1===t||t+5+1>=e.length||(t=e.indexOf("/",t+5+1),-1===t||t+2>=e.length))},e=>{let t=e.substring(e.indexOf(Jl)+5);return t=t.substring(0,t.indexOf("/")),t},"/embico/telegram.png"],nc="/status/",ic=e=>{let{url:t}=e;const[n,i]=(0,Oe.useState)(200),r=(0,Oe.useRef)(null);Ql(r,(e=>{try{e["twttr.embed"]&&"twttr.private.resize"===e["twttr.embed"].method&&e["twttr.embed"].params.length&&e["twttr.embed"].params[0].height&&i(e["twttr.embed"].params[0].height)}catch{console.error(`Could not read postMessage from frame: ${e}`)}}));let o=(0,b.jI)(t);return o=o.substring(o.indexOf(nc)+8),-1!==o.indexOf("/")&&(o=o.substring(o.indexOf("/"))),Oe.createElement("iframe",{ref:r,style:{width:"100%",height:n},src:`https://platform.twitter.com/embed/Tweet.html?dnt=true&embedId=twitter-widget-&frame=false&hideCard=false&hideThread=true&id=${o}&theme=light&width=550px`,frameBorder:"0",referrerPolicy:"no-referrer",allow:"autoplay; picture-in-picture",scrolling:"no",allowFullScreen:!0,title:"Embedded twitter"})},rc=[Oe.memo(ic),e=>{const t=e.indexOf(nc);return!(-1===t||t+8+1>=e.length)},e=>{let t=e.substring(0,e.indexOf(nc));return t=t.substring(t.lastIndexOf("/")+1),t},"/embico/twitter.png"];var oc;function ac(e,t,n,i){oc||(oc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:oc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function sc(e){const t=e.lastIndexOf(":");return-1!==t?e.substring(0,t):e}const lc="/@",cc=e=>{let t,{url:n}=e,i=n.indexOf(lc);return-1!==i||(i=n.indexOf("//"),-1===i&&(i=0)),t=n.substring(n.indexOf("/",i+2)+1),t=sc((0,b.jI)(t)),ac("div",{className:"vemb",style:{paddingBottom:"56.25%"}},void 0,ac("iframe",{className:"vembc",src:`https://odysee.com/$/embed/${t}`,frameBorder:"0",referrerPolicy:"no-referrer",allow:"autoplay; picture-in-picture",scrolling:"no",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-same-origin allow-presentation",allowFullScreen:!0,title:"Embedded odysee"}))},dc=[Oe.memo(cc),e=>{const t=(0,b.jI)(e);let n=t.indexOf(lc);return-1!==n?!(-1===n||n+4>=t.length||(n=t.indexOf("/",n+2),-1===n||n+2>=t.length)):(n=t.indexOf("//"),-1===n&&(n=0),n=t.indexOf("/",n+2),!(-1===n||n+2>=t.length))},e=>{let t=(0,b.jI)(e),n=t.indexOf(lc);if(-1!==n){t=t.substring(n+2);let e=t.substring(0,t.indexOf("/"));return t=sc(t.substring(e.length+1)),e=sc(e),`${e} | ${t}`}return n=t.indexOf("//"),-1===n&&(n=0),t=t.substring(t.indexOf("/",n+2)+1),t=sc((0,b.jI)(t)),t},"/embico/odysee.png"];var uc;function hc(e,t,n,i){uc||(uc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:uc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const fc=["webm","mp4"],pc=["jpg","jpeg","png","webp","gif"],mc=e=>{let{url:t}=e;const n=(0,b.an)(t);return fc.includes(n)?hc("div",{className:"vemb"},void 0,hc("video",{className:"vembc",controls:!0,autoPlay:!0,src:t,referrerPolicy:"no-referrer"})):hc("img",{alt:`Matrix ${t}`,src:t,style:{maxWidth:"100%"},referrerPolicy:"no-referrer"})},vc=[Oe.memo(mc),e=>{const t=(0,b.an)(e);return fc.includes(t)||pc.includes(t)},null,"/embico/direct.png"],gc={tiktok:Wl,youtube:Yl,"youtu.be":Yl,"matrix.pixelplanet.fun":Zl,"i.4cdn.org":vc,"i.imgur":vc,"litter.catbox.moe":vc,"files.catbox.moe":vc,"i.redd.it":vc,"media.discordapp.net":vc,"media.consumeproduct.win":vc,"cdn.discord.com":vc,"t.me":tc,twitter:rc,"nitter.net":rc,odysee:dc};var yc,wc,bc;function kc(e,t,n,i){bc||(bc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:bc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Sc=["odysee","twitter","matrix.pixelplanet.fun","youtube","youtu.be","t.me"],Ec=e=>{let{href:t,title:n,refEmbed:i}=e;const[r,o]=(0,Oe.useState)(!1),a=(0,b.ON)(t);if(a===window.location.hostname&&t.includes("/#")){const e=t.substring(t.indexOf("/#")+1);return Ke()&&window.opener&&!window.opener.closed?kc("a",{href:`/${e}`,target:"main"},void 0,n||e):kc("a",{href:`/${e}`},void 0,n||e)}const s=gc[a],l=s&&s[1](t),c=s&&s[0];let d;return d=n&&Sc.includes(a)?n:l&&s[2]?s[2](t):t,Oe.createElement(Oe.Fragment,null,kc("a",{href:t,target:"_blank",rel:"noopener noreferrer"},void 0,d),l&&Oe.createElement(Oe.Fragment,null," ",s[3]&&kc("img",{style:{width:"1em",height:"1em",verticalAlign:"middle"},src:s[3],alt:`${a}-icon`}),kc("span",{style:{cursor:"pointer"},onClick:()=>o(!r)},void 0,r?yc||(yc=kc(Hl.MiM,{className:"ebcl"})):wc||(wc=kc(Hl.OA4,{className:"ebex"})))),r&&l&&(i&&i.current?fl.createPortal(kc(c,{url:t}),i.current):kc(c,{url:t})))},Cc=Oe.memo(Ec);var Tc;function xc(e,t,n,i){Tc||(Tc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Tc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Nc=e=>{let{name:t,uid:n}=e;const i=n&&n.trim(),r=(0,Pe.d4)((e=>-1!==e.gui.style.indexOf("dark")));return xc("span",{className:i==(0,Pe.d4)((e=>e.user.id))?"ping":"mention",style:{color:(0,b.eg)((0,b.BR)(t),r)}},void 0,`@${t}`)},Ic=Oe.memo(Nc);var Ac;function _c(e,t,n,i){Ac||(Ac="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Ac,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Lc=e=>{let{emoji:t}=e;return Oe.createElement(Oe.Fragment,null,_c("img",{className:"emoji",style:{verticalAlign:"middle"},title:t,src:`/emojis/${t}.gif`}))},Oc=Oe.memo(Lc);var Pc;function $c(e,t,n,i){Pc||(Pc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Pc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Rc=Oe.memo((e=>{let{pArray:t,refEmbed:n}=e;return t.map((e=>{if(!Array.isArray(e))return e;const t=e[0];switch(t){case"c":return $c("code",{},void 0,e[1]);case"*":return $c("strong",{},void 0,$c(Rc,{pArray:e[1]}));case"~":return $c("s",{},void 0,$c(Rc,{pArray:e[1]}));case"+":return $c("em",{},void 0,$c(Rc,{pArray:e[1]}));case"_":return $c("u",{},void 0,$c(Rc,{pArray:e[1]}));case"img":case"l":return $c(Cc,{refEmbed:n,href:e[2],title:e[1]});case"@":return $c(Ic,{uid:e[2],name:e[1]});case":":if((0,b.xp)(e[1]))return $c(Oc,{emoji:e[1]});default:return t}}))}));class Dc{constructor(e,t){this.txt=e,this.iter=t||0}done(){return this.iter>=this.txt.length}moveForward(){return this.iter+=1,this.iter<this.txt.length}setIter(e){this.iter=e}getChar(){return this.txt[this.iter]}slice(e,t){return this.txt.slice(e,t||this.iter)}has(e){return this.txt.startsWith(e,this.iter)}move(e){return this.iter+=e,this.iter<this.txt.length}skipSpaces(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(;this.iter<this.txt.length;this.iter+=1){const t=this.txt[this.iter];if(" "!==t&&"\t"!==t&&(!e||"\n"!==t))break}}countRepeatingCharacters(){const e=this.getChar();let t=this.iter+1;for(;t<this.txt.length&&this.txt[t]===e;t+=1);return t-this.iter}moveToNextLine(){const e=this.txt.indexOf("\n",this.iter);this.iter=-1===e?this.txt.length:e+1}getLine(){const e=this.iter;return this.moveToNextLine(),this.txt.slice(e,this.iter)}getIndent(e){let t=0;for(;this.iter<this.txt.length;){const n=this.getChar();if("\t"===n)t+=e;else{if(" "!==n)break;t+=1}this.iter+=1}return t}goToCharInLine(e){let{iter:t}=this;for(;t<this.txt.length&&"\n"!==this.txt[t]&&this.txt[t]!==e;t+=1);return this.txt[t]===e&&(this.iter=t,t)}static isWhiteSpace(e){return" "===e||"\t"===e||"\n"===e}checkIfEnclosure(e,t){if(t){let e=this.iter,t=e;const n=[];for(;":"!==this.txt[t];){const e=this.txt[t];if("\\"!==e){if(t>=this.txt.length||"\n"===e)return null;t+=1}else n.push(t),t+=2}let i="";for(let t=0;t<n.length;t+=1){const r=n[t];i+=this.txt.slice(e,r),e=r+1}return e<t&&(i+=this.txt.slice(e,t)),this.iter=t,[i]}let n=this.iter+1,i=n;const r=[];for(;"]"!==this.txt[i];){const e=this.txt[i];if("\\"!==e){if(i>=this.txt.length||"\n"===e)return null;i+=1}else r.push(i),i+=2}let o=i+1;if("("!==this.txt[o])return null;o+=1;let a=o,s=null;for(;")"!==this.txt[a];){const t=this.txt[a];if(a>=this.txt.length||"\n"===t||"["===t||"("===t)return null;if(e&&":"===t){const e=this.iter;if(this.iter=a,s=this.checkIfLink(!0),a=this.iter,this.iter=e,null===s)return null}else a+=1}if(a<o+1||!s&&e)return null;e||(s=this.txt.slice(o,a));let l="";for(let e=0;e<r.length;e+=1){const t=r[e];l+=this.txt.slice(n,t),n=t+1}return n<i&&(l+=this.txt.slice(n,i)),this.iter=a,[l,s]}checkIfLink(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.iter;if(!this.txt.startsWith("://",t)||t<3)return null;let n=t-1;for(;n>=0&&!Dc.isWhiteSpace(this.txt[n])&&"("!==this.txt[n];n-=1);for(n+=1,t+=3;t<this.txt.length&&!Dc.isWhiteSpace(this.txt[t])&&(!e||")"!==this.txt[t]);t+=1);if(t<this.iter+4)return null;let i=this.txt.slice(n,t);const r=i.indexOf("http");return-1!==r&&0!==r&&(n+=r,i=this.txt.slice(n,t)),this.iter=t,i}checkIfCoords(){let e=this.iter+1;for(;e<this.txt.length;){const t=this.txt[e];if(","===t)break;if(Dc.isWhiteSpace(t)||!Number.isNaN(Number(t)))return null;e+=1}if(e>=this.txt.length||e-this.iter>12||e===this.iter)return null;e+=1;const t=this.txt[e];if("-"!==t&&Number.isNaN(t))return null;e+=1;let n=1;for(;e<this.txt.length&&!Dc.isWhiteSpace(this.txt[e]);){const t=this.txt[e];if(","===t)n+=1;else if("-"!==t&&Number.isNaN(Number(t)))return null;e+=1}if(n<2||n>3||","===this.txt[e-1])return null;const i=this.txt.slice(this.iter,e);return this.iter=e,i}}let Mc=()=>{};const zc=["*","~","+","_"];function Hc(e,t,n){const i=[];let r=e.iter,o=null;for(;!e.done()&&(o=e.getChar(),o!==n);){if("\n"===o){e.moveForward();break}if("\\"===o)r!==e.iter&&i.push(e.slice(r)),r=e.iter+1,e.moveForward();else if("#"===o){const t=e.iter,n=e.checkIfCoords();n&&(r!==t&&i.push(e.slice(r,t)),i.push(["l",null,`${window.location.origin}/${n}`]),r=e.iter)}else if(zc.includes(o)){const n=e.iter;e.moveForward();const a=Hc(e,t,o);e.getChar()===o?(r!==n&&i.push(e.slice(r,n)),i.push([o,a]),r=e.iter+1):e.setIter(n)}else if("`"===o){const t=e.iter;e.moveForward(),e.goToCharInLine("`")&&(r!==t&&i.push(e.slice(r,t)),i.push(["c",e.slice(t+1)]),r=e.iter+1)}else if(":"===o){const t=e.checkIfLink();if(null!==t){const n=e.iter-t.length;r<n&&i.push(e.slice(r,n)),i.push(["l",null,t]),r=e.iter;continue}}else if("["===o){let t=e.iter,n=null;e.iter>0&&(e.move(-1),n=e.getChar(),e.setIter(t));let o="l",a=!0;"!"===n?(o="img",t-=1):"@"===n&&(a=!1,o="@",t-=1);let s=!1;const l=e.checkIfEnclosure(a,s);null!==l&&(r<t&&i.push(e.slice(r,t)),i.push([o,l[0],l[1]]),r=e.iter+1)}else{let t=e.iter,n=null;if(e.iter>0&&(e.move(-1),n=e.getChar(),e.setIter(t)),":"===n){let t=e.iter,n=":";t-=1;let o=!1,a=!0;const s=e.checkIfEnclosure(o,a);null!==s&&(r<t&&i.push(e.slice(r,t)),i.push([n,s[0]]),r=e.iter+1)}}e.moveForward()}return r!==e.iter&&i.push(e.slice(r)),i}function Gc(e){e.skipSpaces(!1),"\n"===e.getChar()&&e.moveForward();const t=e.iter;for(;!e.done();){if(e.skipSpaces(!0),e.has("```")){const n=["cb",e.slice(t)];return e.move(3),n}e.moveToNextLine()}const n=e.slice(t);return e.move(3),["cb",n]}function Vc(e,t){const n=e.getChar();let i="";for(;e.getChar()===n&&e.moveForward();)i+=e.getLine();const r=new Dc(i);return[n,Mc(r,t,0)]}function Wc(e,t,n,i){const r=[];let o=[],a=0;for(;!e.done();){const s=e.iter;a+=1;const l=e.getIndent(t.tabWidth);if(l<i&&a>1){e.setIter(s);break}const c=e.getChar();if(!i&&"#"===c)break;let d=!1,u=!1;if("-"===c&&(d=!0,e.moveForward()),!Number.isNaN(parseInt(c,10))){let t=e.iter+1;for(;!Number.isNaN(parseInt(e.txt[t],10));t+=1);const n=e.txt[t];"."!==n&&")"!==n||(u=!0,e.setIter(t+1))}let h=!1,f=null;if(d||u){let i;o.length&&(r.push(["p",o]),o=[]),i=Wc(e,t,n,l+1),i=["-",i];const a=d?"ul":"ol";r.length&&r[r.length-1][0]===a?r[r.length-1][1].push(i):r.push([a,[i]])}else if(">"===c||"<"===c)h=!0,f=Vc(e,t);else if(e.has("```"))h=!0,e.move(3),f=Gc(e);else{if(i||"\n"!==c){const n=Hc(e,t);n&&(o=o.concat(n));continue}if(e.moveForward(),e.skipSpaces(!1),"\n"===e.getChar()){if(n&&t.newlineBreaksArticles)break;e.moveForward()}h=!0}h&&o.length&&(r.push(["p",o]),o=[]),f&&r.push(f)}return o.length&&r.push(["p",o]),r}var Uc;function Fc(e,t,n,i){Uc||(Uc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Uc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Bc(e){let{name:t,uid:n,country:i,msg:r,ts:o,openCm:a}=e;const s=(0,Pe.d4)(Jn.S),l=(0,Oe.useRef)(),c="info"===t,d="event"===t;let u="msg";c?u+=" info":d?u+=" event":">"===r.charAt(0)?u+=" greentext":"<"===r.charAt(0)&&(u+=" redtext");const h=function(e,t){const n=function(e){const t={};return t.parseLinks=e&&e.parseLinks||!1,t.tabWidth=e&&e.tabWidth||4,t.newlineBreaksArticles=e&&e.newlineBreaksArticles||!0,t}(void 0);return Hc(new Dc(e),n)}(r);return Oe.createElement("li",{className:"chatmsg",ref:l},Fc("div",{className:"msgcont"},void 0,Fc("span",{className:u},void 0,!c&&!d&&Fc(Oe.Fragment,{},"name",Fc("img",{className:"chatflag",alt:"",title:i,src:`/cf/${i}.gif`}),Fc("span",{className:"chatname",style:{color:(0,b.eg)((0,b.BR)(t),s),cursor:"pointer"},role:"button",title:t,tabIndex:-1,onClick:e=>{a(e.clientX,e.clientY,t,n)}},void 0,`${t}#${n}`),Fc("img",{className:"rosette",alt:"",title:t,src:`/rosette/${t}.png`}),": "),Fc(Rc,{refEmbed:l,pArray:h})),Fc("span",{className:"chatts"},void 0,(0,b.ln)(o))))}Mc=(e,t,n)=>{let i=[];for(;!e.done();){const r=Wc(e,t,n,0);if(i=i.concat(r),"#"!==e.getChar())break;{let r=e.countRepeatingCharacters();if(r<=n||6===n)break;{e.move(r);const n=e.getLine();r=Math.min(r,6);const o=Mc(e,t,r);i.push(["a",r,n,o])}}}return i};const Kc=Oe.memo(Bc);var Yc,jc,qc,Xc,Zc;function Qc(e,t,n,i){Zc||(Zc="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Zc,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Jc=e=>{let{setChatChannel:t,chatChannel:n}=e;const[i,r]=(0,Oe.useState)(!1),[o,a]=(0,Oe.useState)([]),[s,l]=(0,Oe.useState)(0),[c,d]=(0,Oe.useState)(0),[u,h]=(0,Oe.useState)(!1),[f,p]=(0,Oe.useState)("..."),[m,v]=(0,Oe.useState)(!1),g=(0,Oe.useRef)(null),y=(0,Oe.useRef)(null),w=(0,Pe.d4)((e=>e.chatRead.unread)),b=(0,Pe.d4)((e=>e.chatRead.mute)),k=(0,Pe.d4)((e=>e.chat.channels)),S=(0,Pe.d4)((e=>e.gui.chatNotify));return(0,Oe.useEffect)((()=>{d(y.current.clientHeight)}),[y]),function(e,t,n){const i=(0,Oe.useCallback)((t=>{e.every((e=>!e.current||!e.current.contains(t.target)))&&n()}),[n,e]),r=(0,Oe.useCallback)((()=>{n()}),[n]);(0,Oe.useLayoutEffect)((()=>{t?(document.addEventListener("mousedown",i,{capture:!0}),window.addEventListener("resize",r)):(document.removeEventListener("mousedown",i,{capture:!0}),window.removeEventListener("resize",r))}),[t,i,r])}([g],i,(0,Oe.useCallback)((()=>r(!1)),[])),(0,Oe.useEffect)((()=>{if(i&&k[n]){const e=1===k[n][1]?1:0;l(e)}}),[i,k,n]),(0,Oe.useEffect)((()=>{const e=Object.keys(k),t=[];let n=0;for(;n<e.length;){const i=e[n],r=w[i]&&!b.includes(i);t.push([i,r,...k[i]]),!u&&0!==k[i][1]&&r&&h(!0),n+=1}t.sort(((e,t)=>0===e[3]||0===t[3]?0:e[4]>t[4]?-1:t[4]>e[4]?1:0)),t.sort(((e,t)=>0===e[3]||0===t[3]?0:e[1]&&!t[1]?-1:t[1]&&!e[1]?1:0)),a(t),n===e.length&&h(!1)}),[k,w,b,u]),(0,Oe.useEffect)((()=>{const e=Object.keys(k);for(let t=0;t<e.length;t+=1)if(1===k[e[t]][1])return void v(!0);v(!1)}),[k]),(0,Oe.useEffect)((()=>{k[n]&&p(k[n][0])}),[n,k]),Qc("div",{style:{position:"relative"}},void 0,Oe.createElement("div",{ref:y,key:"expbtn",role:"button",tabIndex:-1,onClick:()=>r(!0),className:"channelbtn"+(i?" selected":"")},u&&S&&!i&&Qc("div",{style:{top:-4},className:"chnunread"},void 0,"⦿"),f),i&&Oe.createElement("div",{ref:g,key:"dropdown",style:{position:"absolute",bottom:c,right:9},className:"channeldd"},Qc("div",{className:"chntop"},void 0,Qc("span",{style:{borderLeft:"none"},className:"chntype"+(0===s?" selected":""),onClick:()=>l(0),role:"button",tabIndex:-1},void 0,Yc||(Yc=Qc(mt.qHX,{}))),m&&Qc("span",{className:"chntype"+(1===s?" selected":""),onClick:()=>l(1),role:"button",tabIndex:-1},void 0,u&&S&&1!==s&&(jc||(jc=Qc("div",{className:"chnunread"},void 0,"⦿"))),qc||(qc=Qc(Ue.M5n,{})))),Qc("div",{className:"channeldds"},void 0,o.filter((e=>{const t=e[3];return 1===s&&1===t||0===s&&1!==t})).map((e=>{const[i,r,o]=e;return Qc("div",{onClick:()=>t(i),className:"chn"+(i===n?" selected":""),role:"button",tabIndex:-1},i,r&&S?Xc||(Xc=Qc("div",{className:"chnunread"},void 0,"⦿")):null,o)})))))},ed=Oe.memo(Jc);var td;function nd(e,t,n,i){td||(td="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:td,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const id=e=>{let{query:t,addToInput:n}=e;const i=b.RN.filter((e=>e.includes(t)));return 0===i.length?null:nd("div",{className:"emoji-filter-container"},void 0,i.map((e=>nd("div",{className:"emoji-filter-item",onClick:()=>n(`:${e}:`)},e,nd("img",{src:`/emojis/${e}.gif`,alt:e,title:e}),nd("span",{},void 0,e)))))};var rd,od,ad;function sd(e,t,n,i){ad||(ad="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:ad,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var ld,cd,dd;function ud(e,t,n,i){dd||(dd="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:dd,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const hd={display:"inline-block",width:"100%",maxWidth:"35em"},fd=()=>{const[e,t]=(0,Oe.useState)(""),[n,i]=(0,Oe.useState)(!1),[r,o]=(0,Oe.useState)(!1),[a,s]=(0,Oe.useState)([]),l=Je();return r?ud("div",{},void 0,ud("p",{className:"modalmessage"},void 0,"Parolanızı değiştirmeniz için talimatlar içeren bir e-posta gönderildi."),ud("button",{type:"button",onClick:()=>l("USERAREA")},void 0,"Back")):ud("div",{className:"content"},void 0,ud("p",{},void 0,"E-Posta adresinizi giriniz, ardından size yeni bir parola göndereceğiz:"),ld||(ld=ud("br",{})),ud("form",{onSubmit:async t=>{if(t.preventDefault(),n)return;const r=function(e){const t=[],n=Fo(e);return n&&t.push(n),t}(e);if(r.length>0)return void s(r);i(!0);const{errors:a}=await(0,W.Nq)(e);i(!1),a?s(a):o(!0)}},void 0,a.map((e=>ud("p",{},e,ud("span",{},void 0,"Hata"),": ",e))),ud("input",{style:hd,value:e,onChange:e=>t(e.target.value),type:"text",placeholder:"E-Posta Adresi"}),cd||(cd=ud("br",{})),ud("button",{type:"submit"},void 0,n?"...":"Onayla"),ud("button",{type:"button",onClick:()=>l("USERAREA")},void 0,"Geri Dön")))};var pd,md,vd;function gd(e,t,n,i){md||(md="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:md,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function yd(e,t,n,i){vd||(vd="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:vd,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const wd={HELP:[()=>{const e=ao("kbd",{},void 0,"G"),t=ao("kbd",{},void 0,"X"),n=ao("kbd",{},void 0,"H"),i=ao("kbd",{},void 0,"R"),r=ao("kbd",{},void 0,"Q"),a=ao("kbd",{},void 0,"E"),s=ao("kbd",{},void 0,"W"),l=ao("kbd",{},void 0,"A"),c=ao("kbd",{},void 0,"S"),u=ao("kbd",{},void 0,"D"),h=mr||(mr=ao("kbd",{},void 0,"↑")),f=vr||(vr=ao("kbd",{},void 0,"←")),p=gr||(gr=ao("kbd",{},void 0,"↓")),m=yr||(yr=ao("kbd",{},void 0,"→")),v=wr||(wr=ao("kbd",{},void 0,ao(ur.qgz,{}))),g=br||(br=ao("kbd",{},void 0,ao(mt.UIg,{}))),y=ao("kbd",{},void 0,"⇧ ","Shift"),w=kr||(kr=ao("a",{href:"https://twitter.com/starhousedev"},void 0,"starhouse ")),b=Sr||(Sr=ao("a",{href:"https://twitter.com/Vinikdev"},void 0,"Vinikdev")),k=Er||(Er=ao("a",{href:"https://lospec.com/palette-list/lava-gb"},void 0,"Do-Nendo")),S=Cr||(Cr=ao("a",{href:"https://globalpixel.xyz/discord"},void 0,"discord")),E=Tr||(Tr=ao("a",{href:"mailto:admin@notworking.xyz"},void 0,"admin@notworking.xyz")),C=(0,Pe.wA)(),T=(0,Pe.d4)((e=>e.gui.easterEgg)),x=(0,Oe.useCallback)((()=>{C((0,o.oB)()),C((0,d.me)(T?"Easter Egg KAPALI":"Easter Egg AÇIK"))}),[T,C]),N=_n(null,x,1e3);return ao("div",{className:"content"},void 0,Oe.createElement("img",{style:{padding:2,maxWidth:"20%",verticalAlign:"middle",display:"inline-block"},alt:"gpxyz",src:"./apple-touch-icon.png",ref:N}),xr||(xr=ao("h1",{},void 0,"GlobalPixel")),ao("p",{},void 0,"Diğer oyuncularla beraber büyük bir Dünya haritasında renkli pikseller atın!",Nr||(Nr=ao("br",{})),"Our main canvas is a huge worldmap, you can place wherever you like, but you will have to wait a specific Cooldown between pixels. You can check out the cooldown and requirements on the Canvas Selection menu (globe button on top). Some canvases have a different cooldown for replacing a user-set pixels than placing on a unset pixel. i.e. 1s/2s means 1s on fresh pixels and 2s on already set pixels.",Ir||(Ir=ao("br",{})),"Tuvale uzaktan bakarken görüntünün güncellenmesi zaman alabilir. Küresel görünüm ise günde en az bir kere güncellenir.",Ar||(Ar=ao("br",{})),"İyi eğlenceler!"),ao("p",{className:"modalinfo"},void 0,"Discord (","tavsiye edilir","): ",_r||(_r=ao("a",{href:"./discord",target:"_blank",rel:"noopener noreferrer"},void 0,"globalpixel.xyz/discord"))),ao("p",{className:"modalinfo"},void 0,"Veri Kaynağı: ",Lr||(Lr=ao("a",{href:"https://git.globalpixel.xyz",target:"_blank",rel:"noopener noreferrer"},void 0,"git.globalpixel.xyz"))),ao("h3",{},void 0,"Harita Verisi"),ao("p",{},void 0,"Yön bulmanızı kolaylaştırmak için dönüştürülmüş OpenStreetMap kareleri ile kullandığımız ham harita verisini, mega.nz üzerinden indirebilirsiniz: ",Or||(Or=ao("a",{href:"https://mega.nz/#!JpkBwAbJ!EnSLlZmKv3kEBE0HDhakTgAZZycD3ELjduajJxPGaXo"},void 0,"pixelplanetmap.zip"))," (422MB)"),ao("h3",{},void 0,"Yasaklandınız mı? Proxy olarak mı işaretlendiniz?"),ao("div",{},void 0,ao("p",{},void 0,["Eğer proxy olmayıp proxy olarak işaretlendiyseniz veya yanlış bir nedenle yasaklandığınızı düşünüyorsanız, lütfen ",S," sunucumuza gidin veya da ",E," adresine aşağıdaki IID'yi içeren bir e-posta gönderin:"]),Pr||(Pr=ao(pr,{}))),ao("h3",{},void 0,"2D ","Kontroller"),ao("div",{style:{lineHeight:1.5}},void 0,"Paletteki renklere tıklayarak renk seçiniz",$r||($r=ao("br",{})),["Izgarayı açıp kapamak için ",e," tuşuna basın"],Rr||(Rr=ao("br",{})),["Diğer kullanıcıların attığı pikselleri görebilmek için ",t," tuşuna basın"],Dr||(Dr=ao("br",{})),["Tuvalin geçmişteki görünümünü görmek için ",n," tuşuna basın"],Mr||(Mr=ao("br",{})),["Koordinatları kopyalamak için ",i," tuşuna basın"],zr||(zr=ao("br",{})),[r," veya ",a," tuşuna basarak tuvalden uzaklaşın veya tuvale yaklaşın"],Hr||(Hr=ao("br",{})),[s,", ",l,", ",c,", ",u," tuşları ile tuvalde gezinin"],Gr||(Gr=ao("br",{})),[h,", ",f,", ",p,", ",m," tuşları ile tuvalde gezinin"],Vr||(Vr=ao("br",{})),["Farenizi basılı tutup kaydırarak ",v," veya ",g," ekrana basılı tutup hareket ederek tuvalde gezinin"],Wr||(Wr=ao("br",{})),["Fare tekerini ",v," veya ",g," iki parmağınızı kullanarak yakınlaştırın"],Ur||(Ur=ao("br",{})),["Farenizi hareket ettirirken piksel atmak için sol ",y," tuşuna basılı tutun"],Fr||(Fr=ao("br",{})),["Farenizi hareket ettirirken geçmiş görünümünden piksel atmak için sağ ",y," tuşuna basılı tutun"],Br||(Br=ao("br",{})),[v," Farenizin sol tuşuna basarak veya ",g," ekrana tıklayarak piksel atın"],Kr||(Kr=ao("br",{})),["Farenizin tekerleğine ",v," basarak veya ",g," ekrana basılı tutarak orada bulunan pikselin rengini kopyalayın"],Yr||(Yr=ao("br",{}))),ao("h3",{},void 0,"3D ","Kontroller"),ao("div",{style:{lineHeight:1.5}},void 0,[s,", ",l,", ",c,", ",u," tuşları ile tuvalde gezinin"],jr||(jr=ao("br",{})),[h,", ",f,", ",p,", ",m," tuşları ile tuvalde gezinin"],qr||(qr=ao("br",{})),[r," ve ",a," basarak yukarı aşağı gidin"],Xr||(Xr=ao("br",{})),[v," Farenizin sol tuşuna basılı tutup farenizi kaydırarak gezinin"],Zr||(Zr=ao("br",{})),[v," Fare tekerleğini döndürerek veya ",v," orta fare düğmesine basarak uzaklaştırın veya yakınlaştırın"],Qr||(Qr=ao("br",{})),[v," Sağ tuşuna basılı tutup farenizi hareket ettirerek baktığınız konumu kaydırın"],Jr||(Jr=ao("br",{})),[v," Farenizin sol tuşuna basarak veya ",g," ekrana tıklayarak piksel atın"],eo||(eo=ao("br",{})),[v," Farenizin sağ tuşuyla veya ",g," çift tıklayarak bir pikseli kaldırın"],to||(to=ao("br",{})),["Farenizin tekerleğine ",v," basarak veya ",g," ekrana basılı tutarak orada bulunan pikselin rengini kopyalayın"],no||(no=ao("br",{}))),io||(io=ao("h3",{},void 0,"Palette Credits")),ao("div",{},void 0,["Renk paletlerini kamuya açan aşağıdaki sanatçılara teşekkür ederiz"]," ",ro||(ro=ao("a",{href:"https://lospec.com/"},void 0,"lospec.com")),ao("p",{},void 0,["Ay paletinin sahibi ",w,"'dur."]),ao("p",{},void 0,["Top10 paletinin sahibi ",b,"'dir."]),ao("p",{},void 0,["2bit tuvalinin renk paletini ",k,"'e borçluyuz."])))},"Yardım"],SETTINGS:[Wo,"Ayarlar"],USERAREA:[zs,"Kullanıcı Alanı"],REGISTER:[Ws,"Kayıt"],FORGOT_PASSWORD:[Oe.memo(fd),"Parolamı Unuttum"],CHAT:[()=>{const e=(0,Oe.useRef)(),t=(0,Oe.useRef)(),n=(0,Oe.useRef)(),[i,r]=(0,Oe.useState)([]),[a,s]=(0,Oe.useState)(20),[l,c]=(0,Oe.useState)({}),[u,h]=(0,Oe.useState)(""),f=(0,Pe.wA)(),p=(0,Pe.d4)((e=>e.user.name)),m=(0,Pe.d4)((e=>e.fetching.fetchingChat)),{channels:v,messages:g,blocked:y}=(0,Pe.d4)((e=>e.chat)),w=(0,Pe.d4)((e=>e.user.userlvl)),{args:b,setArgs:k,setTitle:S}=(0,Oe.useContext)(Ze),{chatChannel:E=1}=b,C=Je(),T=(0,Oe.useCallback)((e=>{f((0,o.Zn)(e)),k({chatChannel:Number(e)})}),[f]),x=(0,Oe.useCallback)((e=>{const t=n.current;if(!t)return;let i=t.value;" "!==i.slice(-1)&&(i+=" "),i+=`${e} `,t.value=i,n.current.focus()}),[]),N=(0,Oe.useCallback)((()=>{c({})}),[]),I=(0,Oe.useCallback)(((e,t,n,i)=>{c({type:"USER",x:e,y:t,args:{name:n,uid:i,setChannel:T,addToInput:x}})}),[T,x]),{stayScrolled:A}=(0,hl.A)(e,{initialScroll:1/0,inaccuracy:10}),_=g[E]||[];return(0,Oe.useEffect)((()=>{!v[E]||g[E]||m||f((0,d.T$)(E))}),[v,g,E]),(0,Oe.useEffect)((()=>{if(v[E]){const e=v[E][0];S(`Chan: ${e}`)}}),[E]),(0,Oe.useLayoutEffect)((()=>{A()}),[_.length]),(0,Oe.useEffect)((()=>{setTimeout((()=>{const e=Math.round(t.current.offsetHeight/10);s(Math.min(28,e))}),330)}),[t]),(0,Oe.useEffect)((()=>{const e=[];for(let t=0;t<y.length;t+=1)e.push(y[t][0]);r(e)}),[y.length]),(0,Oe.useEffect)((()=>{if(!E||!v[E]){const e=Object.keys(v);e.length&&T(e[0])}}),[v]),Oe.createElement("div",{ref:t,className:"chat-container"},sd(Dl,{type:l.type,x:l.x,y:l.y,args:l.args,close:N,align:l.align}),u&&sd(id,{query:u,addToInput:x}),Oe.createElement("ul",{className:"chatarea",ref:e,style:{flexGrow:1},role:"presentation"},!_.length&&sd(Kc,{uid:0,name:"info",country:"xx",msg:"Buradan sohbete katılın"}),_.map((e=>i.includes(e[3])?null:sd(Kc,{name:e[0],msg:e[1],country:e[2],uid:e[3],ts:e[4],openCm:I},e[5])))),sd("form",{className:"chatinput",onSubmit:e=>function(e){e.preventDefault();const t=n.current.value.trim();t&&(f((0,o.gJ)(t,E)),n.current.value="")}(e),style:{display:"flex"}},void 0,p?sd(Oe.Fragment,{},"chtipt",sd("span",{id:"inputtxtemoji"},"agua",sd("button",{id:"emojibtn",type:"button",style:{flexGrow:0},role:"button",title:"Emojis",tabIndex:0,onClick:e=>{const{clientX:t,clientY:n}=e;c({type:"EMOJI",x:t,y:n,args:{addToInput:x},align:"bl"})}},"chtemoji",rd||(rd=sd(Hl.m4E,{})))),0!==w&&sd("span",{id:"inputtxtmod"},"mod",sd("button",{id:"modbtn",type:"button",style:{flexGrow:0},role:"button",title:"Modtools",tabIndex:0,onClick:e=>{const{clientX:t,clientY:n}=e;c({type:"MOD",x:t,y:n,args:{addToInput:x},align:"bl"})}},"chtmod",od||(od=sd(mt._V2,{})))),Oe.createElement("input",{style:{flexGrow:1,minWidth:40},ref:n,autoComplete:"off",maxLength:"200",type:"text",placeholder:"Burada sohbet et"}),sd("button",{id:"sendbtn",style:{flexGrow:0},type:"submit"},void 0,"‣")):sd("div",{className:"modallink",onClick:e=>{e.stopPropagation(),C("USERAREA",{target:"fullscreen"})},style:{textAlign:"center",fontSize:13,flexGrow:1},role:"button",tabIndex:0},"nlipt","Sohbete katılmak için giriş yapmanız gerekir"),sd(ed,{setChatChannel:T,chatChannel:E},"cdd")),sd("div",{className:"chatlink",style:{fontSize:a}},void 0,sd("span",{onClick:e=>{const{clientX:t,clientY:n}=e;c({type:"CHANNEL",x:t,y:n,args:{cid:E},align:"tr"})},role:"button",title:"Kanal ayarları",tabIndex:-1},void 0,"⚙")))},"Sohbet"],CANVAS_SELECTION:[ol,"Tuval Seçimi"],ARCHIVE:[()=>dl("div",{className:"content"},void 0,dl("p",{},void 0,"Tuvalleri genelde kaldırmasak da bazı eğlence amaçlı çıkarılan veya mevcut bir akımdan dolayı kullanıcıların isteğiyle açılan tuvaller bir süre sonra sıkıcı hale gelebilir ve haftalarca önemli bir değişiklik yaşanmadan durabilir, tutmamızın anlamsız olduğu bu tuvalleri ise oyundan kaldırma kararı alabiliriz.",al||(al=dl("br",{})),"Burada kaldırılan tuvallerimizin arşivleri mevcuttur. Şu anda yalnızca bir tane vardır."),dl("h3",{},void 0,"Siyasi Pusula Tuvali"),dl("img",{style:{padding:2,maxWidth:"20%",verticalAlign:"middle",display:"inline-block"},alt:"political-compass",src:"https://storage.pixelplanet.fun/compass-preview.png"}),dl("p",{},void 0,"Bu tuval, Dünya tuvalinde siyasi tartışmaların çokça yaşandığı bir vakitte çıkarıldı. 1024 piksele 1024 piksellik bir siyasi pusula tuvaliydi, bir pikselin bekleme süresi 5 saniye olup 60 saniyeye kadar biriktirilebiliyordu. 11 Mayıstan başladı ve 30 Kasımda kapatılana kadar aylarca aktif olarak oynandı.",sl||(sl=dl("br",{})),"Hızlandırılmış halini kayıpsız bir şekilde encode yaparak webm video formatında arşivledik. Bu videodan alınan görüntüler 1:1 oranda kusursuz bir şekildedir."),ll||(ll=dl("p",{className:"modalinfo"},void 0,"Timelapse:",dl("a",{href:"https://storage.pixelplanet.fun/compass-timelapse.webm"},void 0,"Download"))),dl("img",{style:{padding:2,maxWidth:"80%",verticalAlign:"middle"},alt:"political-compass",src:"https://storage.pixelplanet.fun/compass-final.png"})),"Tuval Arşivi"],NEWS:[()=>pd||(pd=gd("div",{className:"content"},void 0,gd("h1",{},void 0,"GlobalPixel News"))),"News"],TOP3:[()=>{const e=(0,Pe.d4)((e=>e.ranks.totalDailyRanking)),t={fontSize:"1em"};return yd("div",{className:"content"},void 0,yd("p",{style:t},void 0,"Top 3 Users for Today:"),yd("ul",{},void 0,e.slice(0,3).map(((e,n)=>yd("li",{style:{color:0===n?"gold":1===n?"silver":"bronze",...t}},n,n+1,". ",e.name)))))},"Top3"]};var bd,kd,Sd;function Ed(e,t,n,i){Sd||(Sd="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Sd,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Cd=e=>{let{id:t}=e;const[n,i]=(0,Oe.useState)(!1),r=(0,Oe.useRef)(),o=(0,Oe.useRef)(),a=(0,Oe.useMemo)((()=>{return e=t,(0,rr.Mz)(or,(t=>t.find((t=>t.windowId===e))));var e}),[]),s=(0,Oe.useMemo)((()=>{return e=t,t=>t.windows.positions[e];var e}),[]),l=(0,Oe.useMemo)((()=>{return e=t,t=>t.windows.args[e]||{};var e}),[]),c=(0,Pe.d4)(a),d=(0,Pe.d4)(s),u=(0,Pe.d4)(ar),h=(0,Pe.d4)(l),f=(0,Pe.wA)(),p=(0,Oe.useMemo)((()=>({args:h,setArgs:e=>f(function(e,t){return{type:"SET_WIN_ARGS",windowId:e,args:t}}(t,e)),setTitle:e=>f(function(e,t){return{type:"SET_WIN_TITLE",windowId:e,title:t}}(t,e)),changeType:(e,n,i)=>f(function(e,t){return{type:"CHANGE_WIN_TYPE",windowId:e,windowType:t,title:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",args:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}}(t,e,n,i))})),[t,h]),{open:m,hidden:v,fullscreen:g}=c,y=(0,Oe.useCallback)((()=>{f({type:"FOCUS_WIN",windowId:t})}),[f]),w=(0,Oe.useCallback)((e=>{e.stopPropagation(),f({type:"CLONE_WIN",windowId:t})}),[f]),b=(0,Oe.useCallback)((()=>{i(!1)}),[f]),k=(0,Oe.useCallback)((e=>{e.stopPropagation(),f({type:"CLOSE_WIN",windowId:t})}),[f]),{xPos:S,yPos:E,width:C,height:T}=d;cr(r,y,(0,Oe.useCallback)(((e,n)=>f(function(e,t,n){return{type:"MOVE_WIN",windowId:e,xDiff:t,yDiff:n}}(t,e,n))),[g,!n&&v])),cr(o,y,(0,Oe.useCallback)(((e,n)=>f(function(e,t,n){return{type:"RESIZE_WIN",windowId:e,xDiff:t,yDiff:n}}(t,e,n))),[g,!n&&v]));const x=(0,Oe.useCallback)((()=>{v&&i(!1),m?n||v||(f({type:"TGL_MAXIMIZE_WIN",windowId:t}),setTimeout((()=>i(!0)),10)):f({type:"REMOVE_WIN",windowId:t})}),[f,v,m,n]);if((0,Oe.useEffect)((()=>{m&&!v&&window.setTimeout((()=>{i(!0)}),10)}),[m,v]),!n&&(v||!m))return null;const{title:N,windowType:I}=c,{z:A}=d,[_,L]=wd[I],O=N?`${L} - ${N}`:L,P=`${I}${m&&!v&&n?" show":""}`;return g?Ed("div",{className:`modal ${P}`,onTransitionEnd:x,onClick:y,style:{zIndex:A}},void 0,Ed("h2",{},void 0,O),Ed("div",{onClick:k,className:"modal-topbtn close",role:"button",label:"close",title:"Kapat",tabIndex:-1},"closebtn","✕"),je.includes(I)&&Ed("div",{onClick:e=>{Qe(I,h,S,E,C,T),k(e)},className:"modal-topbtn pop",role:"button",label:"close",title:"Açılır Pencere",tabIndex:-1},"popbtn",bd||(bd=Ed(ir.PRP,{}))),u&&Ed("div",{onClick:b,className:"modal-topbtn restore",role:"button",label:"restore",title:"Geri Getir",tabIndex:-1},"resbtn","↓"),Ed("div",{className:"modal-content"},"content",Ed(Ze.Provider,{value:p},void 0,Ed(_,{})))):Ed("div",{className:`window ${P}`,onTransitionEnd:x,onClick:y,style:{left:S,top:E,width:C,height:T,zIndex:A}},void 0,Ed("div",{className:"win-topbar"},"topbar",Ed("span",{className:"win-topbtn",onClick:w,title:"Klonla"},"clonebtn","+"),Oe.createElement("span",{className:"win-title",key:"title",ref:r,title:"Taşı"},O),je.includes(I)&&Ed("span",{className:"win-topbtn",onClick:e=>{Qe(I,h,S,E,C,T),k(e)}},"pobtnm",kd||(kd=Ed(ir.PRP,{}))),Ed("span",{className:"win-topbtn",onClick:b,title:"Büyüt"},"maxbtn","↑"),Ed("span",{className:"win-topbtn close",onClick:k,title:"Kapat"},"closebtn","X")),Oe.createElement("div",{className:"win-resize",key:"winres",title:"Yeniden Boyutlandır",ref:o},"▨"),Ed("div",{className:"win-content"},"content",Ed(Ze.Provider,{value:p},void 0,Ed(_,{}))))},Td=Oe.memo(Cd);var xd;function Nd(e,t,n,i){xd||(xd="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:xd,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Id=()=>{const e=(0,Pe.d4)(lr,Pe.bN),[t,n]=(0,Pe.d4)(sr,Pe.bN),i=(0,Pe.wA)();return t&&e.length?Nd("div",{id:"wm"},void 0,Nd(Ti,{show:n,onClick:()=>i({type:"CLOSE_FULLSCREEN_WINS"})}),e.map((e=>Nd(Td,{id:e},e)))):null};var Ad,_d;function Ld(e,t,n,i){_d||(_d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:_d,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Od=()=>{const e=Je();return Ld("div",{id:"newsbutton",className:"actionbuttons",onClick:()=>e("NEWS",{target:"fullscreen"}),role:"button",title:"News",tabIndex:-1},void 0,Ad||(Ad=Ld(mt.NiP,{})))},Pd=Oe.memo(Od);var $d,Rd,Dd,Md;function zd(e,t,n,i){Md||(Md="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=i;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];t.children=a}if(t&&r)for(var l in r)void 0===t[l]&&(t[l]=r[l]);else t||(t=r||{});return{$$typeof:Md,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}const Hd={style:{verticalAlign:"middle"}},Gd=()=>Oe.createElement(Oe.Fragment,null,$d||($d=zd(ze,{})),Rd||(Rd=zd(Re.Vx.Provider,{value:Hd},void 0,zd(rt,{}),zd(Pd,{}),zd(en,{}),zd(wt,{}),zd(ht,{}),zd(We,{}),zd(nr,{}),zd(Xi,{}),zd(Id,{}))));(0,i.GM)(Ae,{},(()=>{function e(){Ae.dispatch((0,o.L5)())}window.addEventListener("message",Ae.dispatch),Ae.dispatch({type:"HYDRATED"}),J.A.initialize(Ae,U,ye),X.initialize(Ae),window.addEventListener("hashchange",(()=>{Ae.dispatch((0,o.yb)())})),window.imMobile=function(){delete window.imMobile,Ae.dispatch((0,o.RE)(!0))},document.addEventListener("touchstart",window.imMobile,{once:!0}),window.addEventListener("resize",e),e(),Ae.dispatch((0,o.__)()),Ae.dispatch((0,d.Ni)()),U.initialize(Ae,J.A,ye)})),function(){const e=()=>{window.name="main",function(e,t){(0,$e.H)(e).render(zd(Pe.Kq,{store:t},void 0,Dd||(Dd=zd(Gd,{}))))}(document.getElementById("app"),Ae);const t=function(e){return t=>{if("INPUT"===t.target.nodeName||"TEXTAREA"===t.target.nodeName)return;let{key:n}=t;const i=Number(n);if(!Number.isNaN(i)&&i>0){const{canvases:t,canvasId:n}=e.getState().canvas,r=Object.keys(t).filter((e=>!t[e].hid));if(i<=r.length){const a=r[i-1];if(a!==n){e.dispatch((0,o.fX)(a));const n=t[a].title;e.dispatch((0,d.me)(`${n} tuvaline geçildi`))}}}else{switch(t.code){case"ArrowUp":case"KeyW":return void e.dispatch((0,o.gj)(-1));case"ArrowLeft":case"KeyA":return void e.dispatch((0,o.$l)(-1));case"ArrowDown":case"KeyS":return void e.dispatch((0,o.gj)(1));case"ArrowRight":case"KeyD":return void e.dispatch((0,o.$l)(1));case"KeyE":return void e.dispatch((0,o.$G)(1));case"KeyQ":return void e.dispatch((0,o.$G)(-1))}switch(t.key){case"+":return void e.dispatch((0,o.$G)(1));case"-":return void e.dispatch((0,o.$G)(-1));case"Control":return void e.dispatch((0,o._2)(-1));case"Shift":return t.location===KeyboardEvent.DOM_KEY_LOCATION_LEFT?void e.dispatch((0,o.kN)(c.h7.PENCIL,!0)):t.location===KeyboardEvent.DOM_KEY_LOCATION_RIGHT?void e.dispatch((0,o.kN)(e.getState().templates.oRightShift?c.h7.OVERLAY:c.h7.HISTORY,!0)):void 0}if(!_e.includes(n)){if(n=t.code,!n.startsWith("Key"))return;n=n.slice(-1).toLowerCase()}switch(n){case"g":return e.dispatch((0,o.Db)()),void e.dispatch((0,d.me)(e.getState().gui.showGrid?"Izgara AÇIK":"Izgara KAPALI"));case"h":return void(window?.ssv.backupurl&&e.dispatch((0,o.e8)()));case"x":return e.dispatch((0,o.y1)()),void e.dispatch((0,d.me)(e.getState().gui.showPixelNotify?"Piksel Bildirimleri AÇIK":"Piksel Bildirimleri KAPALI"));case"m":return e.dispatch((0,o.K8)()),void e.dispatch((0,d.me)(e.getState().gui.mute?"Ses Kapatıldı":"Ses Açıldı"));case"n":return void e.dispatch((0,o.NK)());case"r":{const{hover:t}=e.getState().canvas,n=t.join("_");return(0,r.A)(n),void e.dispatch((0,d.me)("Kopyalandı"))}case"t":return e.dispatch({type:"s/TGL_OVENABLED"}),void e.dispatch((0,d.me)(e.getState().templates.ovEnabled?"Şablon AÇIK":"Şablon KAPALI"));case"l":e.dispatch((0,o.oB)()),e.dispatch((0,d.me)(e.getState().gui.easterEgg?"Easter Egg AÇIK":"Easter Egg KAPALI"))}}}}(Ae),n=function(e){return t=>{switch(t.code){case"ArrowUp":case"KeyW":case"ArrowDown":case"KeyS":return void e.dispatch((0,o.gj)(0));case"ArrowLeft":case"KeyA":case"ArrowRight":case"KeyD":return void e.dispatch((0,o.$l)(0));case"KeyE":case"KeyQ":return void e.dispatch((0,o.$G)(0))}switch(t.key){case"+":case"-":return void e.dispatch((0,o.$G)(0));case"Shift":case"CapsLock":e.dispatch((0,o.kN)(c.h7.OFF))}}}(Ae);document.addEventListener("keydown",t,!1),document.addEventListener("keyup",n,!1),setInterval((()=>{ye().gc()}),c.$r),document.removeEventListener("DOMContentLoaded",e)};document.addEventListener("DOMContentLoaded",e,!1)}()},7256:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(6540);const r=function(e,t){const n=(0,i.useRef)();(0,i.useEffect)((()=>{n.current=e}),[e]),(0,i.useEffect)((()=>{function e(){n.current()}if(null!==t){e();const n=setInterval(e,t);return()=>clearInterval(n)}}),[t])}},1596:(e,t,n)=>{n.d(t,{$Y:()=>r,$r:()=>m,FQ:()=>u,GG:()=>c,Lp:()=>d,OE:()=>h,V8:()=>o,XK:()=>p,dn:()=>l,h7:()=>v,i3:()=>f,oj:()=>g,oy:()=>a,sH:()=>i,um:()=>s});const i=40,r=3,o="0",a=128,s=32,l=256,c=2,d=2592e6,u=100,h=1e3,f=2e3,p=3e5,m=3e5,v={OFF:0,PENCIL:1,HISTORY:2,OVERLAY:3},g=8},3008:(e,t,n)=>{n.d(t,{$T:()=>s,AY:()=>d,BR:()=>E,Bd:()=>f,D3:()=>m,EC:()=>$,Gq:()=>l,Gw:()=>P,J$:()=>c,ON:()=>N,Ot:()=>L,P1:()=>O,R9:()=>x,RN:()=>r,UK:()=>y,UT:()=>g,Vi:()=>D,W0:()=>b,Xk:()=>T,YQ:()=>u,_c:()=>v,an:()=>I,dS:()=>R,eg:()=>C,gQ:()=>h,jI:()=>A,lY:()=>w,ln:()=>_,qE:()=>a,tw:()=>p,um:()=>S,xp:()=>M});var i=n(1596);const r=["mftkww","chudmaxxing","globalpixel","clueless","cat-bitting","cat-combing","cat-disagreeing","cat-falling","cat-washing-clothes","endlesslyfallingcat","jeb-spin","kappadeal","pepe-think-omega","rainbow-dance-blob-think","rainbow-minecraft-parrot-dances","rainbow-potion","rainbow-wtf","world-rainbow","pinkverified","verified_blue","verifiedorange","number0","number1","number2","number3","number4","number5","number6","number7","number8","number9"];function o(e,t){return(e%t+t)%t}function a(e,t,n){return Math.max(t,Math.min(e,n))}function s(e){return e.substring(0,4)+e.substring(5,7)+e.substring(8)}function l(){const e=new Date;let t=e.getUTCDate(),n=e.getUTCMonth()+1;return n<10&&(n=`0${n}`),t<10&&(t=`0${t}`),`${e.getUTCFullYear()}-${n}-${t}`}function c(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=null===r?i.dn:i.um,a=null==r?n:r;return[Math.floor((t+e/2)/o),Math.floor((a+e/2)/o)]}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.map((t=>Math.floor((t+n/2)/i.dn*e)))}function u(e){return e?Math.log2(e/i.dn)/i.GG*2:0}function h(e,t,n){if(e&&n){let t=n.length;for(;t>0;){t-=1;const[i,r]=n[t];if(e<=i)return r}}return t}function f(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=null===r?i.dn:i.um,s=null==r?n:r;let l=null===r?0:n*a*a;const c=o(e/2,a),d=o(t+c,a);return l+=o(s+c,a)*a+d,l}function p(e,t){const n=Object.keys(e);for(let i=0;i<n.length;i+=1){const r=n[i];if(e[r].ident===t)return r}return null}function m(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=o?i.um:i.dn,s=n%a,l=n-s;let c=l%(a*a);const d=o?(l-c)/a/a:null;c/=a;const u=r/2/a;return[(e-u)*a+s,(t-u)*a+c,d]}function v(e,t){return t.map((t=>o(t+e/2,i.dn)))}function g(e,t,n,i){let[r,o]=i;const[a,s]=e,{width:l,height:c}=n;return[Math.floor((r-l/2)/t+a),Math.floor((o-c/2)/t+s)]}function y(e,t,n,i){let[r,o]=i;const[a,s]=e,{width:l,height:c}=n;return[(r-a)*t+l/2,(o-s)*t+c/2]}function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Math.ceil(e/1e3);let i;return i=n<60&&t?n:`${Math.floor(n/60)}:${("0"+n%60).slice(-2)}`,i}function b(e){const t=e%60;let n=(e-t)/60;const i=n%60;n=(n-i)/60;const r=n%24;n=(n-r)/24;let o="";return n&&(o+=` ${n}d`),r&&(o+=` ${r}h`),i&&(o+=` ${i}min`),t&&(o+=` ${t}s`),o}const k=["k","M","B"];function S(e){if(!e)return"N/A";if(e<1e3)return e;let t=0;for(;t<k.length;){if(e<1e4)return`${Math.floor(e/1e3)}.${`0${Math.floor(e%1e3/10)}`.slice(-2)}${k[t]}`;if(e<1e5)return`${Math.floor(e/1e3)}.${Math.floor(e%1e3/100)}${k[t]}`;if(e<1e6)return Math.floor(e/1e3)+k[t];t+=1,e=Math.round(e/1e3)}return""}function E(e){if(!e)return"#000000";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return`#${`00000${(16777215&t).toString(16).toUpperCase()}`.slice(-6)}`}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];3===(e=e.replace(/^\s*#|\s*$/g,"")).length&&(e=e.replace(/(.)/g,"$1$1"));let n=Math.floor(parseInt(e.substring(0,2),16)/2),i=Math.floor(parseInt(e.substring(2,4),16)/2),r=Math.floor(parseInt(e.substring(4,6),16)/2);return t&&(n+=128,i+=128,r+=128),n=`0${n.toString(16)}`.slice(-2),i=`0${i.toString(16)}`.slice(-2),r=`0${r.toString(16)}`.slice(-2),`#${n}${i}${r}`}function T(e){const t=["\\","[","]","(",")","*","~","+","_","\n"];let n="",i=0;for(let r=0;r<e.length;r+=1){const o=e[r];t.includes(o)&&(n+=`${e.slice(i,r)}\\`,i=r)}return 0===i?e:(n+=e.slice(i),n)}function x(){try{const e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch{return!1}}function N(e){let t=e.indexOf("://")+3;t<3&&(t=0),e.startsWith("www.",t)&&(t+=4);let n=e.indexOf("/",t);return-1===n&&(n=e.length),e.endsWith(".com",n)&&(n-=4),n<=t?e:e.slice(t,n)}function I(e){let t=e.indexOf("&");-1===t&&(t=e.length);let n=t-1;for(;n>=0&&"."!==e[n];n-=1)if("/"===e[n])return null;return n+=1,t-n>4?null:e.slice(n,t)}function A(e){let t=e.indexOf("?");return-1===t&&(t=e.indexOf("#")),-1===t?e:e.substring(0,t)}function _(e){const t=new Date,n=new Date(1e3*e);return n.getDate()!==t.getDate()?n.toLocaleString():n.toLocaleTimeString()}function L(e){let t=e.lastIndexOf("#"),n=[];if(-1!==t){let i=e.slice(t+1);t=i.indexOf("?"),-1!==t&&(i=i.slice(0,t)),n=i.split(",").map((e=>parseInt(e,10))).slice(1,3)}return(2!==n.length||n.some(Number.isNaN))&&(n=e.split("_").map((e=>parseInt(e,10)))),(2!==n.length||n.some(Number.isNaN))&&(n=e.split(",").map((e=>parseInt(e,10)))),(2!==n.length||n.some(Number.isNaN))&&(n=null),n}function O(e){if(!e)return 0;const t=e.slice(-1).toLowerCase(),n=parseInt(e.slice(0,-1),10);if(Number.isNaN(n)||n<=0||n>600||!["s","m","h","d"].includes(t))return 0;let i=1e3;return"m"===t?i*=60:"h"===t?i*=3600:"d"===t&&(i*=86400),n*i}function P(e,t){let n=0;for(let i=0;i<e.length;i+=1){const r=Math.abs(e[i]-t[i]);r>n&&(n=r)}return n}function $(e){if(e instanceof TouchEvent){const t=e.touches.length?e.touches:e.changedTouches;let n=0,i=0;for(const{pageX:e,pageY:r}of t)n+=e,i+=r;const{length:r}=t;return[n/r,i/r]}return[e.clientX,e.clientY]}function R(e){return new Promise((t=>{const n=new Blob([e]),i=new FileReader;i.onload=e=>{const n=e.target.result,[,i]=n.split(",");t(i)},i.readAsDataURL(n)}))}async function D(e){const t=`data:application/octet-binary;base64,${e}`;return(await fetch(t)).arrayBuffer()}function M(e){return r.indexOf(e)>=0}},3271:(e,t,n)=>{n.d(t,{Bo:()=>x,D8:()=>S,D_:()=>g,Ge:()=>I,Hi:()=>E,Ky:()=>f,Nl:()=>N,Nq:()=>C,SK:()=>w,VW:()=>h,Vw:()=>_,Yh:()=>T,ZY:()=>r,b9:()=>o,fW:()=>d,kL:()=>u,mM:()=>y,or:()=>m,rL:()=>p,uU:()=>v,vH:()=>b,yU:()=>A,zp:()=>k});var i=n(3008);const r=function(){if(!window.ssv||!window.ssv.shard||"fuckyouarkeros.fun"===window.location.host)return"";const e=window.location.host.split(".");return e.length>2&&e.shift(),`${window.ssv.shard}.${e.join(".")}`}(),o=r&&`${window.location.protocol}//${r}`;async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{timeout:n=3e4}=t,i=new AbortController,r=setTimeout((()=>i.abort()),n),o=await fetch(e,{...t,signal:i.signal});return clearTimeout(r),o}async function s(e){const{status:t}=e;if(429===t){let t="Çok fazla istekte bulundunuz";const n=e.headers.get("Retry-After");return Number.isNaN(Number(n))||(t+=`, ${Math.floor(n/60)} dakika sonra tekrar deneyin`),{errors:[t]}}try{return await e.json()}catch(e){return{errors:[`Bağlantı hatası ${t} :(`]}}}async function l(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(e=`${o}${e}`);try{return s(await a(e,{method:"POST",credentials:n?"include":"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}))}catch(e){return{errors:["Sunucuya bağlanılamadı, lütfen daha sonra tekrar deneyiniz :("]}}}async function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e=`${o}${e}`);try{return s(await a(e,{credentials:t?"include":"omit"}))}catch(e){return{errors:["Sunucuya bağlanılamadı, lütfen daha sonra tekrar deneyiniz :("]}}}async function d(e,t){const n=await l("/api/block",{userId:e,block:t});return n.errors?n.errors[0]:"ok"===n.status?null:"Bilinmeyen Hata"}async function u(e){const t=await l("/api/privatize",{priv:e});return t.errors?t.errors[0]:"ok"===t.status?null:"Bilinmeyen Hata"}async function h(e){const t=await l("/api/startdm",e);return t.errors?t.errors[0]:t.channel?t.channel:"Bilinmeyen Hata"}async function f(e){const t=await l("/api/blockdm",{block:e});return t.errors?t.errors[0]:"ok"===t.status?null:"Bilinmeyen Hata"}async function p(e){const t=await l("/api/leavechan",{channelId:e});return t.errors?t.errors[0]:"ok"===t.status?null:"Bilinmeyen Hata"}async function m(e,t){try{const n=`/history?day=${(0,i.$T)(e)}&id=${t}`,r=await a(n,{credentials:"omit",timeout:45e3});if(200!==r.status)return[];return["00:00",...(await r.json()).map((e=>`${e.substring(0,2)}:${e.substring(2)}`))]}catch{return[]}}async function v(e){const t=await fetch(`${o}/api/chathistory?cid=${e}&limit=50`,{credentials:"include"});if(t.ok){const{history:e}=await t.json();return e}return null}function g(e,t){return l("/api/auth/change_passwd",{password:t,newPassword:e})}async function y(){return c("/api/auth/resend_verify")}async function w(){return!c("/api/auth/logout").errors}function b(e){return l("/api/auth/change_name",{name:e})}function k(e,t){return l("/api/auth/change_mail",{email:e,password:t})}function S(e,t){return l("/api/auth/local",{nameoremail:e,password:t})}function E(e,t,n,i,r){return l("/api/auth/register",{name:e,email:t,password:n,captcha:i,captchaid:r})}function C(e){return l("/api/auth/restore_password",{email:e})}function T(e){return l("/api/auth/delete_account",{password:e})}function x(){return c("/ranking",!1)}function N(){return c("/api/baninfo")}async function I(){if(window.me){const e=await window.me;return delete window.me,s(e)}return c("/api/me")}function A(){return c("/api/getiid")}function _(e){return l("/api/banme",{code:e})}},7811:(e,t,n)=>{function i(e,t,n){return{type:"ALERT",title:e,message:t,alertType:n,btn:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Tamam"}}function r(){return{type:"CLOSE_ALERT"}}function o(){return{type:"s/TGL_HISTORICAL_VIEW"}}function a(){return{type:"s/TGL_EASTER_EGG"}}function s(){return{type:"s/TGL_GRID"}}function l(){return{type:"s/TGL_PXL_NOTIFY"}}function c(){return{type:"s/TGL_MVM_CTRLS"}}function d(){return{type:"s/TGL_AUTO_ZOOM_IN"}}function u(){return{type:"s/TGL_ONLINE_CANVAS"}}function h(){return{type:"s/TGL_MUTE"}}function f(){return{type:"s/TGL_COMPACT_PALETTE"}}function p(){return{type:"s/TGL_CHAT_NOTIFY"}}function m(){return{type:"s/TGL_POTATO_MODE"}}function v(){return{type:"s/TGL_LIGHT_GRID"}}function g(){return{type:"s/TGL_OPEN_PALETTE"}}function y(e,t){return{type:"s/SELECT_HOLD_PAINT",value:e,immediate:t}}function w(){return{type:"SELECT_HOVER_COLOR"}}function b(e){return{type:"s/SELECT_STYLE",style:e}}function k(){return{type:"s/TGL_OPEN_MENU"}}function S(e){return{type:"SET_HOVER",hover:e}}function E(){return{type:"UNSET_HOVER"}}function C(e){return{type:"SET_MOBILE",mobile:e}}function T(){return{type:"WIN_RESIZE"}}function x(e){return{type:"SELECT_COLOR",color:e}}function N(e){return{type:"s/SELECT_CANVAS",canvasId:String(e)}}function I(e){return{type:"UPDATE_VIEW",view:e}}function A(e){return{type:"SET_VIEW_COORDINATES",view:e}}function _(e){return{type:"s/SET_MOVE_U",value:e}}function L(e){return{type:"s/SET_MOVE_V",value:e}}function O(e){return{type:"s/SET_MOVE_W",value:e}}function P(e){return{type:"s/CANCEL_MOVE",value:e}}function $(e){return{type:"REQ_BIG_CHUNK",center:e}}function R(e){return{type:"REMOVE_CHUNKS",chunks:e}}function D(e){return{type:"REC_BIG_CHUNK",chunk:e}}function M(e,t){return{type:"REC_BIG_CHUNK_FAILURE",chunk:e,error:t}}function z(e){return{type:"s/REC_ME",...e}}function H(e){const{ranking:t,dailyRanking:n,dailyCRanking:i,prevTop:r,onlineStats:o,cHistStats:a,histStats:s,pDailyStats:l,pHourlyStats:c}=e;return{type:"REC_STATS",totalRanking:t,totalDailyRanking:n,dailyCRanking:i,prevTop:r,onlineStats:o,cHistStats:a,histStats:s,pDailyStats:l,pHourlyStats:c}}function G(e,t){return{type:"s/REQ_CHAT_MESSAGE",text:e,channel:t}}function V(){return{type:"s/LOGOUT"}}function W(e){return{type:"s/LOGIN",...e}}function U(e){return{type:"s/SET_NAME",name:e}}function F(e){return{type:"s/SET_MAILREG",mailreg:e}}function B(e){return{type:"MARK_CHANNEL_AS_READ",cid:e}}function K(){return(e,t)=>{setInterval((function(){const n=function(e){const t=[],n=Date.now(),{wait:i}=e.user,r=i-n;return null!=i&&(r>0?t.push(function(e){return{type:"COOLDOWN_SET",coolDown:e}}(r)):t.push({type:"COOLDOWN_END"})),t}(t());e(n)}),333)}}function Y(e,t){return{type:"s/BLOCK_USER",userId:e,userName:t}}function j(e,t){return{type:"s/UNBLOCK_USER",userId:e,userName:t}}function q(e){return{type:"s/SET_BLOCKING_DM",blockDm:e}}function X(e){return{type:"s/SET_PRIVATE",priv:e}}function Z(e){return{type:"s/MUTE_CHAT_CHANNEL",cid:e}}function Q(e){return{type:"s/UNMUTE_CHAT_CHANNEL",cid:e}}function J(e,t){return{type:"SET_HISTORICAL_TIME",date:e,time:t}}function ee(){return{type:"RELOAD_URL"}}function te(){return{type:"t/UNLOAD"}}function ne(e){const{id:t,name:n,mailreg:i,blockDm:r,userlvl:o}=e.user,{canvases:a}=e.canvas,{blocked:s,channels:l}=e.chat,{ranking:c,dailyRanking:d,totalPixels:u,dailyTotalPixels:h}=e.ranks;return{type:"s/REC_ME",blockDm:r,blocked:s,canvases:a,channels:l,dailyRanking:d,dailyTotalPixels:h,id:t,mailreg:i,name:n,ranking:c,totalPixels:u,userlvl:o}}n.d(t,{$G:()=>O,$H:()=>m,$l:()=>_,B0:()=>H,Bg:()=>Z,Db:()=>s,Dj:()=>A,GP:()=>te,GX:()=>P,Gr:()=>ne,Je:()=>D,Jz:()=>i,K8:()=>h,Kr:()=>d,L5:()=>T,Lg:()=>v,Lx:()=>W,MM:()=>F,NK:()=>c,Ng:()=>$,Nw:()=>X,Px:()=>f,R$:()=>r,RE:()=>C,SG:()=>g,T9:()=>q,T_:()=>R,W0:()=>z,WM:()=>E,YC:()=>u,Zn:()=>B,_2:()=>w,__:()=>K,e8:()=>o,e_:()=>J,fX:()=>N,f_:()=>S,gJ:()=>G,gj:()=>L,i:()=>U,k7:()=>Q,kK:()=>p,kN:()=>y,kV:()=>j,kW:()=>k,l6:()=>M,mL:()=>b,oB:()=>a,rn:()=>Y,sD:()=>x,vl:()=>I,y1:()=>l,y4:()=>V,yb:()=>ee})},3146:(e,t,n)=>{function i(){return{type:"w/CLOSE"}}function r(){return{type:"w/OPEN"}}function o(e,t,n,i,r){return(o,a)=>{i=Number(i);const s=a();let l;l=s.windows?s.windows.windows.some((e=>"CHAT"===e.windowType&&!e.hidden))&&Object.values(s.windows.args).some((e=>e.chatChannel===i)):"CHAT"===s.popup.windowType||s.popup.args.chatChannel===i,o({type:"s/REC_CHAT_MESSAGE",name:e,text:t,country:n,channel:i,user:r,isPing:!1,isRead:l})}}function a(e){return{type:"REC_COOLDOWN",wait:e}}function s(e){return{type:"REC_ONLINE",online:e}}function l(e){return{type:"s/ADD_CHAT_CHANNEL",channel:e}}function c(e){return{type:"s/REMOVE_CHAT_CHANNEL",cid:e}}function d(e){return{type:"SET_PXLS_FETCHING",fetching:e}}function u(e){return e.type="REC_SET_PXLS",e}n.d(t,{DI:()=>a,V4:()=>l,Zq:()=>s,cB:()=>r,gH:()=>u,jm:()=>o,kE:()=>c,m_:()=>i,wA:()=>d})},8582:(e,t,n)=>{n.d(t,{Hw:()=>p,Ni:()=>d,RB:()=>f,T$:()=>u,YK:()=>c,aQ:()=>l,jF:()=>h,me:()=>g,xs:()=>m});var i=n(3271),r=n(7811),o=n(3146);function a(e){return{type:"SET_API_FETCHING",fetching:e}}function s(e){return{type:"s/SET_CHAT_FETCHING",fetching:e}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return async n=>{n(a(!0));const s=await(0,i.VW)(e);if("string"==typeof s)n((0,r.Jz)("Direct Message Error",s,"error","OK"));else{const e=Number(Object.keys(s)[0]);n((0,o.V4)(s)),t&&t(e)}n(a(!1))}}function c(){return async e=>{const t=await(0,i.Bo)();t.errors||e((0,r.B0)(t))}}function d(){return async e=>{const t=await(0,i.Ge)();t.errors||e((0,r.W0)(t))}}function u(e){return async t=>{t(s(!0));const n=await(0,i.uU)(e);n?(setTimeout((()=>{t(s(!1))}),500),t(function(e,t){return{type:"s/REC_CHAT_HISTORY",cid:e,history:t}}(e,n))):setTimeout((()=>{t(s(!1))}),5e3)}}function h(e,t,n){return async o=>{o(a(!0));const s=await(0,i.fW)(e,n);o(s?(0,r.Jz)("User Block Error",s,"error","OK"):n?(0,r.rn)(e,t):(0,r.kV)(e,t)),o(a(!1))}}function f(e){return async t=>{t(a(!0));const n=await(0,i.Ky)(e);t(n?(0,r.Jz)("Blocking DMs Error",n,"error","OK"):(0,r.T9)(e)),t(a(!1))}}function p(e){return async t=>{t(a(!0));const n=await(0,i.kL)(e);t(n?(0,r.Jz)("Setting User Private Error",n,"error","OK"):(0,r.Nw)(e)),t(a(!1))}}function m(e){return async t=>{t(a(!0));const n=await(0,i.rL)(e);t(n?(0,r.Jz)("Leaving Channel Error",n,"error","OK"):(0,o.kE)(e)),t(a(!1))}}let v=null;function g(e){return t=>{t(function(e){return{type:"SET_NOTIFICATION",notification:e}}(e)),v&&(clearTimeout(v),v=null),v=setTimeout((()=>{t({type:"UNSET_NOTIFICATION"})}),1500)}}},2689:(e,t,n)=>{n.d(t,{S:()=>i,v:()=>r});const i=e=>-1!==e.gui.style.indexOf("dark"),r=e=>[e.canvas.is3D,e.gui.showMvmCtrls||e.user.isOnMobile&&(e.canvas.is3D||e.gui.holdPaint>0&&!e.canvas.isHistoricalView)]},4369:(e,t,n)=>{n.d(t,{A:()=>i});const i=class{recUpdates=!1;timestamp;z;i;j;constructor(e,t,n){this.timestamp=Date.now(),this.z=e,this.i=t,this.j=n}get id(){return this.i<<8|this.j}touch(){this.timestamp=Date.now()}destructor(){}}},538:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(7811),r=n(1596);const o=class{#t;#r=new Map;#o;constructor(e,t){this.#t=e,this.#o=t}get canvasId(){return this.#o}get recChunkIds(){const e=[];return this.#r.forEach((t=>{t.recUpdates&&e.push(t.id)})),e}destructor(){this.#r.forEach((e=>{e.destructor()})),this.#r=new Map}cget(e){return this.#r.get(e)}cset(e,t){this.#r.set(e,t)}bcReqChunk(e){const{z:t,i:n,j:r}=e;this.#t.dispatch((0,i.Ng)([t,n,r]))}bcRecChunk(e){this.#t.dispatch((0,i.Je)(e));const{size:t}=this.#r;if(t>r.i3){const e=t-Math.floor(.9*r.i3),n=Array.from(this.#r.entries()).sort(((e,t)=>e[1].timestamp-t[1].timestamp)).slice(0,e);n.forEach((e=>{let[t]=e;this.#r.delete(t)}));const i=n.map((e=>e[1]));this.bcRemoveChunks(i),console.log(`Cleared ${i.length} to cut amount of chunks to ${this.#r.size}`)}}bcReqChunkFail(e,t){this.#t.dispatch((0,i.l6)(e,t.message))}bcRemoveChunks(e){this.#t.dispatch((0,i.T_)(e))}gc(e){const t=Date.now()-r.XK,n=this.#r,i=[];n.forEach(((r,o)=>{if(t>r.timestamp){const{z:t,i:a,j:s}=r;e.isChunkInView(t,a,s)||(i.push(r),n.delete(o),r.destructor())}})),i.length&&this.bcRemoveChunks(i),console.log(`GC cleaned ${i.length} / ${n.size+i.length} chunks`)}}},3503:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(7811),r=n(3146),o=n(8582);const a=new class{constructor(){this.requestFromQueue=this.requestFromQueue.bind(this),this.pixelQueue=[],this.clientPredictions=[],this.extension=null,window.registerPixelUpdates=e=>{this.extension=e}}initialize(e,t,n){this.store=e,this.socketClient=t,this.getRenderer=n}async requestFromQueue(){const{store:e}=this;if(!this.pixelQueue.length)return void e.dispatch((0,r.wA)(!1));e.dispatch((0,r.wA)(!0));const{i:t,j:n,pixels:a}=this.pixelQueue.shift();let s;try{s=await this.socketClient.sendPixelUpdate(t,n,a)}catch{s={retCode:16,coolDownSeconds:0,pxlCnt:0},e.dispatch((0,i.Jz)("Zaman aşımı","Pixelplanet'ten yanıt alınamadı. Sorun devam ederse sayfayı yenilemeyi deneyebilirsiniz.","error"))}const{retCode:l,coolDownSeconds:c,pxlCnt:d}=s;if(c&&e.dispatch((0,o.me)(c)),d<a.length){const[e]=a[d];this.revertPredictionsAt(t,n,e),this.pixelQueue=[]}let u=null,h=null,f="error";switch(l){case 0:case 9:break;case 1:u="Geçersiz Tuval",h="Böyle bir tuval yok";break;case 2:u="Geçersiz Koordinatlar",h="x sınırların dışında";break;case 3:u="Geçersiz Koordinatlar",h="y sınırların dışında";break;case 4:u="Geçersiz Koordinatlar",h="z sınırların dışında";break;case 5:u="Yanlış Renk",h="Geçersiz renk seçili";break;case 6:u="Yalnız giriş yapmış üyeler için",h="Bu tuvalde çizebilmek için giriş yapmanız gerekiyor";break;case 7:u="İzin yok",h="Piksel sayınız yetersiz olduğu için şu anda bu tuvale erişiminiz yok";break;case 8:e.dispatch((0,o.me)("Piksel korunuyor"));break;case 10:u="Captcha",h="Lütfen insan olduğunuzu kanıtlayın",f="captcha";break;case 11:u="İzin yok",h="Proxy kullanıyorsun.";break;case 12:u="İzin yok",h="Yalnızca dünün ilk 10 oyuncusu buraya piksel atabilir";break;case 13:u="Değişiksiniz",h="Piksellerin sunucunun kafasını karıştırdı. Birden fazla cihazda mı oynuyorsun?";break;case 14:u="Yasaklandınız",f="ban";break;case 15:u="Alan Yasaklısınız",h="İnternet sağlayıcınız oyundan yasaklı";break;case 16:u="Zaman aşımı",h="Pixelplanet'ten yanıt alınamadı. Sorun devam ederse sayfayı yenilemeyi deneyebilirsiniz.";break;default:u="Garip",h="Piksel ayarlanamadı"}(h||u)&&e.dispatch((0,i.Jz)(u||`Hata ${l}`,h,f)),e.dispatch((0,r.gH)(s)),setTimeout(this.requestFromQueue,100)}revertPredictionsAt(e,t,n){const i=this.getRenderer(),{clientPredictions:r}=this;let o=0;for(;o<r.length;){const i=r[o];if(i[0]===e&&i[1]===t&&i[2]===n)break;o+=1}const a=o;for(;o<r.length;){const[e,t,n,a]=r[o];i.renderPixel(e,t,n,a,!1),o+=1}this.clientPredictions.splice(a)}receivePixelUpdate(e){let{i:t,j:n,pixels:i}=e;this.extension&&this.extension(t,n,i),i.forEach((e=>{const[i,r]=e,{clientPredictions:o}=this;for(let e=0;e<o.length;e+=1){const a=o[e];if(a[0]===t&&a[1]===n&&a[2]===i)return void(a[4]===r?o.splice(e,1):a[3]=r)}this.getRenderer().renderPixel(t,n,i,r,!0)}))}tryPlacePixel(e,t,n,i,r){this.getRenderer().renderPixel(e,t,n,i,!1),this.clientPredictions.push([e,t,n,r,i]);const{pixelQueue:o}=this;if(o.length){const r=o[o.length-1],{i:a,j:s}=r;if(e===a&&t===s)return void r.pixels.push([n,i])}o.push({i:e,j:t,pixels:[[n,i]]}),this.store.getState().fetching.fetchingPixel||this.requestFromQueue()}}},6085:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(1596),r=n(7811);const o=class{store;controls={update(){}};chunkLoader=null;is3D=null;forceNextRender=!0;forceNextSubrender=!0;_view=[0,0,0];#a=null;constructor(e){this.store=e}get view(){return[...this._view]}get chunks(){return this.chunkLoader.chunks}get recChunkIds(){return this.chunkLoader?this.chunkLoader.recChunkIds:[]}destructor(){this.chunkLoader?.destructor(),this.cancelStoreViewInState()}updateView(e){for(let t=0;t<e.length;t+=1)this._view[t]=e[t]}loadViewFromState(){this.store&&this.updateView(this.store.getState().canvas.view)}cancelStoreViewInState(){this.#a&&(clearTimeout(this.#a),this.#a=null)}storeViewInState(){this.store&&(this.cancelStoreViewInState(),this.#a=setTimeout((()=>{this.#a=null,this.store.dispatch((0,r.vl)(this.view))}),i.OE))}render(){return this.controls.update(this.forceNextRender)}renderPixel(){}updateCanvasData(){}getPointedColor(){return null}isChunkInView(){return!0}gc(){this.chunkLoader?.gc(this)}}},9049:(e,t,n)=>{async function i(e){e.toBlob((e=>{try{if(!navigator.clipboard)throw new Error("Clipboard API not implemented");navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(e){console.log("Couldn't copy canvas to clipboard",e)}}),"image/png")}n.d(t,{A:()=>r,X:()=>i});const r=async function(e){if(!navigator.clipboard)return function(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{const e=document.execCommand("copy");return document.body.removeChild(t),e}catch{return document.body.removeChild(t),!1}}(e);try{return await navigator.clipboard.writeText(e),!0}catch{return!1}}},4423:(e,t,n)=>{function i(e){const t=document.createElement("canvas");return t.width=e.naturalWidth,t.height=e.naturalHeight,t.getContext("2d").drawImage(e,0,0),t}function r(e){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{const e=new Image;e.onload=()=>{t(i(e))},e.onerror=e=>n(e),e.src=r.result},r.onerror=e=>n(e),r.readAsDataURL(e)}))}function o(e,t){return r(new Blob([e],{type:t}))}function a(e,t){return new Promise(((n,i)=>{e.toBlob((e=>{e.arrayBuffer().then(n).catch(i)}),t)}))}n.d(t,{Ic:()=>o,Pe:()=>i,SJ:()=>a,YU:()=>r})}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o.m=i,e=[],o.O=(t,n,i,r)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,i,r]=e[d],s=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>233===e?"three.1659bb7b.js":{5:"converter",101:"voxel",133:"gpfactions",636:"stats",662:"modtools"}[e]+".tr."+{5:"8b39741c",101:"3018b41a",133:"9efdf000",636:"ab7835a2",662:"00281d9f"}[e]+".js",o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="PixelPlanet:",o.l=(e,i,r,a)=>{if(t[e])t[e].push(i);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+r){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",n+r),s.src=e),t[e]=[i];var h=(n,i)=>{s.onerror=s.onload=null,clearTimeout(f);var r=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(i))),n)return n(i)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/assets/",(()=>{var e={818:0};o.f.j=(t,n)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var a=o.p+o.u(t),s=new Error;o.l(a,(n=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,i[1](s)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,s,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var d=l(o)}for(t&&t(n);c<a.length;c++)r=a[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},n=self.webpackChunkPixelPlanet=self.webpackChunkPixelPlanet||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[121],(()=>o(930)));a=o.O(a)})();